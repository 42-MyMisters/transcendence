{"ast":null,"code":"import { io } from 'socket.io-client';\nconst URL = \"http://wchaeserver.mooo.com:4000\";\nconst NameSpace = \"/sock\";\nexport const socket = io(`${URL}${NameSpace}`, {\n  auth: cb => {\n    cb({\n      token: localStorage.getItem(\"refreshToken\")\n    });\n  },\n  autoConnect: false,\n  transports: [\"websocket\"]\n  // reconnectionDelay: 1000, // defaults to 1000\n  // reconnectionDelayMax: 10000, // defaults to 5000\n  // withCredentials: true,\n  // path: \"/socket.io\",\n});\n\nexport function emitRoomCreate(roomName) {\n  let roomCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  let roomPass = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n  const roomType = roomCheck ? 'private' : roomPass ? 'protected' : 'open';\n  socket.emit(\"room-create\", {\n    roomName,\n    roomType,\n    roomPass\n  }, _ref => {\n    let {\n      status,\n      payload\n    } = _ref;\n    switch (status) {\n      case 'ok':\n        {\n          console.log(\"room-create success\");\n          break;\n        }\n      case 'ko':\n        {\n          console.log(\"room-create fail\");\n          alert(`${roomName} room-create fail ${payload}`);\n          break;\n        }\n    }\n    ;\n  });\n}\nexport function emitRoomEdit(roomId) {\n  let roomName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  let roomCheck = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  let roomPass = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n  let roomCurrentType = arguments.length > 4 ? arguments[4] : undefined;\n  if (roomCurrentType === 'dm') {\n    alert(`dm room can't be edited`);\n    return;\n  }\n  const roomType = roomCheck ? 'private' : roomCurrentType === 'protected' ? 'protected' : roomPass !== '' ? 'protected' : 'open';\n  socket.emit(\"room-edit\", {\n    roomId,\n    roomName,\n    roomType,\n    roomPass\n  }, _ref2 => {\n    let {\n      status,\n      payload\n    } = _ref2;\n    switch (status) {\n      case 'ok':\n        {\n          console.log(\"room-edit success\");\n          break;\n        }\n      case 'ko':\n        {\n          console.log(\"room-edit fail\");\n          alert(`${roomName} room-edit fail ${payload}`);\n          break;\n        }\n    }\n    ;\n  });\n}\nexport function emitRoomJoin(_ref3, roomId, roomPass) {\n  let {\n    roomList,\n    setRoomList,\n    focusRoom,\n    setFocusRoom\n  } = _ref3;\n  socket.emit(\"room-join\", {\n    roomId,\n    roomPass\n  }, _ref4 => {\n    let {\n      status,\n      payload\n    } = _ref4;\n    switch (status) {\n      case 'ok':\n        {\n          console.log(`${roomList[roomId].roomName} room-join success`);\n          break;\n        }\n      case 'ko':\n        {\n          alert(`room-join fail: \\n\\n${payload}`);\n          break;\n        }\n    }\n  });\n}\nexport function emitRoomInvite(roomId, targetName) {\n  socket.emit(\"room-invite\", {\n    roomId,\n    targetName\n  }, _ref5 => {\n    let {\n      status,\n      payload\n    } = _ref5;\n    if (status === 'ok') {\n      console.log(`callback: room-invite success`);\n    } else {\n      alert(`room-invite fail: ${payload}`);\n    }\n  });\n}\nexport function emitRoomLeave(_ref6, roomId) {\n  let {\n    roomList,\n    setRoomList,\n    focusRoom,\n    setFocusRoom\n  } = _ref6;\n  let ban = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  socket.emit(\"room-leave\", {\n    roomId\n  }, _ref7 => {\n    let {\n      status\n    } = _ref7;\n    if (status === 'leave') {\n      console.log(`callback: room leaved: ${roomList[roomId].roomName}`);\n      if (roomList[roomId].roomType === 'private') {\n        const newRoomList = {\n          ...roomList\n        };\n        delete newRoomList[roomId];\n        setRoomList({\n          ...newRoomList\n        });\n      } else {\n        const newRoomList = {};\n        newRoomList[roomId] = {\n          roomName: roomList[roomId].roomName,\n          roomType: roomList[roomId].roomType,\n          isJoined: false\n        };\n        setRoomList({\n          ...roomList,\n          ...newRoomList\n        });\n      }\n      if (focusRoom === roomId) {\n        setFocusRoom(-1);\n      }\n    } else if (status === 'delete') {\n      console.log(`callback: room delete: ${roomList[roomId].roomName}`);\n    } else {\n      console.log('callback: room leave failed');\n    }\n  });\n}\nexport function emitRoomInAction(_ref8, roomId, action, targetId) {\n  let {\n    roomList,\n    setRoomList\n  } = _ref8;\n  socket.emit(\"room-in-action\", {\n    roomId,\n    action,\n    targetId\n  }, _ref9 => {\n    let {\n      status,\n      payload\n    } = _ref9;\n    switch (status) {\n      case 'ok':\n        {\n          console.log(`room - inaction in ${roomId} to ${targetId} with ${action} OK`);\n          break;\n        }\n      case 'ko':\n        {\n          console.log(`room - inaction in ${roomId} to ${targetId} with ${action} failed: ${payload} `);\n          alert(`Room in Action [${action}] is faild: ${payload}`);\n          break;\n        }\n    }\n  });\n}\nexport function emitMessage(_ref10, roomId, message) {\n  var _roomList$roomId, _roomList$roomId$deta;\n  let {\n    roomList\n  } = _ref10;\n  if (((_roomList$roomId = roomList[roomId]) === null || _roomList$roomId === void 0 ? void 0 : (_roomList$roomId$deta = _roomList$roomId.detail) === null || _roomList$roomId$deta === void 0 ? void 0 : _roomList$roomId$deta.myRoomStatus) === 'mute') {\n    alert('You are muted for 10 sec in this room');\n    return;\n  }\n  socket.emit(\"message\", {\n    roomId,\n    message\n  }, _ref11 => {\n    let {\n      status,\n      payload\n    } = _ref11;\n    switch (status) {\n      case 'ok':\n        {\n          console.log(`message to ${roomList[roomId].roomName} is sended: ${message} `);\n          break;\n        }\n      case 'ko':\n        {\n          console.log(`message to ${roomId} is failed: \\n\\n${payload} `);\n          alert(`message failed: ${payload}`);\n          break;\n        }\n    }\n  });\n}\nexport function setNewDetailToNewRoom(_ref12, status, power) {\n  var _roomList$roomId$deta2, _roomList$roomId$deta3, _roomList$roomId$deta4;\n  let {\n    roomList,\n    setRoomList,\n    roomId,\n    newUserList\n  } = _ref12;\n  const newRoomList = {};\n  newRoomList[roomId] = {\n    roomName: roomList[roomId].roomName,\n    roomType: roomList[roomId].roomType,\n    isJoined: roomList[roomId].isJoined,\n    detail: {\n      userList: {\n        ...newUserList\n      },\n      messageList: ((_roomList$roomId$deta2 = roomList[roomId].detail) === null || _roomList$roomId$deta2 === void 0 ? void 0 : _roomList$roomId$deta2.messageList) || [],\n      myRoomStatus: status || ((_roomList$roomId$deta3 = roomList[roomId].detail) === null || _roomList$roomId$deta3 === void 0 ? void 0 : _roomList$roomId$deta3.myRoomStatus) || 'normal',\n      myRoomPower: power || ((_roomList$roomId$deta4 = roomList[roomId].detail) === null || _roomList$roomId$deta4 === void 0 ? void 0 : _roomList$roomId$deta4.myRoomPower) || 'member'\n    }\n  };\n  setRoomList({\n    ...roomList,\n    ...newRoomList\n  });\n}\nexport function emitBlockUser(_ref13, targetId, doOrUndo) {\n  let {\n    blockList,\n    setBlockList\n  } = _ref13;\n  if (doOrUndo) {\n    console.log(`block user: ${targetId}`);\n  } else {\n    console.log(`unblock user: ${targetId}`);\n  }\n  socket.emit(\"user-block\", {\n    targetId,\n    doOrUndo\n  }, _ref14 => {\n    let {\n      status,\n      payload\n    } = _ref14;\n    switch (status) {\n      case 'on':\n        {\n          const newBlockUser = {};\n          newBlockUser[targetId] = {\n            blocked: true\n          };\n          setBlockList({\n            ...blockList,\n            ...newBlockUser\n          });\n          break;\n        }\n      case 'off':\n        {\n          const newBlockList = {\n            ...blockList\n          };\n          delete newBlockList[targetId];\n          setBlockList({\n            ...newBlockList\n          });\n          break;\n        }\n      case 'ko':\n        {\n          console.log(`user - block failed: ${payload} `);\n          alert(`block failed: ${payload}`);\n          break;\n        }\n    }\n  });\n}\nexport function emitDmRoomCreate(targetId) {\n  socket.emit(\"dm-room-create\", {\n    targetId\n  }, _ref15 => {\n    let {\n      status\n    } = _ref15;\n    if (status === 'ok') {\n      console.log(`dm room create to ${targetId} is sended`);\n    } else {\n      console.log(`dm room create to ${targetId} is failed`);\n    }\n  });\n}\nexport function emitDM(targetId, message) {\n  socket.emit(\"message-dm\", {\n    targetId,\n    message\n  }, _ref16 => {\n    let {\n      status\n    } = _ref16;\n    if (status === 'ok') {\n      console.log(`dm to ${targetId} is sended: ${message}`);\n    } else {\n      console.log(`dm to ${targetId} is failed: ${message}`);\n    }\n  });\n}","map":{"version":3,"names":["io","URL","NameSpace","socket","auth","cb","token","localStorage","getItem","autoConnect","transports","emitRoomCreate","roomName","roomCheck","arguments","length","undefined","roomPass","roomType","emit","_ref","status","payload","console","log","alert","emitRoomEdit","roomId","roomCurrentType","_ref2","emitRoomJoin","_ref3","roomList","setRoomList","focusRoom","setFocusRoom","_ref4","emitRoomInvite","targetName","_ref5","emitRoomLeave","_ref6","ban","_ref7","newRoomList","isJoined","emitRoomInAction","_ref8","action","targetId","_ref9","emitMessage","_ref10","message","_roomList$roomId","_roomList$roomId$deta","detail","myRoomStatus","_ref11","setNewDetailToNewRoom","_ref12","power","_roomList$roomId$deta2","_roomList$roomId$deta3","_roomList$roomId$deta4","newUserList","userList","messageList","myRoomPower","emitBlockUser","_ref13","doOrUndo","blockList","setBlockList","_ref14","newBlockUser","blocked","newBlockList","emitDmRoomCreate","_ref15","emitDM","_ref16"],"sources":["/data/front/src/socket/chat.socket.ts"],"sourcesContent":["import { io } from 'socket.io-client';\nimport { useAtom } from \"jotai\";\nimport * as chatAtom from '../components/atom/ChatAtom';\nimport * as userAtom from '../components/atom/UserAtom';\nimport type * as chatType from './chat.dto';\n\nconst URL = \"http://wchaeserver.mooo.com:4000\";\nconst NameSpace = \"/sock\";\n\nexport const socket = io(`${URL}${NameSpace}`, {\n\tauth: (cb) => {\n\t\tcb({ token: localStorage.getItem(\"refreshToken\") });\n\t},\n\tautoConnect: false,\n\ttransports: [\"websocket\"],\n\t// reconnectionDelay: 1000, // defaults to 1000\n\t// reconnectionDelayMax: 10000, // defaults to 5000\n\t// withCredentials: true,\n\t// path: \"/socket.io\",\n});\n\nexport function emitRoomCreate(\n\troomName: string,\n\troomCheck: boolean = false,\n\troomPass: string = '',\n) {\n\tconst roomType = roomCheck\n\t\t? 'private'\n\t\t: roomPass\n\t\t\t? 'protected'\n\t\t\t: 'open';\n\tsocket.emit(\"room-create\", {\n\t\troomName,\n\t\troomType,\n\t\troomPass,\n\t}, ({\n\t\tstatus,\n\t\tpayload,\n\t}: {\n\t\tstatus: 'ok' | 'ko',\n\t\tpayload?: string,\n\t}) => {\n\t\tswitch (status) {\n\t\t\tcase 'ok': {\n\t\t\t\tconsole.log(\"room-create success\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'ko': {\n\t\t\t\tconsole.log(\"room-create fail\");\n\t\t\t\talert(`${roomName} room-create fail ${payload}`);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\t});\n}\n\nexport function emitRoomEdit(\n\troomId: number,\n\troomName: string = '',\n\troomCheck: boolean = false,\n\troomPass: string = '',\n\troomCurrentType: 'open' | 'private' | 'protected' | 'dm',\n) {\n\tif (roomCurrentType === 'dm') {\n\t\talert(`dm room can't be edited`);\n\t\treturn;\n\t}\n\tconst roomType = roomCheck\n\t\t? 'private'\n\t\t: roomCurrentType === 'protected'\n\t\t\t? 'protected'\n\t\t\t: roomPass !== ''\n\t\t\t\t? 'protected'\n\t\t\t\t: 'open'\n\tsocket.emit(\"room-edit\", {\n\t\troomId,\n\t\troomName,\n\t\troomType,\n\t\troomPass,\n\t}, ({\n\t\tstatus,\n\t\tpayload,\n\t}: {\n\t\tstatus: 'ok' | 'ko',\n\t\tpayload?: string,\n\t}) => {\n\t\tswitch (status) {\n\t\t\tcase 'ok': {\n\t\t\t\tconsole.log(\"room-edit success\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'ko': {\n\t\t\t\tconsole.log(\"room-edit fail\");\n\t\t\t\talert(`${roomName} room-edit fail ${payload}`);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\t});\n}\n\nexport function emitRoomJoin(\n\t{\n\t\troomList,\n\t\tsetRoomList,\n\t\tfocusRoom,\n\t\tsetFocusRoom\n\t}: {\n\t\troomList: chatType.roomListDto,\n\t\tsetRoomList: React.Dispatch<React.SetStateAction<chatType.roomListDto>>,\n\t\tfocusRoom: number,\n\t\tsetFocusRoom: React.Dispatch<React.SetStateAction<number>>,\n\t},\n\troomId: number,\n\troomPass?: string,\n) {\n\tsocket.emit(\"room-join\", {\n\t\troomId,\n\t\troomPass,\n\t}, ({\n\t\tstatus,\n\t\tpayload\n\t}: {\n\t\tstatus: 'ok' | 'ko';\n\t\tpayload?: string;\n\t}) => {\n\t\tswitch (status) {\n\t\t\tcase 'ok': {\n\t\t\t\tconsole.log(`${roomList[roomId].roomName} room-join success`);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'ko': {\n\t\t\t\talert(`room-join fail: \\n\\n${payload}`);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function emitRoomInvite(roomId: number, targetName: string) {\n\tsocket.emit(\"room-invite\", { roomId, targetName }, ({\n\t\tstatus,\n\t\tpayload }: {\n\t\t\tstatus: 'ok' | 'ko';\n\t\t\tpayload?: string\n\t\t}) => {\n\t\tif (status === 'ok') {\n\t\t\tconsole.log(`callback: room-invite success`);\n\t\t} else {\n\t\t\talert(`room-invite fail: ${payload}`)\n\t\t}\n\t})\n}\n\nexport function emitRoomLeave(\n\t{\n\t\troomList,\n\t\tsetRoomList,\n\t\tfocusRoom,\n\t\tsetFocusRoom\n\t}: {\n\t\troomList: chatType.roomListDto,\n\t\tsetRoomList: React.Dispatch<React.SetStateAction<chatType.roomListDto>>,\n\t\tfocusRoom: number,\n\t\tsetFocusRoom: React.Dispatch<React.SetStateAction<number>>,\n\t},\n\troomId: number,\n\tban: boolean = false\n) {\n\tsocket.emit(\"room-leave\", {\n\t\troomId\n\t}, ({\n\t\tstatus,\n\t}: {\n\t\tstatus: 'leave' | 'delete',\n\t}) => {\n\t\tif (status === 'leave') {\n\t\t\tconsole.log(`callback: room leaved: ${roomList[roomId].roomName}`);\n\t\t\tif (roomList[roomId].roomType === 'private') {\n\t\t\t\tconst newRoomList: chatType.roomListDto = { ...roomList };\n\t\t\t\tdelete newRoomList[roomId];\n\t\t\t\tsetRoomList({ ...newRoomList });\n\t\t\t} else {\n\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\troomName: roomList[roomId].roomName,\n\t\t\t\t\troomType: roomList[roomId].roomType,\n\t\t\t\t\tisJoined: false,\n\t\t\t\t}\n\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t}\n\t\t\tif (focusRoom === roomId) {\n\t\t\t\tsetFocusRoom(-1);\n\t\t\t}\n\t\t} else if (status === 'delete') {\n\t\t\tconsole.log(`callback: room delete: ${roomList[roomId].roomName}`);\n\t\t} else {\n\t\t\tconsole.log('callback: room leave failed');\n\t\t}\n\t});\n}\n\nexport function emitRoomInAction(\n\t{\n\t\troomList,\n\t\tsetRoomList,\n\t}: {\n\t\troomList: chatType.roomListDto,\n\t\tsetRoomList: React.Dispatch<React.SetStateAction<chatType.roomListDto>>,\n\t},\n\troomId: number,\n\taction: 'ban' | 'kick' | 'mute' | 'admin',\n\ttargetId: number,\n) {\n\tsocket.emit(\"room-in-action\", {\n\t\troomId,\n\t\taction,\n\t\ttargetId,\n\t}, ({\n\t\tstatus,\n\t\tpayload,\n\t}: {\n\t\tstatus: 'ok' | 'ko',\n\t\tpayload?: string,\n\t}) => {\n\t\tswitch (status) {\n\t\t\tcase 'ok': {\n\t\t\t\tconsole.log(`room - inaction in ${roomId} to ${targetId} with ${action} OK`);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'ko': {\n\t\t\t\tconsole.log(`room - inaction in ${roomId} to ${targetId} with ${action} failed: ${payload} `);\n\t\t\t\talert(`Room in Action [${action}] is faild: ${payload}`);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function emitMessage({ roomList, }: { roomList: chatType.roomListDto, }, roomId: number, message: string,) {\n\tif (roomList[roomId]?.detail?.myRoomStatus === 'mute') {\n\t\talert('You are muted for 10 sec in this room');\n\t\treturn;\n\t}\n\tsocket.emit(\"message\", {\n\t\troomId,\n\t\tmessage\n\t}, ({\n\t\tstatus,\n\t\tpayload,\n\t}: {\n\t\tstatus: 'ok' | 'ko',\n\t\tpayload?: 'string'\n\t}) => {\n\t\tswitch (status) {\n\t\t\tcase 'ok': {\n\t\t\t\tconsole.log(`message to ${roomList[roomId].roomName} is sended: ${message} `);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'ko': {\n\t\t\t\tconsole.log(`message to ${roomId} is failed: \\n\\n${payload} `);\n\t\t\t\talert(`message failed: ${payload}`);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function setNewDetailToNewRoom({\n\troomList,\n\tsetRoomList,\n\troomId,\n\tnewUserList,\n}: {\n\troomList: chatType.roomListDto,\n\tsetRoomList: React.Dispatch<React.SetStateAction<chatType.roomListDto>>,\n\troomId: number,\n\tnewUserList: chatType.userInRoomListDto\n}, status?: chatType.userRoomStatus,\n\tpower?: chatType.userRoomPower) {\n\tconst newRoomList: chatType.roomListDto = {}\n\tnewRoomList[roomId] = {\n\t\troomName: roomList[roomId].roomName,\n\t\troomType: roomList[roomId].roomType,\n\t\tisJoined: roomList[roomId].isJoined,\n\t\tdetail: {\n\t\t\tuserList: { ...newUserList },\n\t\t\tmessageList: roomList[roomId].detail?.messageList || [],\n\t\t\tmyRoomStatus: status || roomList[roomId].detail?.myRoomStatus! || 'normal',\n\t\t\tmyRoomPower: power || roomList[roomId].detail?.myRoomPower! || 'member'\n\t\t}\n\t};\n\tsetRoomList({ ...roomList, ...newRoomList });\n}\n\n\nexport function emitBlockUser({\n\tblockList,\n\tsetBlockList,\n}: {\n\tblockList: chatType.userSimpleDto,\n\tsetBlockList: React.Dispatch<React.SetStateAction<chatType.userSimpleDto>>,\n},\n\ttargetId: number,\n\tdoOrUndo: boolean,\n) {\n\tif (doOrUndo) {\n\t\tconsole.log(`block user: ${targetId}`);\n\t} else {\n\t\tconsole.log(`unblock user: ${targetId}`);\n\t}\n\tsocket.emit(\"user-block\", {\n\t\ttargetId,\n\t\tdoOrUndo\n\t}, ({\n\t\tstatus,\n\t\tpayload\n\t}: {\n\t\tstatus: 'on' | 'off' | 'ko',\n\t\tpayload?: string,\n\t}) => {\n\t\tswitch (status) {\n\t\t\tcase 'on': {\n\t\t\t\tconst newBlockUser: chatType.userSimpleDto = {};\n\t\t\t\tnewBlockUser[targetId] = {\n\t\t\t\t\tblocked: true\n\t\t\t\t}\n\t\t\t\tsetBlockList({ ...blockList, ...newBlockUser });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'off': {\n\t\t\t\tconst newBlockList: chatType.userSimpleDto = { ...blockList };\n\t\t\t\tdelete newBlockList[targetId];\n\t\t\t\tsetBlockList({ ...newBlockList });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'ko': {\n\t\t\t\tconsole.log(`user - block failed: ${payload} `);\n\t\t\t\talert(`block failed: ${payload}`);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n}\n\n\nexport function emitDmRoomCreate(targetId: number,) {\n\tsocket.emit(\"dm-room-create\", {\n\t\ttargetId,\n\t}, ({\n\t\tstatus\n\t}: {\n\t\tstatus: 'ok' | 'ko',\n\t}) => {\n\t\tif (status === 'ok') {\n\t\t\tconsole.log(`dm room create to ${targetId} is sended`);\n\t\t} else {\n\t\t\tconsole.log(`dm room create to ${targetId} is failed`);\n\t\t}\n\t});\n}\n\nexport function emitDM(targetId: number, message: string) {\n\tsocket.emit(\"message-dm\", {\n\t\ttargetId,\n\t\tmessage\n\t}, ({\n\t\tstatus,\n\t}: {\n\t\tstatus: 'ok' | 'ko',\n\t}) => {\n\t\tif (status === 'ok') {\n\t\t\tconsole.log(`dm to ${targetId} is sended: ${message}`);\n\t\t} else {\n\t\t\tconsole.log(`dm to ${targetId} is failed: ${message}`);\n\t\t}\n\t})\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}