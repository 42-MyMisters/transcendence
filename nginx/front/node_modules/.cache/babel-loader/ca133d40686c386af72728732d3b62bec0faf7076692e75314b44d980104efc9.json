{"ast":null,"code":"var _jsxFileName = \"/data/front/src/pages/ChatPage.tsx\",\n  _s = $RefreshSig$();\nimport BackGround from \"../components/BackGround\";\nimport TopBar from \"../components/TopBar\";\nimport ChatRoomList from \"../components/ChatPage/ChatRoomList\";\nimport ChatUserList from \"../components/ChatPage/ChatUserList\";\nimport ChatArea from \"../components/ChatPage/ChatArea\";\nimport ChatRoomUserList from \"../components/ChatPage/ChatRoomUserList\";\nimport { useAtom } from \"jotai\";\nimport { userInfoModalAtom, passwordInputModalAtom, roomModalAtom, inviteModalAtom, gameInviteModalAtom } from \"../components/atom/ModalAtom\";\nimport UserInfoModal from \"../components/ChatPage/UserInfoModal\";\nimport RoomModal from \"../components/ChatPage/RoomModal\";\nimport RoomInviteModal from \"../components/ChatPage/RoomInviteModal\";\nimport PasswordModal from \"../components/ChatPage/PasswordModal\";\nimport { refreshTokenAtom } from \"../components/atom/LoginAtom\";\nimport { UserAtom } from \"../components/atom/UserAtom\";\nimport { useEffect } from \"react\";\nimport * as socket from \"../socket/chat.socket\";\nimport * as chatAtom from \"../components/atom/ChatAtom\";\nimport { GetMyInfo, RefreshToken, LogOut } from \"../event/api.request\";\nimport { useNavigate } from \"react-router-dom\";\nimport GameInviteModal from \"../components/GamePage/GameInviteModal\";\nimport { PressKey, AdminLogPrinter } from \"../event/event.util\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatPage() {\n  _s();\n  const [userInfoModal, setUserInfoModal] = useAtom(userInfoModalAtom);\n  const [roomModal, setRoomModal] = useAtom(roomModalAtom);\n  const [inviteModal, setInviteModal] = useAtom(inviteModalAtom);\n  const [pwInputModal, setPwInputModal] = useAtom(passwordInputModalAtom);\n  const [userInfo, setUserInfo] = useAtom(UserAtom);\n  const [isFirstLogin, setIsFirstLogin] = useAtom(chatAtom.isFirstLoginAtom);\n  const [hasLogin, setHasLogin] = useAtom(chatAtom.hasLoginAtom);\n  const [roomList, setRoomList] = useAtom(chatAtom.roomListAtom);\n  const [userList, setUserList] = useAtom(chatAtom.userListAtom);\n  const [dmHistoryList, setDmHistoryList] = useAtom(chatAtom.dmHistoryListAtom);\n  const [followingList, setFollowingList] = useAtom(chatAtom.followingListAtom);\n  const [blockList, setBlockList] = useAtom(chatAtom.blockListAtom);\n  const [focusRoom, setFocusRoom] = useAtom(chatAtom.focusRoomAtom);\n  const [socketState, setSocketState] = useAtom(chatAtom.socketStateAtom);\n  const navigate = useNavigate();\n  const [, setRefreshToken] = useAtom(refreshTokenAtom);\n  const [gameInviteModal, setGameInviteModal] = useAtom(gameInviteModalAtom);\n  const [adminConsole, setAdminConsole] = useAtom(chatAtom.adminConsoleAtom);\n  PressKey([\"F4\"], () => {\n    setAdminConsole(prev => !prev);\n  });\n  const getRoomList = () => {\n    AdminLogPrinter(adminConsole, \"\\n\\ngetRoomList\");\n    Object.entries(roomList).forEach(_ref => {\n      let [key, value] = _ref;\n      if (value.detail !== undefined) {\n        AdminLogPrinter(adminConsole, `\\n[ ${value.roomName} : ${key}] - ${value.roomType}`);\n        Object.entries(value.detail).forEach(_ref2 => {\n          let [key, value] = _ref2;\n          if (key === \"userList\") {\n            Object.entries(value).forEach(_ref3 => {\n              let [key, value] = _ref3;\n              AdminLogPrinter(adminConsole, `uid: ${key}, value: ${JSON.stringify(value)}`);\n            });\n          } else {\n            AdminLogPrinter(adminConsole, `key: ${key}, value: ${JSON.stringify(value)}`);\n          }\n        });\n      } else {\n        AdminLogPrinter(adminConsole, `[ ${value.roomName} ] \\nvalue: ${JSON.stringify(value)}`);\n      }\n    });\n  };\n  const getUserList = () => {\n    AdminLogPrinter(adminConsole, \"\\n\\ngetUserList\");\n    Object.entries(userList).forEach(_ref4 => {\n      let [key, value] = _ref4;\n      AdminLogPrinter(adminConsole, `[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n    });\n  };\n  const getDMList = () => {\n    AdminLogPrinter(adminConsole, \"\\n\\ngetDmHitoryList\");\n    Object.entries(dmHistoryList).forEach(_ref5 => {\n      let [key, value] = _ref5;\n      AdminLogPrinter(adminConsole, `[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n    });\n  };\n  const getFollowingList = () => {\n    AdminLogPrinter(adminConsole, `\\n\\ngetFollowingList`);\n    Object.entries(followingList).forEach(_ref6 => {\n      let [key, value] = _ref6;\n      AdminLogPrinter(adminConsole, `[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n    });\n  };\n  const showSocketState = () => {\n    AdminLogPrinter(adminConsole, `socket state: ${socketState}`);\n  };\n  const getBlockList = () => {\n    AdminLogPrinter(adminConsole, `\\n\\ngetBlockList`);\n    Object.entries(blockList).forEach(_ref7 => {\n      let [key, value] = _ref7;\n      AdminLogPrinter(adminConsole, `[ ${userList[Number(key)].userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n    });\n  };\n  const showMyinfo = () => {\n    AdminLogPrinter(adminConsole, `showMyinfo ${JSON.stringify(userInfo)}}`);\n  };\n  const showServerUser = () => {\n    AdminLogPrinter(adminConsole, \"\\nshow server user list\");\n    socket.socket.emit(\"server-user-list\");\n  };\n  const showServerRoom = () => {\n    AdminLogPrinter(adminConsole, \"\\nshow server room list\");\n    socket.socket.emit(\"server-room-list\");\n  };\n  const logOutHandler = () => {\n    LogOut(adminConsole, setRefreshToken, navigate, \"/\");\n    setHasLogin(false);\n    setIsFirstLogin(true);\n  };\n  const quitRoomRelativeModal = () => {\n    setUserInfoModal(false);\n    setInviteModal(false);\n    // setRoomModal(false);\n    // setPwInputModal(false);\n  };\n\n  async function getMyinfoHandler() {\n    const getMeResponse = await GetMyInfo(adminConsole, setUserInfo);\n    if (getMeResponse == 401) {\n      const refreshResponse = await RefreshToken(adminConsole);\n      if (refreshResponse !== 201) {\n        logOutHandler();\n      } else {\n        const getMeResponse = await GetMyInfo(adminConsole, setUserInfo);\n        if (getMeResponse == 401) {\n          logOutHandler();\n        }\n      }\n    }\n  }\n  useEffect(() => {\n    socket.socket.onAny(function (eventName) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      AdminLogPrinter(adminConsole, \"incoming \", eventName, args);\n    });\n    // catch all outgoing events\n    socket.socket.onAnyOutgoing(function (eventName) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n      AdminLogPrinter(adminConsole, \"outgoing \", eventName, args);\n    });\n    socket.socket.on(\"connect\", () => {\n      if (socket.socket.connected) {\n        //This attribute describes whether the socket is currently connected to the server.\n        if (socket.socket.recovered) {\n          // any missed packets will be received\n        } else {\n          // new or unrecoverable session\n          AdminLogPrinter(adminConsole, \"socket connected : \" + socket.socket.id);\n        }\n      }\n      setSocketState(true);\n    });\n    //https://socket.io/docs/v4/client-socket-instance/#disconnect\n    socket.socket.on(\"disconnect\", reason => {\n      AdminLogPrinter(adminConsole, \"socket disconnected reason: \" + reason);\n      /**\n       *  BAD, will throw an error\n       *  socket.emit(\"disconnect\");\n      */\n      if (reason === \"io server disconnect\") {\n        // the disconnection was initiated by the server, you need to reconnect manually\n        AdminLogPrinter(adminConsole, 'socket disconnected by server');\n      }\n      // else the socket will automatically try to reconnect\n      AdminLogPrinter(adminConsole, \"socket disconnected\");\n      setSocketState(false);\n    });\n    // the connection is denied by the server in a middleware function\n    socket.socket.on(\"connect_error\", err => {\n      if (err.message === \"unauthorized\") {\n        // handle each case\n      }\n      AdminLogPrinter(adminConsole, err.message); // prints the message associated with the error\n    });\n\n    socket.socket.on(\"multiple-login\", () => {\n      // \talert(`multiple login detected!`);\n      LogOut(adminConsole, setRefreshToken, navigate, \"/\");\n      setHasLogin(false);\n      setIsFirstLogin(true);\n    });\n    return () => {\n      socket.socket.off(\"connect\");\n      socket.socket.off(\"disconnect\");\n      socket.socket.off(\"connect_error\");\n      socket.socket.offAny();\n      socket.socket.offAnyOutgoing();\n      socket.socket.off(\"multiple-login\");\n    };\n  }, []);\n  useEffect(() => {\n    socket.socket.on(\"logout\", () => {\n      LogOut(adminConsole, setRefreshToken, navigate, \"/\");\n      setHasLogin(false);\n      setIsFirstLogin(true);\n    });\n    return () => {\n      socket.socket.off(\"logout\");\n    };\n  }, []);\n  useEffect(() => {\n    socket.socket.on(\"dm-list\", (resDmUserList, mergeDmList) => {\n      const tempDmRoomList = {};\n      setDmHistoryList({\n        ...resDmUserList\n      });\n      setUserList(prevUserList => ({\n        ...prevUserList,\n        ...resDmUserList\n      }));\n      Object.entries(resDmUserList).forEach(_ref8 => {\n        let [dmUser] = _ref8;\n        tempDmRoomList[Number(dmUser)] = {\n          roomName: 'DM',\n          roomType: 'dm',\n          isJoined: true,\n          detail: {\n            userList: {\n              [Number(dmUser)]: {\n                userRoomPower: 'member',\n                userRoomStatus: 'normal'\n              },\n              [userInfo.uid]: {\n                userRoomPower: 'member',\n                userRoomStatus: 'normal'\n              }\n            },\n            messageList: [],\n            myRoomStatus: 'normal',\n            myRoomPower: 'member'\n          }\n        };\n      });\n      Object.entries(mergeDmList).forEach(atom => {\n        if (Number(atom[1].senderId) === userInfo.uid) {\n          var _tempDmRoomList$Numbe, _atom$, _atom$2, _atom$3, _tempDmRoomList$Numbe2, _atom$4;\n          // from me\n          const tempMessageList = (_tempDmRoomList$Numbe = tempDmRoomList[Number((_atom$ = atom[1]) === null || _atom$ === void 0 ? void 0 : _atom$.receiverId)].detail) === null || _tempDmRoomList$Numbe === void 0 ? void 0 : _tempDmRoomList$Numbe.messageList;\n          tempMessageList === null || tempMessageList === void 0 ? void 0 : tempMessageList.unshift({\n            userId: userInfo.uid,\n            userName: userInfo.nickname,\n            message: (_atom$2 = atom[1]) === null || _atom$2 === void 0 ? void 0 : _atom$2.message,\n            isMe: true,\n            number: tempMessageList.length\n          });\n          tempDmRoomList[Number((_atom$3 = atom[1]) === null || _atom$3 === void 0 ? void 0 : _atom$3.receiverId)] = {\n            roomName: 'DM',\n            roomType: 'dm',\n            isJoined: true,\n            detail: {\n              userList: {\n                ...((_tempDmRoomList$Numbe2 = tempDmRoomList[Number((_atom$4 = atom[1]) === null || _atom$4 === void 0 ? void 0 : _atom$4.receiverId)].detail) === null || _tempDmRoomList$Numbe2 === void 0 ? void 0 : _tempDmRoomList$Numbe2.userList)\n              },\n              myRoomPower: 'member',\n              myRoomStatus: 'normal',\n              messageList: tempMessageList\n            }\n          };\n        } else {\n          var _tempDmRoomList$Numbe3, _tempDmRoomList$Numbe4, _atom$5, _atom$6, _resDmUserList$Number, _atom$7, _atom$8, _atom$9, _tempDmRoomList$Numbe5, _tempDmRoomList$Numbe6, _atom$10;\n          // to me\n          if (atom[1].blockFromReceiver) {\n            return;\n          }\n          const tempMessageList = (_tempDmRoomList$Numbe3 = tempDmRoomList[Number((_atom$5 = atom[1]) === null || _atom$5 === void 0 ? void 0 : _atom$5.senderId)]) === null || _tempDmRoomList$Numbe3 === void 0 ? void 0 : (_tempDmRoomList$Numbe4 = _tempDmRoomList$Numbe3.detail) === null || _tempDmRoomList$Numbe4 === void 0 ? void 0 : _tempDmRoomList$Numbe4.messageList;\n          tempMessageList === null || tempMessageList === void 0 ? void 0 : tempMessageList.unshift({\n            userId: Number((_atom$6 = atom[1]) === null || _atom$6 === void 0 ? void 0 : _atom$6.senderId),\n            userName: (_resDmUserList$Number = resDmUserList[Number((_atom$7 = atom[1]) === null || _atom$7 === void 0 ? void 0 : _atom$7.senderId)]) === null || _resDmUserList$Number === void 0 ? void 0 : _resDmUserList$Number.userDisplayName,\n            message: (_atom$8 = atom[1]) === null || _atom$8 === void 0 ? void 0 : _atom$8.message,\n            isMe: false,\n            number: tempMessageList.length\n          });\n          tempDmRoomList[Number((_atom$9 = atom[1]) === null || _atom$9 === void 0 ? void 0 : _atom$9.senderId)] = {\n            roomName: 'DM',\n            roomType: 'dm',\n            isJoined: true,\n            detail: {\n              userList: {\n                ...((_tempDmRoomList$Numbe5 = tempDmRoomList[Number((_atom$10 = atom[1]) === null || _atom$10 === void 0 ? void 0 : _atom$10.senderId)]) === null || _tempDmRoomList$Numbe5 === void 0 ? void 0 : (_tempDmRoomList$Numbe6 = _tempDmRoomList$Numbe5.detail) === null || _tempDmRoomList$Numbe6 === void 0 ? void 0 : _tempDmRoomList$Numbe6.userList)\n              },\n              myRoomPower: 'member',\n              myRoomStatus: 'normal',\n              messageList: tempMessageList\n            }\n          };\n        }\n      });\n      setRoomList(prevRoomList => ({\n        ...prevRoomList,\n        ...tempDmRoomList\n      }));\n    });\n    return () => {\n      socket.socket.off(\"dm-list\");\n    };\n  }, [userInfo, roomList, dmHistoryList, userList]);\n  useEffect(() => {\n    socket.socket.on(\"room-list\", resRoomList => {\n      setRoomList(prevRoomList => ({\n        ...prevRoomList,\n        ...resRoomList\n      }));\n    });\n    socket.socket.on(\"follow-list\", resFollowingList => {\n      setFollowingList({\n        ...resFollowingList\n      });\n      setUserList(prevUserList => ({\n        ...resFollowingList,\n        ...prevUserList\n      }));\n    });\n    socket.socket.on(\"block-list\", resBlockList => {\n      setBlockList({\n        ...resBlockList\n      });\n    });\n    socket.socket.on(\"user-list\", resUserList => {\n      setUserList(prevUserList => ({\n        ...prevUserList,\n        ...resUserList\n      }));\n    });\n    return () => {\n      socket.socket.off(\"room-list\");\n      socket.socket.off(\"follow-list\");\n      socket.socket.off(\"block-list\");\n      socket.socket.off(\"user-list\");\n    };\n  }, [userList, roomList, followingList, blockList]);\n  useEffect(() => {\n    socket.socket.on(\"room-list-update\", _ref9 => {\n      let {\n        action,\n        roomId,\n        roomName,\n        roomType\n      } = _ref9;\n      switch (action) {\n        case 'new':\n          {\n            const newRoomList = {};\n            newRoomList[roomId] = {\n              roomName,\n              roomType,\n              isJoined: false\n            };\n            AdminLogPrinter(adminConsole, `room-list-update new: ${JSON.stringify(newRoomList)}`);\n            AdminLogPrinter(adminConsole, `room-list-update origin: ${JSON.stringify(roomList)}`);\n            setRoomList({\n              ...roomList,\n              ...newRoomList\n            });\n            break;\n          }\n        case 'delete':\n          {\n            const newRoomList = {\n              ...roomList\n            };\n            delete newRoomList[roomId];\n            setRoomList({\n              ...newRoomList\n            });\n            if (focusRoom == roomId) {\n              setFocusRoom(-1);\n            }\n            break;\n          }\n        case 'edit':\n          {\n            var _roomList$roomId;\n            const newRoomList = {};\n            newRoomList[roomId] = {\n              roomName,\n              roomType,\n              isJoined: (_roomList$roomId = roomList[roomId]) === null || _roomList$roomId === void 0 ? void 0 : _roomList$roomId.isJoined,\n              detail: roomList[roomId].detail || {}\n            };\n            setRoomList({\n              ...roomList,\n              ...newRoomList\n            });\n            break;\n          }\n      }\n    });\n    return () => {\n      socket.socket.off(\"room-list-update\");\n    };\n  }, [roomList, focusRoom]);\n  useEffect(() => {\n    socket.socket.on(\"room-clear\", () => {\n      quitRoomRelativeModal();\n      setRoomList({});\n      setFocusRoom(-1);\n    });\n    socket.socket.on(\"user-clear\", () => {\n      setUserList({});\n    });\n    return () => {\n      socket.socket.off(\"room-clear\");\n      socket.socket.off(\"user-clear\");\n    };\n  }, [roomList, userList, setRoomList, setUserList]);\n  useEffect(() => {\n    socket.socket.on(\"room-join\", _ref10 => {\n      let {\n        roomId,\n        roomName,\n        roomType,\n        roomUserList = {},\n        myPower,\n        status,\n        method = ''\n      } = _ref10;\n      switch (status) {\n        case 'ok':\n          {\n            AdminLogPrinter(adminConsole, `join [${roomName}]room`);\n            const newRoomList = {};\n            newRoomList[roomId] = {\n              roomName,\n              roomType,\n              isJoined: true,\n              detail: {\n                userList: {\n                  ...roomUserList\n                },\n                messageList: [],\n                myRoomStatus: 'normal',\n                myRoomPower: myPower\n              }\n            };\n            AdminLogPrinter(adminConsole, `room - join new: ${JSON.stringify(newRoomList)}`);\n            setRoomList({\n              ...roomList,\n              ...newRoomList\n            });\n            if (method !== 'invite') {\n              setFocusRoom(roomId);\n            }\n            if (roomType === 'dm') {\n              const newDmUser = {};\n              newDmUser[roomId] = {\n                userDisplayName: userList[roomId].userDisplayName,\n                userProfileUrl: userList[roomId].userProfileUrl,\n                userStatus: userList[roomId].userStatus,\n                dmStatus: 'unread'\n              };\n              setDmHistoryList(prevDmHistoryList => ({\n                ...prevDmHistoryList,\n                ...newDmUser\n              }));\n              setUserList(prevUserList => ({\n                ...prevUserList,\n                ...newDmUser\n              }));\n            }\n            break;\n          }\n        case 'ko':\n          {\n            if (roomList[roomId].isJoined === false) {\n              alert(`fail to join[${roomName}]room`);\n            }\n            break;\n          }\n      }\n    });\n    return () => {\n      socket.socket.off(\"room-join\");\n    };\n  }, [roomList, userList, dmHistoryList]);\n  useEffect(() => {\n    socket.socket.on(\"room-in-action\", _ref11 => {\n      var _roomList$roomId2;\n      let {\n        roomId,\n        action,\n        targetId\n      } = _ref11;\n      if (((_roomList$roomId2 = roomList[roomId]) === null || _roomList$roomId2 === void 0 ? void 0 : _roomList$roomId2.isJoined) !== true) {\n        return;\n      }\n      switch (action) {\n        case 'newMember':\n          {\n            if (targetId === userInfo.uid) {\n              return;\n            } else {\n              var _roomList$roomId$deta;\n              const newUser = {};\n              newUser[targetId] = {\n                userRoomStatus: 'normal',\n                userRoomPower: 'member'\n              };\n              const newUserList = {\n                ...((_roomList$roomId$deta = roomList[roomId].detail) === null || _roomList$roomId$deta === void 0 ? void 0 : _roomList$roomId$deta.userList),\n                ...newUser\n              };\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              });\n            }\n            break;\n          }\n        case 'ban':\n        case 'leave':\n        case 'kick':\n          {\n            if (targetId === userInfo.uid) {\n              if (roomList[roomId].roomType === 'private') {\n                const newRoomList = {\n                  ...roomList\n                };\n                delete newRoomList[roomId];\n                setRoomList({\n                  ...newRoomList\n                });\n              } else {\n                const newRoomList = {};\n                newRoomList[roomId] = {\n                  roomName: roomList[roomId].roomName,\n                  roomType: roomList[roomId].roomType,\n                  isJoined: false\n                };\n                setRoomList({\n                  ...roomList,\n                  ...newRoomList\n                });\n              }\n              if (focusRoom === roomId) {\n                setFocusRoom(-1);\n                quitRoomRelativeModal();\n              }\n            } else {\n              var _roomList$roomId$deta2;\n              const newUserList = (_roomList$roomId$deta2 = roomList[roomId].detail) === null || _roomList$roomId$deta2 === void 0 ? void 0 : _roomList$roomId$deta2.userList;\n              delete newUserList[targetId];\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              });\n            }\n            break;\n          }\n        case 'mute':\n        case 'normal':\n          {\n            if (targetId === userInfo.uid) {\n              var _roomList$roomId$deta3, _roomList$roomId$deta4;\n              if (action === 'mute' && ((_roomList$roomId$deta3 = roomList[roomId].detail) === null || _roomList$roomId$deta3 === void 0 ? void 0 : _roomList$roomId$deta3.myRoomStatus) === 'mute') {\n                return;\n              }\n              const newUserList = (_roomList$roomId$deta4 = roomList[roomId].detail) === null || _roomList$roomId$deta4 === void 0 ? void 0 : _roomList$roomId$deta4.userList;\n              newUserList[targetId] = {\n                ...newUserList[targetId],\n                userRoomStatus: action\n              };\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              }, action);\n            } else {\n              var _roomList$roomId$deta5;\n              const newUserList = (_roomList$roomId$deta5 = roomList[roomId].detail) === null || _roomList$roomId$deta5 === void 0 ? void 0 : _roomList$roomId$deta5.userList;\n              newUserList[targetId] = {\n                ...newUserList[targetId],\n                userRoomStatus: action\n              };\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              });\n            }\n            break;\n          }\n        case 'owner':\n        case 'admin':\n          {\n            if (targetId === userInfo.uid) {\n              var _roomList$roomId$deta6;\n              const newUserList = (_roomList$roomId$deta6 = roomList[roomId].detail) === null || _roomList$roomId$deta6 === void 0 ? void 0 : _roomList$roomId$deta6.userList;\n              newUserList[targetId] = {\n                ...newUserList[targetId],\n                userRoomPower: action\n              };\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              }, undefined, action);\n            } else {\n              var _roomList$roomId$deta7;\n              const newUserList = (_roomList$roomId$deta7 = roomList[roomId].detail) === null || _roomList$roomId$deta7 === void 0 ? void 0 : _roomList$roomId$deta7.userList;\n              newUserList[targetId] = {\n                ...newUserList[targetId],\n                userRoomPower: action\n              };\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              });\n            }\n            break;\n          }\n      }\n    });\n    return () => {\n      socket.socket.off(\"room-in-action\");\n    };\n  }, [roomList, userInfo, focusRoom]);\n  useEffect(() => {\n    socket.socket.on(\"user-update\", _ref12 => {\n      let {\n        userId,\n        userDisplayName,\n        userProfileUrl,\n        userStatus\n      } = _ref12;\n      const newUser = {};\n      newUser[userId] = {\n        userDisplayName,\n        userProfileUrl,\n        userStatus\n      };\n      AdminLogPrinter(adminConsole, `user-update: ${userDisplayName}: ${userStatus}`);\n      setUserList(prevUserList => ({\n        ...prevUserList,\n        ...newUser\n      }));\n    });\n    return () => {\n      socket.socket.off(\"user-update\");\n    };\n  }, [userList, isFirstLogin]);\n  useEffect(() => {\n    socket.socket.on(\"message\", _ref13 => {\n      let {\n        roomId,\n        from,\n        message\n      } = _ref13;\n      const block = blockList[from] ? true : false;\n      switch (block) {\n        case true:\n          {\n            AdminLogPrinter(adminConsole, `message from ${from} is blocked`);\n            break;\n          }\n        case false:\n          {\n            var _roomList$roomId$deta8, _roomList$roomId$deta9;\n            AdminLogPrinter(adminConsole, `message from ${from} is received: ${message}`);\n            const newMessageList = (_roomList$roomId$deta8 = roomList[roomId].detail) === null || _roomList$roomId$deta8 === void 0 ? void 0 : _roomList$roomId$deta8.messageList;\n            newMessageList.unshift({\n              userId: from,\n              userName: userList[from].userDisplayName,\n              message,\n              isMe: userInfo.uid === from ? true : false,\n              number: (_roomList$roomId$deta9 = roomList[roomId].detail) === null || _roomList$roomId$deta9 === void 0 ? void 0 : _roomList$roomId$deta9.messageList.length\n            });\n            const newDetail = {\n              ...roomList[roomId].detail,\n              messageList: [...newMessageList]\n            };\n            const newRoomList = {};\n            newRoomList[roomId] = {\n              roomName: roomList[roomId].roomName,\n              roomType: roomList[roomId].roomType,\n              isJoined: roomList[roomId].isJoined,\n              detail: newDetail\n            };\n            if (roomList[roomId].roomType === 'dm' && focusRoom !== roomId) {\n              const newDmUser = {};\n              newDmUser[roomId] = {\n                userDisplayName: userList[roomId].userDisplayName,\n                userProfileUrl: userList[roomId].userProfileUrl,\n                userStatus: userList[roomId].userStatus,\n                dmStatus: 'unread'\n              };\n              setUserList({\n                ...userList,\n                ...newDmUser\n              });\n            }\n            setRoomList({\n              ...roomList,\n              ...newRoomList\n            });\n            break;\n          }\n      }\n    });\n    return () => {\n      socket.socket.off(\"message\");\n    };\n  }, [roomList, blockList, userList, userInfo, focusRoom]);\n  async function firstLogin() {\n    if (isFirstLogin) {\n      await getMyinfoHandler();\n      socket.socket.connect();\n    }\n    setIsFirstLogin(false);\n  }\n  if (isFirstLogin) {\n    firstLogin();\n  }\n  return /*#__PURE__*/_jsxDEV(BackGround, {\n    children: [adminConsole ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: getMyinfoHandler,\n        children: \" /user/me\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showMyinfo,\n        children: \" show /user/me\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 658,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: getRoomList,\n        children: \" roomList\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: getUserList,\n        children: \" userList\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: getDMList,\n        children: \" dmHistoryList\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: getFollowingList,\n        children: \" FollowList\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showServerUser,\n        children: \" show server user\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showServerRoom,\n        children: \" show server room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 664,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showSocketState,\n        children: \" socket state\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 665,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setGameInviteModal(true),\n        children: \" gameinvite\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 8\n    }, this) : '', /*#__PURE__*/_jsxDEV(TopBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 670,\n      columnNumber: 4\n    }, this), userInfoModal ? /*#__PURE__*/_jsxDEV(UserInfoModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 671,\n      columnNumber: 21\n    }, this) : null, roomModal ? /*#__PURE__*/_jsxDEV(RoomModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 672,\n      columnNumber: 17\n    }, this) : null, inviteModal ? /*#__PURE__*/_jsxDEV(RoomInviteModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 19\n    }, this) : null, pwInputModal ? /*#__PURE__*/_jsxDEV(PasswordModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 20\n    }, this) : null, gameInviteModal ? /*#__PURE__*/_jsxDEV(GameInviteModal, {\n      from: \"yuhwang\",\n      AcceptBtn: () => {\n        setGameInviteModal(false);\n      },\n      DeclineBtn: () => {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 5\n    }, this) : null, /*#__PURE__*/_jsxDEV(ChatRoomList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 684,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ChatUserList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 685,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ChatArea, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 686,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ChatRoomUserList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 687,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 653,\n    columnNumber: 3\n  }, this);\n}\n_s(ChatPage, \"vHXaOSaV0ockMi9eq5vQh2GJwRw=\", false, function () {\n  return [useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useNavigate, useAtom, useAtom, useAtom];\n});\n_c = ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["BackGround","TopBar","ChatRoomList","ChatUserList","ChatArea","ChatRoomUserList","useAtom","userInfoModalAtom","passwordInputModalAtom","roomModalAtom","inviteModalAtom","gameInviteModalAtom","UserInfoModal","RoomModal","RoomInviteModal","PasswordModal","refreshTokenAtom","UserAtom","useEffect","socket","chatAtom","GetMyInfo","RefreshToken","LogOut","useNavigate","GameInviteModal","PressKey","AdminLogPrinter","jsxDEV","_jsxDEV","ChatPage","_s","userInfoModal","setUserInfoModal","roomModal","setRoomModal","inviteModal","setInviteModal","pwInputModal","setPwInputModal","userInfo","setUserInfo","isFirstLogin","setIsFirstLogin","isFirstLoginAtom","hasLogin","setHasLogin","hasLoginAtom","roomList","setRoomList","roomListAtom","userList","setUserList","userListAtom","dmHistoryList","setDmHistoryList","dmHistoryListAtom","followingList","setFollowingList","followingListAtom","blockList","setBlockList","blockListAtom","focusRoom","setFocusRoom","focusRoomAtom","socketState","setSocketState","socketStateAtom","navigate","setRefreshToken","gameInviteModal","setGameInviteModal","adminConsole","setAdminConsole","adminConsoleAtom","prev","getRoomList","Object","entries","forEach","_ref","key","value","detail","undefined","roomName","roomType","_ref2","_ref3","JSON","stringify","getUserList","_ref4","userDisplayName","getDMList","_ref5","getFollowingList","_ref6","showSocketState","getBlockList","_ref7","Number","showMyinfo","showServerUser","emit","showServerRoom","logOutHandler","quitRoomRelativeModal","getMyinfoHandler","getMeResponse","refreshResponse","onAny","eventName","_len","arguments","length","args","Array","_key","onAnyOutgoing","_len2","_key2","on","connected","recovered","id","reason","err","message","off","offAny","offAnyOutgoing","resDmUserList","mergeDmList","tempDmRoomList","prevUserList","_ref8","dmUser","isJoined","userRoomPower","userRoomStatus","uid","messageList","myRoomStatus","myRoomPower","atom","senderId","_tempDmRoomList$Numbe","_atom$","_atom$2","_atom$3","_tempDmRoomList$Numbe2","_atom$4","tempMessageList","receiverId","unshift","userId","userName","nickname","isMe","number","_tempDmRoomList$Numbe3","_tempDmRoomList$Numbe4","_atom$5","_atom$6","_resDmUserList$Number","_atom$7","_atom$8","_atom$9","_tempDmRoomList$Numbe5","_tempDmRoomList$Numbe6","_atom$10","blockFromReceiver","prevRoomList","resRoomList","resFollowingList","resBlockList","resUserList","_ref9","action","roomId","newRoomList","_roomList$roomId","_ref10","roomUserList","myPower","status","method","newDmUser","userProfileUrl","userStatus","dmStatus","prevDmHistoryList","alert","_ref11","_roomList$roomId2","targetId","_roomList$roomId$deta","newUser","newUserList","setNewDetailToNewRoom","_roomList$roomId$deta2","_roomList$roomId$deta3","_roomList$roomId$deta4","_roomList$roomId$deta5","_roomList$roomId$deta6","_roomList$roomId$deta7","_ref12","_ref13","from","block","_roomList$roomId$deta8","_roomList$roomId$deta9","newMessageList","newDetail","firstLogin","connect","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","AcceptBtn","DeclineBtn","_c","$RefreshReg$"],"sources":["/data/front/src/pages/ChatPage.tsx"],"sourcesContent":["import BackGround from \"../components/BackGround\";\nimport TopBar from \"../components/TopBar\";\nimport ChatRoomList from \"../components/ChatPage/ChatRoomList\";\nimport ChatUserList from \"../components/ChatPage/ChatUserList\";\nimport ChatArea from \"../components/ChatPage/ChatArea\";\nimport ChatRoomUserList from \"../components/ChatPage/ChatRoomUserList\";\n\nimport { useAtom } from \"jotai\";\nimport {\n\tuserInfoModalAtom,\n\tpasswordInputModalAtom,\n\troomModalAtom,\n\tinviteModalAtom,\n\tgameInviteModalAtom,\n} from \"../components/atom/ModalAtom\";\n\nimport UserInfoModal from \"../components/ChatPage/UserInfoModal\";\nimport RoomModal from \"../components/ChatPage/RoomModal\";\nimport RoomInviteModal from \"../components/ChatPage/RoomInviteModal\";\nimport PasswordModal from \"../components/ChatPage/PasswordModal\";\n\nimport { refreshTokenAtom } from \"../components/atom/LoginAtom\";\nimport { UserAtom, isMyProfileAtom } from \"../components/atom/UserAtom\";\nimport type * as userType from \"../components/atom/UserAtom\";\nimport { useEffect, useState } from \"react\";\n\nimport * as socket from \"../socket/chat.socket\";\nimport * as chatAtom from \"../components/atom/ChatAtom\";\nimport type * as chatType from \"../socket/chat.dto\";\nimport { GetMyInfo, RefreshToken, LogOut } from \"../event/api.request\";\nimport { useNavigate } from \"react-router-dom\";\nimport GameInviteModal from \"../components/GamePage/GameInviteModal\";\n\nimport { PressKey, AdminLogPrinter } from \"../event/event.util\";\n\nexport default function ChatPage() {\n\tconst [userInfoModal, setUserInfoModal] = useAtom(userInfoModalAtom);\n\tconst [roomModal, setRoomModal] = useAtom(roomModalAtom);\n\tconst [inviteModal, setInviteModal] = useAtom(inviteModalAtom);\n\tconst [pwInputModal, setPwInputModal] = useAtom(passwordInputModalAtom);\n\n\tconst [userInfo, setUserInfo] = useAtom(UserAtom);\n\tconst [isFirstLogin, setIsFirstLogin] = useAtom(chatAtom.isFirstLoginAtom);\n\tconst [hasLogin, setHasLogin] = useAtom(chatAtom.hasLoginAtom);\n\n\tconst [roomList, setRoomList] = useAtom(chatAtom.roomListAtom);\n\tconst [userList, setUserList] = useAtom(chatAtom.userListAtom);\n\tconst [dmHistoryList, setDmHistoryList] = useAtom(chatAtom.dmHistoryListAtom);\n\tconst [followingList, setFollowingList] = useAtom(chatAtom.followingListAtom);\n\tconst [blockList, setBlockList] = useAtom(chatAtom.blockListAtom);\n\tconst [focusRoom, setFocusRoom] = useAtom(chatAtom.focusRoomAtom);\n\tconst [socketState, setSocketState] = useAtom(chatAtom.socketStateAtom);\n\n\tconst navigate = useNavigate();\n\tconst [, setRefreshToken] = useAtom(refreshTokenAtom);\n\n\tconst [gameInviteModal, setGameInviteModal] = useAtom(gameInviteModalAtom);\n\tconst [adminConsole, setAdminConsole] = useAtom(chatAtom.adminConsoleAtom);\n\n\tPressKey([\"F4\"], () => {\n\t\tsetAdminConsole((prev) => !prev);\n\t});\n\n\tconst getRoomList = () => {\n\t\tAdminLogPrinter(adminConsole, \"\\n\\ngetRoomList\");\n\t\tObject.entries(roomList).forEach(([key, value]) => {\n\t\t\tif (value.detail !== undefined) {\n\t\t\t\tAdminLogPrinter(adminConsole, `\\n[ ${value.roomName} : ${key}] - ${value.roomType}`);\n\t\t\t\tObject.entries(value.detail).forEach(([key, value]) => {\n\t\t\t\t\tif (key === \"userList\") {\n\t\t\t\t\t\tObject.entries(value).forEach(([key, value]) => {\n\t\t\t\t\t\t\tAdminLogPrinter(adminConsole, `uid: ${key}, value: ${JSON.stringify(value)}`);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tAdminLogPrinter(adminConsole, `key: ${key}, value: ${JSON.stringify(value)}`);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tAdminLogPrinter(adminConsole, `[ ${value.roomName} ] \\nvalue: ${JSON.stringify(value)}`);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst getUserList = () => {\n\t\tAdminLogPrinter(adminConsole, \"\\n\\ngetUserList\");\n\t\tObject.entries(userList).forEach(([key, value]) => {\n\t\t\tAdminLogPrinter(adminConsole, `[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n\t\t});\n\t};\n\n\tconst getDMList = () => {\n\t\tAdminLogPrinter(adminConsole, \"\\n\\ngetDmHitoryList\");\n\t\tObject.entries(dmHistoryList).forEach(([key, value]) => {\n\t\t\tAdminLogPrinter(adminConsole, `[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n\t\t});\n\t};\n\n\tconst getFollowingList = () => {\n\t\tAdminLogPrinter(adminConsole, `\\n\\ngetFollowingList`);\n\t\tObject.entries(followingList).forEach(([key, value]) => {\n\t\t\tAdminLogPrinter(adminConsole, `[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n\t\t});\n\t};\n\n\tconst showSocketState = () => {\n\t\tAdminLogPrinter(adminConsole, `socket state: ${socketState}`);\n\t};\n\n\n\tconst getBlockList = () => {\n\t\tAdminLogPrinter(adminConsole, `\\n\\ngetBlockList`);\n\t\tObject.entries(blockList).forEach(([key, value]) => {\n\t\t\tAdminLogPrinter(adminConsole, `[ ${userList[Number(key)].userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n\t\t});\n\n\t};\n\n\tconst showMyinfo = () => {\n\t\tAdminLogPrinter(adminConsole, `showMyinfo ${JSON.stringify(userInfo)}}`);\n\t};\n\n\tconst showServerUser = () => {\n\t\tAdminLogPrinter(adminConsole, \"\\nshow server user list\");\n\t\tsocket.socket.emit(\"server-user-list\");\n\t};\n\n\tconst showServerRoom = () => {\n\t\tAdminLogPrinter(adminConsole, \"\\nshow server room list\");\n\t\tsocket.socket.emit(\"server-room-list\");\n\t};\n\n\tconst logOutHandler = () => {\n\t\tLogOut(adminConsole, setRefreshToken, navigate, \"/\");\n\t\tsetHasLogin(false);\n\t\tsetIsFirstLogin(true);\n\t};\n\n\tconst quitRoomRelativeModal = () => {\n\t\tsetUserInfoModal(false);\n\t\tsetInviteModal(false);\n\t\t// setRoomModal(false);\n\t\t// setPwInputModal(false);\n\t}\n\n\tasync function getMyinfoHandler() {\n\t\tconst getMeResponse = await GetMyInfo(adminConsole, setUserInfo);\n\t\tif (getMeResponse == 401) {\n\t\t\tconst refreshResponse = await RefreshToken(adminConsole);\n\t\t\tif (refreshResponse !== 201) {\n\t\t\t\tlogOutHandler();\n\t\t\t} else {\n\t\t\t\tconst getMeResponse = await GetMyInfo(adminConsole, setUserInfo);\n\t\t\t\tif (getMeResponse == 401) {\n\t\t\t\t\tlogOutHandler();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tsocket.socket.onAny((eventName, ...args) => {\n\t\t\tAdminLogPrinter(adminConsole, \"incoming \", eventName, args);\n\t\t});\n\t\t// catch all outgoing events\n\t\tsocket.socket.onAnyOutgoing((eventName, ...args) => {\n\t\t\tAdminLogPrinter(adminConsole, \"outgoing \", eventName, args);\n\t\t});\n\t\tsocket.socket.on(\"connect\", () => {\n\t\t\tif (socket.socket.connected) {\n\t\t\t\t//This attribute describes whether the socket is currently connected to the server.\n\t\t\t\tif (socket.socket.recovered) {\n\t\t\t\t\t// any missed packets will be received\n\t\t\t\t} else {\n\t\t\t\t\t// new or unrecoverable session\n\t\t\t\t\tAdminLogPrinter(adminConsole, \"socket connected : \" + socket.socket.id);\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetSocketState(true);\n\t\t});\n\t\t//https://socket.io/docs/v4/client-socket-instance/#disconnect\n\t\tsocket.socket.on(\"disconnect\", (reason) => {\n\t\t\tAdminLogPrinter(adminConsole, \"socket disconnected reason: \" + reason);\n\t\t\t/**\n\t\t\t *  BAD, will throw an error\n\t\t\t *  socket.emit(\"disconnect\");\n\t\t\t*/\n\t\t\tif (reason === \"io server disconnect\") {\n\t\t\t\t// the disconnection was initiated by the server, you need to reconnect manually\n\t\t\t\tAdminLogPrinter(adminConsole, 'socket disconnected by server');\n\t\t\t}\n\t\t\t// else the socket will automatically try to reconnect\n\t\t\tAdminLogPrinter(adminConsole, \"socket disconnected\");\n\t\t\tsetSocketState(false);\n\t\t});\n\t\t// the connection is denied by the server in a middleware function\n\t\tsocket.socket.on(\"connect_error\", (err) => {\n\t\t\tif (err.message === \"unauthorized\") {\n\t\t\t\t// handle each case\n\t\t\t}\n\t\t\tAdminLogPrinter(adminConsole, err.message); // prints the message associated with the error\n\t\t});\n\t\tsocket.socket.on(\"multiple-login\", () => {\n\t\t\t// \talert(`multiple login detected!`);\n\t\t\tLogOut(adminConsole, setRefreshToken, navigate, \"/\");\n\t\t\tsetHasLogin(false);\n\t\t\tsetIsFirstLogin(true);\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"connect\");\n\t\t\tsocket.socket.off(\"disconnect\");\n\t\t\tsocket.socket.off(\"connect_error\");\n\t\t\tsocket.socket.offAny();\n\t\t\tsocket.socket.offAnyOutgoing();\n\t\t\tsocket.socket.off(\"multiple-login\");\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"logout\", () => {\n\t\t\tLogOut(adminConsole, setRefreshToken, navigate, \"/\");\n\t\t\tsetHasLogin(false);\n\t\t\tsetIsFirstLogin(true);\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"logout\");\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"dm-list\", (resDmUserList, mergeDmList) => {\n\t\t\tconst tempDmRoomList: chatType.roomListDto = {};\n\n\t\t\tsetDmHistoryList({ ...resDmUserList });\n\t\t\tsetUserList((prevUserList) => ({ ...prevUserList, ...resDmUserList }));\n\t\t\tObject.entries(resDmUserList).forEach(([dmUser]) => {\n\t\t\t\ttempDmRoomList[Number(dmUser)] = {\n\t\t\t\t\troomName: 'DM',\n\t\t\t\t\troomType: 'dm',\n\t\t\t\t\tisJoined: true,\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tuserList: {\n\t\t\t\t\t\t\t[Number(dmUser)]: {\n\t\t\t\t\t\t\t\tuserRoomPower: 'member',\n\t\t\t\t\t\t\t\tuserRoomStatus: 'normal',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t[userInfo.uid]: {\n\t\t\t\t\t\t\t\tuserRoomPower: 'member',\n\t\t\t\t\t\t\t\tuserRoomStatus: 'normal',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmessageList: [],\n\t\t\t\t\t\tmyRoomStatus: 'normal',\n\t\t\t\t\t\tmyRoomPower: 'member'\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tObject.entries(mergeDmList).forEach((atom: any[]) => {\n\t\t\t\tif (Number(atom[1].senderId!) === userInfo.uid) { // from me\n\t\t\t\t\tconst tempMessageList: chatType.roomMessageDto[] = tempDmRoomList[Number(atom[1]?.receiverId!)].detail?.messageList!;\n\t\t\t\t\ttempMessageList?.unshift({\n\t\t\t\t\t\tuserId: userInfo.uid,\n\t\t\t\t\t\tuserName: userInfo.nickname,\n\t\t\t\t\t\tmessage: atom[1]?.message!,\n\t\t\t\t\t\tisMe: true,\n\t\t\t\t\t\tnumber: tempMessageList.length\n\t\t\t\t\t});\n\t\t\t\t\ttempDmRoomList[Number(atom[1]?.receiverId!)] = {\n\t\t\t\t\t\troomName: 'DM',\n\t\t\t\t\t\troomType: 'dm',\n\t\t\t\t\t\tisJoined: true,\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tuserList: { ...tempDmRoomList[Number(atom[1]?.receiverId!)].detail?.userList },\n\t\t\t\t\t\t\tmyRoomPower: 'member',\n\t\t\t\t\t\t\tmyRoomStatus: 'normal',\n\t\t\t\t\t\t\tmessageList: tempMessageList\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else { // to me\n\t\t\t\t\tif (atom[1].blockFromReceiver) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst tempMessageList: chatType.roomMessageDto[] = tempDmRoomList[Number(atom[1]?.senderId!)]?.detail?.messageList!;\n\t\t\t\t\ttempMessageList?.unshift({\n\t\t\t\t\t\tuserId: Number(atom[1]?.senderId!),\n\t\t\t\t\t\tuserName: resDmUserList[Number(atom[1]?.senderId!)]?.userDisplayName,\n\t\t\t\t\t\tmessage: atom[1]?.message!,\n\t\t\t\t\t\tisMe: false,\n\t\t\t\t\t\tnumber: tempMessageList.length\n\t\t\t\t\t});\n\t\t\t\t\ttempDmRoomList[Number(atom[1]?.senderId!)] = {\n\t\t\t\t\t\troomName: 'DM',\n\t\t\t\t\t\troomType: 'dm',\n\t\t\t\t\t\tisJoined: true,\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tuserList: { ...tempDmRoomList[Number(atom[1]?.senderId!)]?.detail?.userList },\n\t\t\t\t\t\t\tmyRoomPower: 'member',\n\t\t\t\t\t\t\tmyRoomStatus: 'normal',\n\t\t\t\t\t\t\tmessageList: tempMessageList\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetRoomList((prevRoomList) => ({ ...prevRoomList, ...tempDmRoomList }));\n\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"dm-list\");\n\t\t};\n\t}, [userInfo, roomList, dmHistoryList, userList]);\n\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"room-list\", (resRoomList: chatType.roomListDto) => {\n\t\t\tsetRoomList((prevRoomList) => ({ ...prevRoomList, ...resRoomList }));\n\t\t});\n\t\tsocket.socket.on(\"follow-list\", (resFollowingList: chatType.userDto) => {\n\t\t\tsetFollowingList({ ...resFollowingList });\n\t\t\tsetUserList((prevUserList) => ({ ...resFollowingList, ...prevUserList }));\n\t\t});\n\t\tsocket.socket.on(\"block-list\", (resBlockList: chatType.userSimpleDto) => {\n\t\t\tsetBlockList({ ...resBlockList });\n\t\t});\n\t\tsocket.socket.on(\"user-list\", (resUserList: chatType.userDto) => {\n\t\t\tsetUserList((prevUserList) => ({ ...prevUserList, ...resUserList }))\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"room-list\");\n\t\t\tsocket.socket.off(\"follow-list\");\n\t\t\tsocket.socket.off(\"block-list\");\n\t\t\tsocket.socket.off(\"user-list\");\n\t\t}\n\t}, [userList, roomList, followingList, blockList]);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"room-list-update\", ({\n\t\t\taction,\n\t\t\troomId,\n\t\t\troomName,\n\t\t\troomType,\n\t\t}: {\n\t\t\taction: 'new' | 'delete' | 'edit';\n\t\t\troomId: number;\n\t\t\troomName: string;\n\t\t\troomType: 'open' | 'protected' | 'private';\n\t\t}) => {\n\t\t\tswitch (action) {\n\t\t\t\tcase 'new': {\n\t\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\t\troomName,\n\t\t\t\t\t\troomType,\n\t\t\t\t\t\tisJoined: false,\n\t\t\t\t\t};\n\t\t\t\t\tAdminLogPrinter(adminConsole, `room-list-update new: ${JSON.stringify(newRoomList)}`);\n\t\t\t\t\tAdminLogPrinter(adminConsole, `room-list-update origin: ${JSON.stringify(roomList)}`);\n\t\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'delete': {\n\t\t\t\t\tconst newRoomList: chatType.roomListDto = { ...roomList };\n\t\t\t\t\tdelete newRoomList[roomId];\n\t\t\t\t\tsetRoomList({ ...newRoomList });\n\t\t\t\t\tif (focusRoom == roomId) {\n\t\t\t\t\t\tsetFocusRoom(-1);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'edit': {\n\t\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\t\troomName,\n\t\t\t\t\t\troomType,\n\t\t\t\t\t\tisJoined: roomList[roomId]?.isJoined,\n\t\t\t\t\t\tdetail: roomList[roomId].detail || {} as chatType.roomDetailDto,\n\t\t\t\t\t};\n\t\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"room-list-update\");\n\t\t};\n\t}, [roomList, focusRoom]);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"room-clear\", () => {\n\t\t\tquitRoomRelativeModal();\n\t\t\tsetRoomList({});\n\t\t\tsetFocusRoom(-1);\n\t\t});\n\t\tsocket.socket.on(\"user-clear\", () => {\n\t\t\tsetUserList({});\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"room-clear\");\n\t\t\tsocket.socket.off(\"user-clear\");\n\t\t};\n\t}, [roomList, userList, setRoomList, setUserList]);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"room-join\", ({\n\t\t\troomId,\n\t\t\troomName,\n\t\t\troomType,\n\t\t\troomUserList = {},\n\t\t\tmyPower,\n\t\t\tstatus,\n\t\t\tmethod = ''\n\t\t}: {\n\t\t\troomId: number,\n\t\t\troomName: string,\n\t\t\troomType: 'open' | 'protected' | 'private' | 'dm',\n\t\t\troomUserList: chatType.userInRoomListDto,\n\t\t\tmyPower: chatType.userRoomPower,\n\t\t\tstatus: 'ok' | 'ko',\n\t\t\tmethod?: 'invite' | ''\n\t\t}) => {\n\t\t\tswitch (status) {\n\t\t\t\tcase 'ok': {\n\t\t\t\t\tAdminLogPrinter(adminConsole, `join [${roomName}]room`);\n\t\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\t\troomName,\n\t\t\t\t\t\troomType,\n\t\t\t\t\t\tisJoined: true,\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tuserList: { ...roomUserList },\n\t\t\t\t\t\t\tmessageList: [],\n\t\t\t\t\t\t\tmyRoomStatus: 'normal',\n\t\t\t\t\t\t\tmyRoomPower: myPower\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tAdminLogPrinter(adminConsole, `room - join new: ${JSON.stringify(newRoomList)}`);\n\t\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t\t\tif (method !== 'invite') {\n\t\t\t\t\t\tsetFocusRoom(roomId);\n\t\t\t\t\t}\n\t\t\t\t\tif (roomType === 'dm') {\n\t\t\t\t\t\tconst newDmUser: chatType.userDto = {};\n\t\t\t\t\t\tnewDmUser[roomId] = {\n\t\t\t\t\t\t\tuserDisplayName: userList[roomId].userDisplayName,\n\t\t\t\t\t\t\tuserProfileUrl: userList[roomId].userProfileUrl,\n\t\t\t\t\t\t\tuserStatus: userList[roomId].userStatus,\n\t\t\t\t\t\t\tdmStatus: 'unread',\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsetDmHistoryList((prevDmHistoryList) => ({ ...prevDmHistoryList, ...newDmUser }));\n\t\t\t\t\t\tsetUserList((prevUserList) => ({ ...prevUserList, ...newDmUser }));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'ko': {\n\t\t\t\t\tif (roomList[roomId].isJoined === false) {\n\t\t\t\t\t\talert(`fail to join[${roomName}]room`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"room-join\");\n\t\t};\n\t}, [roomList, userList, dmHistoryList]);\n\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"room-in-action\", ({\n\t\t\troomId,\n\t\t\taction,\n\t\t\ttargetId\n\t\t}: {\n\t\t\troomId: number;\n\t\t\taction: 'ban' | 'kick' | 'mute' | 'admin' | 'normal' | 'owner' | 'leave' | 'newMember';\n\t\t\ttargetId: number\n\t\t}) => {\n\t\t\tif (roomList[roomId]?.isJoined !== true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tswitch (action) {\n\t\t\t\tcase 'newMember': {\n\t\t\t\t\tif (targetId === userInfo.uid) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newUser: chatType.userInRoomListDto = {};\n\t\t\t\t\t\tnewUser[targetId] = {\n\t\t\t\t\t\t\tuserRoomStatus: 'normal',\n\t\t\t\t\t\t\tuserRoomPower: 'member'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = { ...roomList[roomId].detail?.userList!, ...newUser };\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList })\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'ban':\n\t\t\t\tcase 'leave':\n\t\t\t\tcase 'kick': {\n\t\t\t\t\tif (targetId === userInfo.uid) {\n\t\t\t\t\t\tif (roomList[roomId].roomType === 'private') {\n\t\t\t\t\t\t\tconst newRoomList: chatType.roomListDto = { ...roomList };\n\t\t\t\t\t\t\tdelete newRoomList[roomId];\n\t\t\t\t\t\t\tsetRoomList({ ...newRoomList });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\t\t\t\troomName: roomList[roomId].roomName,\n\t\t\t\t\t\t\t\troomType: roomList[roomId].roomType,\n\t\t\t\t\t\t\t\tisJoined: false,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (focusRoom === roomId) {\n\t\t\t\t\t\t\tsetFocusRoom(-1);\n\t\t\t\t\t\t\tquitRoomRelativeModal();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = roomList[roomId].detail?.userList!;\n\t\t\t\t\t\tdelete newUserList[targetId];\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList });\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'mute':\n\t\t\t\tcase 'normal': {\n\t\t\t\t\tif (targetId === userInfo.uid) {\n\t\t\t\t\t\tif (action === 'mute' && roomList[roomId].detail?.myRoomStatus === 'mute') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = roomList[roomId].detail?.userList!;\n\t\t\t\t\t\tnewUserList[targetId] = { ...newUserList[targetId], userRoomStatus: action };\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList }, action);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = roomList[roomId].detail?.userList!;\n\t\t\t\t\t\tnewUserList[targetId] = { ...newUserList[targetId], userRoomStatus: action };\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList });\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'owner':\n\t\t\t\tcase 'admin': {\n\t\t\t\t\tif (targetId === userInfo.uid) {\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = roomList[roomId].detail?.userList!;\n\t\t\t\t\t\tnewUserList[targetId] = { ...newUserList[targetId], userRoomPower: action };\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList }, undefined, action);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = roomList[roomId].detail?.userList!;\n\t\t\t\t\t\tnewUserList[targetId] = { ...newUserList[targetId], userRoomPower: action };\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList });\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"room-in-action\");\n\t\t}\n\t}, [roomList, userInfo, focusRoom]);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"user-update\", ({\n\t\t\tuserId,\n\t\t\tuserDisplayName,\n\t\t\tuserProfileUrl,\n\t\t\tuserStatus\n\t\t}: {\n\t\t\tuserId: number,\n\t\t\tuserDisplayName: string\n\t\t\tuserProfileUrl: string;\n\t\t\tuserStatus: 'online' | 'offline' | 'inGame';\n\t\t}) => {\n\t\t\tconst newUser: chatType.userDto = {};\n\t\t\tnewUser[userId] = {\n\t\t\t\tuserDisplayName,\n\t\t\t\tuserProfileUrl,\n\t\t\t\tuserStatus,\n\t\t\t};\n\t\t\tAdminLogPrinter(adminConsole, `user-update: ${userDisplayName}: ${userStatus}`);\n\t\t\tsetUserList((prevUserList) => ({ ...prevUserList, ...newUser }));\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"user-update\");\n\t\t}\n\t}, [userList, isFirstLogin]);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"message\", ({\n\t\t\troomId,\n\t\t\tfrom,\n\t\t\tmessage\n\t\t}: {\n\t\t\troomId: number,\n\t\t\tfrom: number,\n\t\t\tmessage: string\n\t\t}) => {\n\t\t\tconst block = blockList[from] ? true : false;\n\t\t\tswitch (block) {\n\t\t\t\tcase true: {\n\t\t\t\t\tAdminLogPrinter(adminConsole, `message from ${from} is blocked`);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase false: {\n\t\t\t\t\tAdminLogPrinter(adminConsole, `message from ${from} is received: ${message}`);\n\t\t\t\t\tconst newMessageList: chatType.roomMessageDto[] = roomList[roomId].detail?.messageList!;\n\t\t\t\t\tnewMessageList.unshift({\n\t\t\t\t\t\tuserId: from,\n\t\t\t\t\t\tuserName: userList[from].userDisplayName,\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tisMe: userInfo.uid === from ? true : false,\n\t\t\t\t\t\tnumber: roomList[roomId].detail?.messageList.length!\n\t\t\t\t\t});\n\t\t\t\t\tconst newDetail: Partial<chatType.roomDetailDto> = { ...roomList[roomId].detail, messageList: [...newMessageList] };\n\t\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\t\troomName: roomList[roomId].roomName,\n\t\t\t\t\t\troomType: roomList[roomId].roomType,\n\t\t\t\t\t\tisJoined: roomList[roomId].isJoined,\n\t\t\t\t\t\tdetail: newDetail as chatType.roomDetailDto\n\t\t\t\t\t};\n\t\t\t\t\tif (roomList[roomId].roomType === 'dm' && focusRoom !== roomId) {\n\t\t\t\t\t\tconst newDmUser: chatType.userDto = {};\n\t\t\t\t\t\tnewDmUser[roomId] = {\n\t\t\t\t\t\t\tuserDisplayName: userList[roomId].userDisplayName,\n\t\t\t\t\t\t\tuserProfileUrl: userList[roomId].userProfileUrl,\n\t\t\t\t\t\t\tuserStatus: userList[roomId].userStatus,\n\t\t\t\t\t\t\tdmStatus: 'unread',\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsetUserList({ ...userList, ...newDmUser });\n\t\t\t\t\t}\n\t\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"message\");\n\t\t};\n\t}, [roomList, blockList, userList, userInfo, focusRoom]);\n\n\tasync function firstLogin() {\n\t\tif (isFirstLogin) {\n\t\t\tawait getMyinfoHandler();\n\t\t\tsocket.socket.connect();\n\t\t}\n\t\tsetIsFirstLogin(false);\n\t}\n\n\tif (isFirstLogin) {\n\t\tfirstLogin();\n\t}\n\n\n\treturn (\n\t\t<BackGround>\n\t\t\t{\n\t\t\t\tadminConsole\n\t\t\t\t\t? <div>\n\t\t\t\t\t\t<button onClick={getMyinfoHandler}> /user/me</button>\n\t\t\t\t\t\t<button onClick={showMyinfo}> show /user/me</button>\n\t\t\t\t\t\t<button onClick={getRoomList}> roomList</button>\n\t\t\t\t\t\t<button onClick={getUserList}> userList</button>\n\t\t\t\t\t\t<button onClick={getDMList}> dmHistoryList</button>\n\t\t\t\t\t\t<button onClick={getFollowingList}> FollowList</button>\n\t\t\t\t\t\t<button onClick={showServerUser}> show server user</button>\n\t\t\t\t\t\t<button onClick={showServerRoom}> show server room</button>\n\t\t\t\t\t\t<button onClick={showSocketState}> socket state</button>\n\t\t\t\t\t\t<button onClick={() => setGameInviteModal(true)}> gameinvite</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t: ''\n\t\t\t}\n\t\t\t<TopBar />\n\t\t\t{userInfoModal ? <UserInfoModal /> : null}\n\t\t\t{roomModal ? <RoomModal /> : null}\n\t\t\t{inviteModal ? <RoomInviteModal /> : null}\n\t\t\t{pwInputModal ? <PasswordModal /> : null}\n\t\t\t{gameInviteModal ? (\n\t\t\t\t<GameInviteModal\n\t\t\t\t\tfrom=\"yuhwang\"\n\t\t\t\t\tAcceptBtn={() => {\n\t\t\t\t\t\tsetGameInviteModal(false);\n\t\t\t\t\t}}\n\t\t\t\t\tDeclineBtn={() => { }}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t\t<ChatRoomList />\n\t\t\t<ChatUserList />\n\t\t\t<ChatArea />\n\t\t\t<ChatRoomUserList />\n\t\t</BackGround>\n\t);\n}\n"],"mappings":";;AAAA,OAAOA,UAAU,MAAM,0BAA0B;AACjD,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,YAAY,MAAM,qCAAqC;AAC9D,OAAOC,YAAY,MAAM,qCAAqC;AAC9D,OAAOC,QAAQ,MAAM,iCAAiC;AACtD,OAAOC,gBAAgB,MAAM,yCAAyC;AAEtE,SAASC,OAAO,QAAQ,OAAO;AAC/B,SACCC,iBAAiB,EACjBC,sBAAsB,EACtBC,aAAa,EACbC,eAAe,EACfC,mBAAmB,QACb,8BAA8B;AAErC,OAAOC,aAAa,MAAM,sCAAsC;AAChE,OAAOC,SAAS,MAAM,kCAAkC;AACxD,OAAOC,eAAe,MAAM,wCAAwC;AACpE,OAAOC,aAAa,MAAM,sCAAsC;AAEhE,SAASC,gBAAgB,QAAQ,8BAA8B;AAC/D,SAASC,QAAQ,QAAyB,6BAA6B;AAEvE,SAASC,SAAS,QAAkB,OAAO;AAE3C,OAAO,KAAKC,MAAM,MAAM,uBAAuB;AAC/C,OAAO,KAAKC,QAAQ,MAAM,6BAA6B;AAEvD,SAASC,SAAS,EAAEC,YAAY,EAAEC,MAAM,QAAQ,sBAAsB;AACtE,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,eAAe,MAAM,wCAAwC;AAEpE,SAASC,QAAQ,EAAEC,eAAe,QAAQ,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhE,eAAe,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClC,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAG3B,OAAO,CAACC,iBAAiB,CAAC;EACpE,MAAM,CAAC2B,SAAS,EAAEC,YAAY,CAAC,GAAG7B,OAAO,CAACG,aAAa,CAAC;EACxD,MAAM,CAAC2B,WAAW,EAAEC,cAAc,CAAC,GAAG/B,OAAO,CAACI,eAAe,CAAC;EAC9D,MAAM,CAAC4B,YAAY,EAAEC,eAAe,CAAC,GAAGjC,OAAO,CAACE,sBAAsB,CAAC;EAEvE,MAAM,CAACgC,QAAQ,EAAEC,WAAW,CAAC,GAAGnC,OAAO,CAACW,QAAQ,CAAC;EACjD,MAAM,CAACyB,YAAY,EAAEC,eAAe,CAAC,GAAGrC,OAAO,CAACc,QAAQ,CAACwB,gBAAgB,CAAC;EAC1E,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGxC,OAAO,CAACc,QAAQ,CAAC2B,YAAY,CAAC;EAE9D,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG3C,OAAO,CAACc,QAAQ,CAAC8B,YAAY,CAAC;EAC9D,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG9C,OAAO,CAACc,QAAQ,CAACiC,YAAY,CAAC;EAC9D,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGjD,OAAO,CAACc,QAAQ,CAACoC,iBAAiB,CAAC;EAC7E,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGpD,OAAO,CAACc,QAAQ,CAACuC,iBAAiB,CAAC;EAC7E,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGvD,OAAO,CAACc,QAAQ,CAAC0C,aAAa,CAAC;EACjE,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG1D,OAAO,CAACc,QAAQ,CAAC6C,aAAa,CAAC;EACjE,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAG7D,OAAO,CAACc,QAAQ,CAACgD,eAAe,CAAC;EAEvE,MAAMC,QAAQ,GAAG7C,WAAW,CAAC,CAAC;EAC9B,MAAM,GAAG8C,eAAe,CAAC,GAAGhE,OAAO,CAACU,gBAAgB,CAAC;EAErD,MAAM,CAACuD,eAAe,EAAEC,kBAAkB,CAAC,GAAGlE,OAAO,CAACK,mBAAmB,CAAC;EAC1E,MAAM,CAAC8D,YAAY,EAAEC,eAAe,CAAC,GAAGpE,OAAO,CAACc,QAAQ,CAACuD,gBAAgB,CAAC;EAE1EjD,QAAQ,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM;IACtBgD,eAAe,CAAEE,IAAI,IAAK,CAACA,IAAI,CAAC;EACjC,CAAC,CAAC;EAEF,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACzBlD,eAAe,CAAC8C,YAAY,EAAE,iBAAiB,CAAC;IAChDK,MAAM,CAACC,OAAO,CAAC/B,QAAQ,CAAC,CAACgC,OAAO,CAACC,IAAA,IAAkB;MAAA,IAAjB,CAACC,GAAG,EAAEC,KAAK,CAAC,GAAAF,IAAA;MAC7C,IAAIE,KAAK,CAACC,MAAM,KAAKC,SAAS,EAAE;QAC/B1D,eAAe,CAAC8C,YAAY,EAAG,OAAMU,KAAK,CAACG,QAAS,MAAKJ,GAAI,OAAMC,KAAK,CAACI,QAAS,EAAC,CAAC;QACpFT,MAAM,CAACC,OAAO,CAACI,KAAK,CAACC,MAAM,CAAC,CAACJ,OAAO,CAACQ,KAAA,IAAkB;UAAA,IAAjB,CAACN,GAAG,EAAEC,KAAK,CAAC,GAAAK,KAAA;UACjD,IAAIN,GAAG,KAAK,UAAU,EAAE;YACvBJ,MAAM,CAACC,OAAO,CAACI,KAAK,CAAC,CAACH,OAAO,CAACS,KAAA,IAAkB;cAAA,IAAjB,CAACP,GAAG,EAAEC,KAAK,CAAC,GAAAM,KAAA;cAC1C9D,eAAe,CAAC8C,YAAY,EAAG,QAAOS,GAAI,YAAWQ,IAAI,CAACC,SAAS,CAACR,KAAK,CAAE,EAAC,CAAC;YAC9E,CAAC,CAAC;UACH,CAAC,MAAM;YACNxD,eAAe,CAAC8C,YAAY,EAAG,QAAOS,GAAI,YAAWQ,IAAI,CAACC,SAAS,CAACR,KAAK,CAAE,EAAC,CAAC;UAC9E;QACD,CAAC,CAAC;MACH,CAAC,MAAM;QACNxD,eAAe,CAAC8C,YAAY,EAAG,KAAIU,KAAK,CAACG,QAAS,eAAcI,IAAI,CAACC,SAAS,CAACR,KAAK,CAAE,EAAC,CAAC;MACzF;IACD,CAAC,CAAC;EACH,CAAC;EAED,MAAMS,WAAW,GAAGA,CAAA,KAAM;IACzBjE,eAAe,CAAC8C,YAAY,EAAE,iBAAiB,CAAC;IAChDK,MAAM,CAACC,OAAO,CAAC5B,QAAQ,CAAC,CAAC6B,OAAO,CAACa,KAAA,IAAkB;MAAA,IAAjB,CAACX,GAAG,EAAEC,KAAK,CAAC,GAAAU,KAAA;MAC7ClE,eAAe,CAAC8C,YAAY,EAAG,KAAIU,KAAK,CAACW,eAAgB,YAAWZ,GAAI,YAAWQ,IAAI,CAACC,SAAS,CAACR,KAAK,CAAE,EAAC,CAAC;IAC5G,CAAC,CAAC;EACH,CAAC;EAED,MAAMY,SAAS,GAAGA,CAAA,KAAM;IACvBpE,eAAe,CAAC8C,YAAY,EAAE,qBAAqB,CAAC;IACpDK,MAAM,CAACC,OAAO,CAACzB,aAAa,CAAC,CAAC0B,OAAO,CAACgB,KAAA,IAAkB;MAAA,IAAjB,CAACd,GAAG,EAAEC,KAAK,CAAC,GAAAa,KAAA;MAClDrE,eAAe,CAAC8C,YAAY,EAAG,KAAIU,KAAK,CAACW,eAAgB,YAAWZ,GAAI,YAAWQ,IAAI,CAACC,SAAS,CAACR,KAAK,CAAE,EAAC,CAAC;IAC5G,CAAC,CAAC;EACH,CAAC;EAED,MAAMc,gBAAgB,GAAGA,CAAA,KAAM;IAC9BtE,eAAe,CAAC8C,YAAY,EAAG,sBAAqB,CAAC;IACrDK,MAAM,CAACC,OAAO,CAACtB,aAAa,CAAC,CAACuB,OAAO,CAACkB,KAAA,IAAkB;MAAA,IAAjB,CAAChB,GAAG,EAAEC,KAAK,CAAC,GAAAe,KAAA;MAClDvE,eAAe,CAAC8C,YAAY,EAAG,KAAIU,KAAK,CAACW,eAAgB,YAAWZ,GAAI,YAAWQ,IAAI,CAACC,SAAS,CAACR,KAAK,CAAE,EAAC,CAAC;IAC5G,CAAC,CAAC;EACH,CAAC;EAED,MAAMgB,eAAe,GAAGA,CAAA,KAAM;IAC7BxE,eAAe,CAAC8C,YAAY,EAAG,iBAAgBP,WAAY,EAAC,CAAC;EAC9D,CAAC;EAGD,MAAMkC,YAAY,GAAGA,CAAA,KAAM;IAC1BzE,eAAe,CAAC8C,YAAY,EAAG,kBAAiB,CAAC;IACjDK,MAAM,CAACC,OAAO,CAACnB,SAAS,CAAC,CAACoB,OAAO,CAACqB,KAAA,IAAkB;MAAA,IAAjB,CAACnB,GAAG,EAAEC,KAAK,CAAC,GAAAkB,KAAA;MAC9C1E,eAAe,CAAC8C,YAAY,EAAG,KAAItB,QAAQ,CAACmD,MAAM,CAACpB,GAAG,CAAC,CAAC,CAACY,eAAgB,YAAWZ,GAAI,YAAWQ,IAAI,CAACC,SAAS,CAACR,KAAK,CAAE,EAAC,CAAC;IAC5H,CAAC,CAAC;EAEH,CAAC;EAED,MAAMoB,UAAU,GAAGA,CAAA,KAAM;IACxB5E,eAAe,CAAC8C,YAAY,EAAG,cAAaiB,IAAI,CAACC,SAAS,CAACnD,QAAQ,CAAE,GAAE,CAAC;EACzE,CAAC;EAED,MAAMgE,cAAc,GAAGA,CAAA,KAAM;IAC5B7E,eAAe,CAAC8C,YAAY,EAAE,yBAAyB,CAAC;IACxDtD,MAAM,CAACA,MAAM,CAACsF,IAAI,CAAC,kBAAkB,CAAC;EACvC,CAAC;EAED,MAAMC,cAAc,GAAGA,CAAA,KAAM;IAC5B/E,eAAe,CAAC8C,YAAY,EAAE,yBAAyB,CAAC;IACxDtD,MAAM,CAACA,MAAM,CAACsF,IAAI,CAAC,kBAAkB,CAAC;EACvC,CAAC;EAED,MAAME,aAAa,GAAGA,CAAA,KAAM;IAC3BpF,MAAM,CAACkD,YAAY,EAAEH,eAAe,EAAED,QAAQ,EAAE,GAAG,CAAC;IACpDvB,WAAW,CAAC,KAAK,CAAC;IAClBH,eAAe,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAMiE,qBAAqB,GAAGA,CAAA,KAAM;IACnC3E,gBAAgB,CAAC,KAAK,CAAC;IACvBI,cAAc,CAAC,KAAK,CAAC;IACrB;IACA;EACD,CAAC;;EAED,eAAewE,gBAAgBA,CAAA,EAAG;IACjC,MAAMC,aAAa,GAAG,MAAMzF,SAAS,CAACoD,YAAY,EAAEhC,WAAW,CAAC;IAChE,IAAIqE,aAAa,IAAI,GAAG,EAAE;MACzB,MAAMC,eAAe,GAAG,MAAMzF,YAAY,CAACmD,YAAY,CAAC;MACxD,IAAIsC,eAAe,KAAK,GAAG,EAAE;QAC5BJ,aAAa,CAAC,CAAC;MAChB,CAAC,MAAM;QACN,MAAMG,aAAa,GAAG,MAAMzF,SAAS,CAACoD,YAAY,EAAEhC,WAAW,CAAC;QAChE,IAAIqE,aAAa,IAAI,GAAG,EAAE;UACzBH,aAAa,CAAC,CAAC;QAChB;MACD;IACD;EACD;EAEAzF,SAAS,CAAC,MAAM;IACfC,MAAM,CAACA,MAAM,CAAC6F,KAAK,CAAC,UAACC,SAAS,EAAc;MAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAATC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,OAAAA,IAAA,WAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;QAAJF,IAAI,CAAAE,IAAA,QAAAJ,SAAA,CAAAI,IAAA;MAAA;MACtC5F,eAAe,CAAC8C,YAAY,EAAE,WAAW,EAAEwC,SAAS,EAAEI,IAAI,CAAC;IAC5D,CAAC,CAAC;IACF;IACAlG,MAAM,CAACA,MAAM,CAACqG,aAAa,CAAC,UAACP,SAAS,EAAc;MAAA,SAAAQ,KAAA,GAAAN,SAAA,CAAAC,MAAA,EAATC,IAAI,OAAAC,KAAA,CAAAG,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;QAAJL,IAAI,CAAAK,KAAA,QAAAP,SAAA,CAAAO,KAAA;MAAA;MAC9C/F,eAAe,CAAC8C,YAAY,EAAE,WAAW,EAAEwC,SAAS,EAAEI,IAAI,CAAC;IAC5D,CAAC,CAAC;IACFlG,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,SAAS,EAAE,MAAM;MACjC,IAAIxG,MAAM,CAACA,MAAM,CAACyG,SAAS,EAAE;QAC5B;QACA,IAAIzG,MAAM,CAACA,MAAM,CAAC0G,SAAS,EAAE;UAC5B;QAAA,CACA,MAAM;UACN;UACAlG,eAAe,CAAC8C,YAAY,EAAE,qBAAqB,GAAGtD,MAAM,CAACA,MAAM,CAAC2G,EAAE,CAAC;QACxE;MACD;MACA3D,cAAc,CAAC,IAAI,CAAC;IACrB,CAAC,CAAC;IACF;IACAhD,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,YAAY,EAAGI,MAAM,IAAK;MAC1CpG,eAAe,CAAC8C,YAAY,EAAE,8BAA8B,GAAGsD,MAAM,CAAC;MACtE;AACH;AACA;AACA;MACG,IAAIA,MAAM,KAAK,sBAAsB,EAAE;QACtC;QACApG,eAAe,CAAC8C,YAAY,EAAE,+BAA+B,CAAC;MAC/D;MACA;MACA9C,eAAe,CAAC8C,YAAY,EAAE,qBAAqB,CAAC;MACpDN,cAAc,CAAC,KAAK,CAAC;IACtB,CAAC,CAAC;IACF;IACAhD,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,eAAe,EAAGK,GAAG,IAAK;MAC1C,IAAIA,GAAG,CAACC,OAAO,KAAK,cAAc,EAAE;QACnC;MAAA;MAEDtG,eAAe,CAAC8C,YAAY,EAAEuD,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC;IAC7C,CAAC,CAAC;;IACF9G,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,gBAAgB,EAAE,MAAM;MACxC;MACApG,MAAM,CAACkD,YAAY,EAAEH,eAAe,EAAED,QAAQ,EAAE,GAAG,CAAC;MACpDvB,WAAW,CAAC,KAAK,CAAC;MAClBH,eAAe,CAAC,IAAI,CAAC;IACtB,CAAC,CAAC;IACF,OAAO,MAAM;MACZxB,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,SAAS,CAAC;MAC5B/G,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,YAAY,CAAC;MAC/B/G,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,eAAe,CAAC;MAClC/G,MAAM,CAACA,MAAM,CAACgH,MAAM,CAAC,CAAC;MACtBhH,MAAM,CAACA,MAAM,CAACiH,cAAc,CAAC,CAAC;MAC9BjH,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,gBAAgB,CAAC;IACpC,CAAC;EACF,CAAC,EAAE,EAAE,CAAC;EAENhH,SAAS,CAAC,MAAM;IACfC,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,QAAQ,EAAE,MAAM;MAChCpG,MAAM,CAACkD,YAAY,EAAEH,eAAe,EAAED,QAAQ,EAAE,GAAG,CAAC;MACpDvB,WAAW,CAAC,KAAK,CAAC;MAClBH,eAAe,CAAC,IAAI,CAAC;IACtB,CAAC,CAAC;IACF,OAAO,MAAM;MACZxB,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,QAAQ,CAAC;IAC5B,CAAC;EACF,CAAC,EAAE,EAAE,CAAC;EAENhH,SAAS,CAAC,MAAM;IACfC,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,SAAS,EAAE,CAACU,aAAa,EAAEC,WAAW,KAAK;MAC3D,MAAMC,cAAoC,GAAG,CAAC,CAAC;MAE/ChF,gBAAgB,CAAC;QAAE,GAAG8E;MAAc,CAAC,CAAC;MACtCjF,WAAW,CAAEoF,YAAY,KAAM;QAAE,GAAGA,YAAY;QAAE,GAAGH;MAAc,CAAC,CAAC,CAAC;MACtEvD,MAAM,CAACC,OAAO,CAACsD,aAAa,CAAC,CAACrD,OAAO,CAACyD,KAAA,IAAc;QAAA,IAAb,CAACC,MAAM,CAAC,GAAAD,KAAA;QAC9CF,cAAc,CAACjC,MAAM,CAACoC,MAAM,CAAC,CAAC,GAAG;UAChCpD,QAAQ,EAAE,IAAI;UACdC,QAAQ,EAAE,IAAI;UACdoD,QAAQ,EAAE,IAAI;UACdvD,MAAM,EAAE;YACPjC,QAAQ,EAAE;cACT,CAACmD,MAAM,CAACoC,MAAM,CAAC,GAAG;gBACjBE,aAAa,EAAE,QAAQ;gBACvBC,cAAc,EAAE;cACjB,CAAC;cACD,CAACrG,QAAQ,CAACsG,GAAG,GAAG;gBACfF,aAAa,EAAE,QAAQ;gBACvBC,cAAc,EAAE;cACjB;YACD,CAAC;YACDE,WAAW,EAAE,EAAE;YACfC,YAAY,EAAE,QAAQ;YACtBC,WAAW,EAAE;UACd;QACD,CAAC;MACF,CAAC,CAAC;MAEFnE,MAAM,CAACC,OAAO,CAACuD,WAAW,CAAC,CAACtD,OAAO,CAAEkE,IAAW,IAAK;QACpD,IAAI5C,MAAM,CAAC4C,IAAI,CAAC,CAAC,CAAC,CAACC,QAAS,CAAC,KAAK3G,QAAQ,CAACsG,GAAG,EAAE;UAAA,IAAAM,qBAAA,EAAAC,MAAA,EAAAC,OAAA,EAAAC,OAAA,EAAAC,sBAAA,EAAAC,OAAA;UAAE;UACjD,MAAMC,eAA0C,IAAAN,qBAAA,GAAGb,cAAc,CAACjC,MAAM,EAAA+C,MAAA,GAACH,IAAI,CAAC,CAAC,CAAC,cAAAG,MAAA,uBAAPA,MAAA,CAASM,UAAW,CAAC,CAAC,CAACvE,MAAM,cAAAgE,qBAAA,uBAAnDA,qBAAA,CAAqDL,WAAY;UACpHW,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEE,OAAO,CAAC;YACxBC,MAAM,EAAErH,QAAQ,CAACsG,GAAG;YACpBgB,QAAQ,EAAEtH,QAAQ,CAACuH,QAAQ;YAC3B9B,OAAO,GAAAqB,OAAA,GAAEJ,IAAI,CAAC,CAAC,CAAC,cAAAI,OAAA,uBAAPA,OAAA,CAASrB,OAAQ;YAC1B+B,IAAI,EAAE,IAAI;YACVC,MAAM,EAAEP,eAAe,CAACtC;UACzB,CAAC,CAAC;UACFmB,cAAc,CAACjC,MAAM,EAAAiD,OAAA,GAACL,IAAI,CAAC,CAAC,CAAC,cAAAK,OAAA,uBAAPA,OAAA,CAASI,UAAW,CAAC,CAAC,GAAG;YAC9CrE,QAAQ,EAAE,IAAI;YACdC,QAAQ,EAAE,IAAI;YACdoD,QAAQ,EAAE,IAAI;YACdvD,MAAM,EAAE;cACPjC,QAAQ,EAAE;gBAAE,KAAAqG,sBAAA,GAAGjB,cAAc,CAACjC,MAAM,EAAAmD,OAAA,GAACP,IAAI,CAAC,CAAC,CAAC,cAAAO,OAAA,uBAAPA,OAAA,CAASE,UAAW,CAAC,CAAC,CAACvE,MAAM,cAAAoE,sBAAA,uBAAnDA,sBAAA,CAAqDrG,QAAQ;cAAC,CAAC;cAC9E8F,WAAW,EAAE,QAAQ;cACrBD,YAAY,EAAE,QAAQ;cACtBD,WAAW,EAAEW;YACd;UACD,CAAC;QACF,CAAC,MAAM;UAAA,IAAAQ,sBAAA,EAAAC,sBAAA,EAAAC,OAAA,EAAAC,OAAA,EAAAC,qBAAA,EAAAC,OAAA,EAAAC,OAAA,EAAAC,OAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,QAAA;UAAE;UACR,IAAI1B,IAAI,CAAC,CAAC,CAAC,CAAC2B,iBAAiB,EAAE;YAC9B;UACD;UACA,MAAMnB,eAA0C,IAAAQ,sBAAA,GAAG3B,cAAc,CAACjC,MAAM,EAAA8D,OAAA,GAAClB,IAAI,CAAC,CAAC,CAAC,cAAAkB,OAAA,uBAAPA,OAAA,CAASjB,QAAS,CAAC,CAAC,cAAAe,sBAAA,wBAAAC,sBAAA,GAA1CD,sBAAA,CAA4C9E,MAAM,cAAA+E,sBAAA,uBAAlDA,sBAAA,CAAoDpB,WAAY;UACnHW,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEE,OAAO,CAAC;YACxBC,MAAM,EAAEvD,MAAM,EAAA+D,OAAA,GAACnB,IAAI,CAAC,CAAC,CAAC,cAAAmB,OAAA,uBAAPA,OAAA,CAASlB,QAAS,CAAC;YAClCW,QAAQ,GAAAQ,qBAAA,GAAEjC,aAAa,CAAC/B,MAAM,EAAAiE,OAAA,GAACrB,IAAI,CAAC,CAAC,CAAC,cAAAqB,OAAA,uBAAPA,OAAA,CAASpB,QAAS,CAAC,CAAC,cAAAmB,qBAAA,uBAAzCA,qBAAA,CAA2CxE,eAAe;YACpEmC,OAAO,GAAAuC,OAAA,GAAEtB,IAAI,CAAC,CAAC,CAAC,cAAAsB,OAAA,uBAAPA,OAAA,CAASvC,OAAQ;YAC1B+B,IAAI,EAAE,KAAK;YACXC,MAAM,EAAEP,eAAe,CAACtC;UACzB,CAAC,CAAC;UACFmB,cAAc,CAACjC,MAAM,EAAAmE,OAAA,GAACvB,IAAI,CAAC,CAAC,CAAC,cAAAuB,OAAA,uBAAPA,OAAA,CAAStB,QAAS,CAAC,CAAC,GAAG;YAC5C7D,QAAQ,EAAE,IAAI;YACdC,QAAQ,EAAE,IAAI;YACdoD,QAAQ,EAAE,IAAI;YACdvD,MAAM,EAAE;cACPjC,QAAQ,EAAE;gBAAE,KAAAuH,sBAAA,GAAGnC,cAAc,CAACjC,MAAM,EAAAsE,QAAA,GAAC1B,IAAI,CAAC,CAAC,CAAC,cAAA0B,QAAA,uBAAPA,QAAA,CAASzB,QAAS,CAAC,CAAC,cAAAuB,sBAAA,wBAAAC,sBAAA,GAA1CD,sBAAA,CAA4CtF,MAAM,cAAAuF,sBAAA,uBAAlDA,sBAAA,CAAoDxH,QAAQ;cAAC,CAAC;cAC7E8F,WAAW,EAAE,QAAQ;cACrBD,YAAY,EAAE,QAAQ;cACtBD,WAAW,EAAEW;YACd;UACD,CAAC;QACF;MACD,CAAC,CAAC;MACFzG,WAAW,CAAE6H,YAAY,KAAM;QAAE,GAAGA,YAAY;QAAE,GAAGvC;MAAe,CAAC,CAAC,CAAC;IAExE,CAAC,CAAC;IACF,OAAO,MAAM;MACZpH,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,SAAS,CAAC;IAC7B,CAAC;EACF,CAAC,EAAE,CAAC1F,QAAQ,EAAEQ,QAAQ,EAAEM,aAAa,EAAEH,QAAQ,CAAC,CAAC;EAGjDjC,SAAS,CAAC,MAAM;IACfC,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,WAAW,EAAGoD,WAAiC,IAAK;MACpE9H,WAAW,CAAE6H,YAAY,KAAM;QAAE,GAAGA,YAAY;QAAE,GAAGC;MAAY,CAAC,CAAC,CAAC;IACrE,CAAC,CAAC;IACF5J,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,aAAa,EAAGqD,gBAAkC,IAAK;MACvEtH,gBAAgB,CAAC;QAAE,GAAGsH;MAAiB,CAAC,CAAC;MACzC5H,WAAW,CAAEoF,YAAY,KAAM;QAAE,GAAGwC,gBAAgB;QAAE,GAAGxC;MAAa,CAAC,CAAC,CAAC;IAC1E,CAAC,CAAC;IACFrH,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,YAAY,EAAGsD,YAAoC,IAAK;MACxEpH,YAAY,CAAC;QAAE,GAAGoH;MAAa,CAAC,CAAC;IAClC,CAAC,CAAC;IACF9J,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,WAAW,EAAGuD,WAA6B,IAAK;MAChE9H,WAAW,CAAEoF,YAAY,KAAM;QAAE,GAAGA,YAAY;QAAE,GAAG0C;MAAY,CAAC,CAAC,CAAC;IACrE,CAAC,CAAC;IACF,OAAO,MAAM;MACZ/J,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,WAAW,CAAC;MAC9B/G,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,aAAa,CAAC;MAChC/G,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,YAAY,CAAC;MAC/B/G,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,WAAW,CAAC;IAC/B,CAAC;EACF,CAAC,EAAE,CAAC/E,QAAQ,EAAEH,QAAQ,EAAES,aAAa,EAAEG,SAAS,CAAC,CAAC;EAElD1C,SAAS,CAAC,MAAM;IACfC,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,kBAAkB,EAAEwD,KAAA,IAU/B;MAAA,IAVgC;QACrCC,MAAM;QACNC,MAAM;QACN/F,QAAQ;QACRC;MAMD,CAAC,GAAA4F,KAAA;MACA,QAAQC,MAAM;QACb,KAAK,KAAK;UAAE;YACX,MAAME,WAAiC,GAAG,CAAC,CAAC;YAC5CA,WAAW,CAACD,MAAM,CAAC,GAAG;cACrB/F,QAAQ;cACRC,QAAQ;cACRoD,QAAQ,EAAE;YACX,CAAC;YACDhH,eAAe,CAAC8C,YAAY,EAAG,yBAAwBiB,IAAI,CAACC,SAAS,CAAC2F,WAAW,CAAE,EAAC,CAAC;YACrF3J,eAAe,CAAC8C,YAAY,EAAG,4BAA2BiB,IAAI,CAACC,SAAS,CAAC3C,QAAQ,CAAE,EAAC,CAAC;YACrFC,WAAW,CAAC;cAAE,GAAGD,QAAQ;cAAE,GAAGsI;YAAY,CAAC,CAAC;YAC5C;UACD;QACA,KAAK,QAAQ;UAAE;YACd,MAAMA,WAAiC,GAAG;cAAE,GAAGtI;YAAS,CAAC;YACzD,OAAOsI,WAAW,CAACD,MAAM,CAAC;YAC1BpI,WAAW,CAAC;cAAE,GAAGqI;YAAY,CAAC,CAAC;YAC/B,IAAIvH,SAAS,IAAIsH,MAAM,EAAE;cACxBrH,YAAY,CAAC,CAAC,CAAC,CAAC;YACjB;YACA;UACD;QACA,KAAK,MAAM;UAAE;YAAA,IAAAuH,gBAAA;YACZ,MAAMD,WAAiC,GAAG,CAAC,CAAC;YAC5CA,WAAW,CAACD,MAAM,CAAC,GAAG;cACrB/F,QAAQ;cACRC,QAAQ;cACRoD,QAAQ,GAAA4C,gBAAA,GAAEvI,QAAQ,CAACqI,MAAM,CAAC,cAAAE,gBAAA,uBAAhBA,gBAAA,CAAkB5C,QAAQ;cACpCvD,MAAM,EAAEpC,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM,IAAI,CAAC;YACrC,CAAC;YACDnC,WAAW,CAAC;cAAE,GAAGD,QAAQ;cAAE,GAAGsI;YAAY,CAAC,CAAC;YAC5C;UACD;MACD;IACD,CAAC,CAAC;IACF,OAAO,MAAM;MACZnK,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,kBAAkB,CAAC;IACtC,CAAC;EACF,CAAC,EAAE,CAAClF,QAAQ,EAAEe,SAAS,CAAC,CAAC;EAEzB7C,SAAS,CAAC,MAAM;IACfC,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,YAAY,EAAE,MAAM;MACpCf,qBAAqB,CAAC,CAAC;MACvB3D,WAAW,CAAC,CAAC,CAAC,CAAC;MACfe,YAAY,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC;IACF7C,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,YAAY,EAAE,MAAM;MACpCvE,WAAW,CAAC,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC;IACF,OAAO,MAAM;MACZjC,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,YAAY,CAAC;MAC/B/G,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,YAAY,CAAC;IAChC,CAAC;EACF,CAAC,EAAE,CAAClF,QAAQ,EAAEG,QAAQ,EAAEF,WAAW,EAAEG,WAAW,CAAC,CAAC;EAElDlC,SAAS,CAAC,MAAM;IACfC,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,WAAW,EAAE6D,MAAA,IAgBxB;MAAA,IAhByB;QAC9BH,MAAM;QACN/F,QAAQ;QACRC,QAAQ;QACRkG,YAAY,GAAG,CAAC,CAAC;QACjBC,OAAO;QACPC,MAAM;QACNC,MAAM,GAAG;MASV,CAAC,GAAAJ,MAAA;MACA,QAAQG,MAAM;QACb,KAAK,IAAI;UAAE;YACVhK,eAAe,CAAC8C,YAAY,EAAG,SAAQa,QAAS,OAAM,CAAC;YACvD,MAAMgG,WAAiC,GAAG,CAAC,CAAC;YAC5CA,WAAW,CAACD,MAAM,CAAC,GAAG;cACrB/F,QAAQ;cACRC,QAAQ;cACRoD,QAAQ,EAAE,IAAI;cACdvD,MAAM,EAAE;gBACPjC,QAAQ,EAAE;kBAAE,GAAGsI;gBAAa,CAAC;gBAC7B1C,WAAW,EAAE,EAAE;gBACfC,YAAY,EAAE,QAAQ;gBACtBC,WAAW,EAAEyC;cACd;YACD,CAAC;YACD/J,eAAe,CAAC8C,YAAY,EAAG,oBAAmBiB,IAAI,CAACC,SAAS,CAAC2F,WAAW,CAAE,EAAC,CAAC;YAChFrI,WAAW,CAAC;cAAE,GAAGD,QAAQ;cAAE,GAAGsI;YAAY,CAAC,CAAC;YAC5C,IAAIM,MAAM,KAAK,QAAQ,EAAE;cACxB5H,YAAY,CAACqH,MAAM,CAAC;YACrB;YACA,IAAI9F,QAAQ,KAAK,IAAI,EAAE;cACtB,MAAMsG,SAA2B,GAAG,CAAC,CAAC;cACtCA,SAAS,CAACR,MAAM,CAAC,GAAG;gBACnBvF,eAAe,EAAE3C,QAAQ,CAACkI,MAAM,CAAC,CAACvF,eAAe;gBACjDgG,cAAc,EAAE3I,QAAQ,CAACkI,MAAM,CAAC,CAACS,cAAc;gBAC/CC,UAAU,EAAE5I,QAAQ,CAACkI,MAAM,CAAC,CAACU,UAAU;gBACvCC,QAAQ,EAAE;cACX,CAAC;cACDzI,gBAAgB,CAAE0I,iBAAiB,KAAM;gBAAE,GAAGA,iBAAiB;gBAAE,GAAGJ;cAAU,CAAC,CAAC,CAAC;cACjFzI,WAAW,CAAEoF,YAAY,KAAM;gBAAE,GAAGA,YAAY;gBAAE,GAAGqD;cAAU,CAAC,CAAC,CAAC;YACnE;YACA;UACD;QACA,KAAK,IAAI;UAAE;YACV,IAAI7I,QAAQ,CAACqI,MAAM,CAAC,CAAC1C,QAAQ,KAAK,KAAK,EAAE;cACxCuD,KAAK,CAAE,gBAAe5G,QAAS,OAAM,CAAC;YACvC;YACA;UACD;MACD;IACD,CAAC,CAAC;IACF,OAAO,MAAM;MACZnE,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,WAAW,CAAC;IAC/B,CAAC;EACF,CAAC,EAAE,CAAClF,QAAQ,EAAEG,QAAQ,EAAEG,aAAa,CAAC,CAAC;EAGvCpC,SAAS,CAAC,MAAM;IACfC,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,gBAAgB,EAAEwE,MAAA,IAQ7B;MAAA,IAAAC,iBAAA;MAAA,IAR8B;QACnCf,MAAM;QACND,MAAM;QACNiB;MAKD,CAAC,GAAAF,MAAA;MACA,IAAI,EAAAC,iBAAA,GAAApJ,QAAQ,CAACqI,MAAM,CAAC,cAAAe,iBAAA,uBAAhBA,iBAAA,CAAkBzD,QAAQ,MAAK,IAAI,EAAE;QACxC;MACD;MACA,QAAQyC,MAAM;QACb,KAAK,WAAW;UAAE;YACjB,IAAIiB,QAAQ,KAAK7J,QAAQ,CAACsG,GAAG,EAAE;cAC9B;YACD,CAAC,MAAM;cAAA,IAAAwD,qBAAA;cACN,MAAMC,OAAmC,GAAG,CAAC,CAAC;cAC9CA,OAAO,CAACF,QAAQ,CAAC,GAAG;gBACnBxD,cAAc,EAAE,QAAQ;gBACxBD,aAAa,EAAE;cAChB,CAAC;cACD,MAAM4D,WAAuC,GAAG;gBAAE,KAAAF,qBAAA,GAAGtJ,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM,cAAAkH,qBAAA,uBAAvBA,qBAAA,CAAyBnJ,QAAQ,CAAC;gBAAE,GAAGoJ;cAAQ,CAAC;cACrGpL,MAAM,CAACsL,qBAAqB,CAAC;gBAAEzJ,QAAQ;gBAAEC,WAAW;gBAAEoI,MAAM;gBAAEmB;cAAY,CAAC,CAAC;YAC7E;YACA;UACD;QACA,KAAK,KAAK;QACV,KAAK,OAAO;QACZ,KAAK,MAAM;UAAE;YACZ,IAAIH,QAAQ,KAAK7J,QAAQ,CAACsG,GAAG,EAAE;cAC9B,IAAI9F,QAAQ,CAACqI,MAAM,CAAC,CAAC9F,QAAQ,KAAK,SAAS,EAAE;gBAC5C,MAAM+F,WAAiC,GAAG;kBAAE,GAAGtI;gBAAS,CAAC;gBACzD,OAAOsI,WAAW,CAACD,MAAM,CAAC;gBAC1BpI,WAAW,CAAC;kBAAE,GAAGqI;gBAAY,CAAC,CAAC;cAChC,CAAC,MAAM;gBACN,MAAMA,WAAiC,GAAG,CAAC,CAAC;gBAC5CA,WAAW,CAACD,MAAM,CAAC,GAAG;kBACrB/F,QAAQ,EAAEtC,QAAQ,CAACqI,MAAM,CAAC,CAAC/F,QAAQ;kBACnCC,QAAQ,EAAEvC,QAAQ,CAACqI,MAAM,CAAC,CAAC9F,QAAQ;kBACnCoD,QAAQ,EAAE;gBACX,CAAC;gBACD1F,WAAW,CAAC;kBAAE,GAAGD,QAAQ;kBAAE,GAAGsI;gBAAY,CAAC,CAAC;cAC7C;cACA,IAAIvH,SAAS,KAAKsH,MAAM,EAAE;gBACzBrH,YAAY,CAAC,CAAC,CAAC,CAAC;gBAChB4C,qBAAqB,CAAC,CAAC;cACxB;YACD,CAAC,MAAM;cAAA,IAAA8F,sBAAA;cACN,MAAMF,WAAuC,IAAAE,sBAAA,GAAG1J,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM,cAAAsH,sBAAA,uBAAvBA,sBAAA,CAAyBvJ,QAAS;cAClF,OAAOqJ,WAAW,CAACH,QAAQ,CAAC;cAC5BlL,MAAM,CAACsL,qBAAqB,CAAC;gBAAEzJ,QAAQ;gBAAEC,WAAW;gBAAEoI,MAAM;gBAAEmB;cAAY,CAAC,CAAC;YAC7E;YACA;UACD;QACA,KAAK,MAAM;QACX,KAAK,QAAQ;UAAE;YACd,IAAIH,QAAQ,KAAK7J,QAAQ,CAACsG,GAAG,EAAE;cAAA,IAAA6D,sBAAA,EAAAC,sBAAA;cAC9B,IAAIxB,MAAM,KAAK,MAAM,IAAI,EAAAuB,sBAAA,GAAA3J,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM,cAAAuH,sBAAA,uBAAvBA,sBAAA,CAAyB3D,YAAY,MAAK,MAAM,EAAE;gBAC1E;cACD;cACA,MAAMwD,WAAuC,IAAAI,sBAAA,GAAG5J,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM,cAAAwH,sBAAA,uBAAvBA,sBAAA,CAAyBzJ,QAAS;cAClFqJ,WAAW,CAACH,QAAQ,CAAC,GAAG;gBAAE,GAAGG,WAAW,CAACH,QAAQ,CAAC;gBAAExD,cAAc,EAAEuC;cAAO,CAAC;cAC5EjK,MAAM,CAACsL,qBAAqB,CAAC;gBAAEzJ,QAAQ;gBAAEC,WAAW;gBAAEoI,MAAM;gBAAEmB;cAAY,CAAC,EAAEpB,MAAM,CAAC;YACrF,CAAC,MAAM;cAAA,IAAAyB,sBAAA;cACN,MAAML,WAAuC,IAAAK,sBAAA,GAAG7J,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM,cAAAyH,sBAAA,uBAAvBA,sBAAA,CAAyB1J,QAAS;cAClFqJ,WAAW,CAACH,QAAQ,CAAC,GAAG;gBAAE,GAAGG,WAAW,CAACH,QAAQ,CAAC;gBAAExD,cAAc,EAAEuC;cAAO,CAAC;cAC5EjK,MAAM,CAACsL,qBAAqB,CAAC;gBAAEzJ,QAAQ;gBAAEC,WAAW;gBAAEoI,MAAM;gBAAEmB;cAAY,CAAC,CAAC;YAC7E;YACA;UACD;QACA,KAAK,OAAO;QACZ,KAAK,OAAO;UAAE;YACb,IAAIH,QAAQ,KAAK7J,QAAQ,CAACsG,GAAG,EAAE;cAAA,IAAAgE,sBAAA;cAC9B,MAAMN,WAAuC,IAAAM,sBAAA,GAAG9J,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM,cAAA0H,sBAAA,uBAAvBA,sBAAA,CAAyB3J,QAAS;cAClFqJ,WAAW,CAACH,QAAQ,CAAC,GAAG;gBAAE,GAAGG,WAAW,CAACH,QAAQ,CAAC;gBAAEzD,aAAa,EAAEwC;cAAO,CAAC;cAC3EjK,MAAM,CAACsL,qBAAqB,CAAC;gBAAEzJ,QAAQ;gBAAEC,WAAW;gBAAEoI,MAAM;gBAAEmB;cAAY,CAAC,EAAEnH,SAAS,EAAE+F,MAAM,CAAC;YAChG,CAAC,MAAM;cAAA,IAAA2B,sBAAA;cACN,MAAMP,WAAuC,IAAAO,sBAAA,GAAG/J,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM,cAAA2H,sBAAA,uBAAvBA,sBAAA,CAAyB5J,QAAS;cAClFqJ,WAAW,CAACH,QAAQ,CAAC,GAAG;gBAAE,GAAGG,WAAW,CAACH,QAAQ,CAAC;gBAAEzD,aAAa,EAAEwC;cAAO,CAAC;cAC3EjK,MAAM,CAACsL,qBAAqB,CAAC;gBAAEzJ,QAAQ;gBAAEC,WAAW;gBAAEoI,MAAM;gBAAEmB;cAAY,CAAC,CAAC;YAC7E;YACA;UACD;MACD;IACD,CAAC,CAAC;IACF,OAAO,MAAM;MACZrL,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,gBAAgB,CAAC;IACpC,CAAC;EACF,CAAC,EAAE,CAAClF,QAAQ,EAAER,QAAQ,EAAEuB,SAAS,CAAC,CAAC;EAEnC7C,SAAS,CAAC,MAAM;IACfC,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,aAAa,EAAEqF,MAAA,IAU1B;MAAA,IAV2B;QAChCnD,MAAM;QACN/D,eAAe;QACfgG,cAAc;QACdC;MAMD,CAAC,GAAAiB,MAAA;MACA,MAAMT,OAAyB,GAAG,CAAC,CAAC;MACpCA,OAAO,CAAC1C,MAAM,CAAC,GAAG;QACjB/D,eAAe;QACfgG,cAAc;QACdC;MACD,CAAC;MACDpK,eAAe,CAAC8C,YAAY,EAAG,gBAAeqB,eAAgB,KAAIiG,UAAW,EAAC,CAAC;MAC/E3I,WAAW,CAAEoF,YAAY,KAAM;QAAE,GAAGA,YAAY;QAAE,GAAG+D;MAAQ,CAAC,CAAC,CAAC;IACjE,CAAC,CAAC;IACF,OAAO,MAAM;MACZpL,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,aAAa,CAAC;IACjC,CAAC;EACF,CAAC,EAAE,CAAC/E,QAAQ,EAAET,YAAY,CAAC,CAAC;EAE5BxB,SAAS,CAAC,MAAM;IACfC,MAAM,CAACA,MAAM,CAACwG,EAAE,CAAC,SAAS,EAAEsF,MAAA,IAQtB;MAAA,IARuB;QAC5B5B,MAAM;QACN6B,IAAI;QACJjF;MAKD,CAAC,GAAAgF,MAAA;MACA,MAAME,KAAK,GAAGvJ,SAAS,CAACsJ,IAAI,CAAC,GAAG,IAAI,GAAG,KAAK;MAC5C,QAAQC,KAAK;QACZ,KAAK,IAAI;UAAE;YACVxL,eAAe,CAAC8C,YAAY,EAAG,gBAAeyI,IAAK,aAAY,CAAC;YAChE;UACD;QACA,KAAK,KAAK;UAAE;YAAA,IAAAE,sBAAA,EAAAC,sBAAA;YACX1L,eAAe,CAAC8C,YAAY,EAAG,gBAAeyI,IAAK,iBAAgBjF,OAAQ,EAAC,CAAC;YAC7E,MAAMqF,cAAyC,IAAAF,sBAAA,GAAGpK,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM,cAAAgI,sBAAA,uBAAvBA,sBAAA,CAAyBrE,WAAY;YACvFuE,cAAc,CAAC1D,OAAO,CAAC;cACtBC,MAAM,EAAEqD,IAAI;cACZpD,QAAQ,EAAE3G,QAAQ,CAAC+J,IAAI,CAAC,CAACpH,eAAe;cACxCmC,OAAO;cACP+B,IAAI,EAAExH,QAAQ,CAACsG,GAAG,KAAKoE,IAAI,GAAG,IAAI,GAAG,KAAK;cAC1CjD,MAAM,GAAAoD,sBAAA,GAAErK,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM,cAAAiI,sBAAA,uBAAvBA,sBAAA,CAAyBtE,WAAW,CAAC3B;YAC9C,CAAC,CAAC;YACF,MAAMmG,SAA0C,GAAG;cAAE,GAAGvK,QAAQ,CAACqI,MAAM,CAAC,CAACjG,MAAM;cAAE2D,WAAW,EAAE,CAAC,GAAGuE,cAAc;YAAE,CAAC;YACnH,MAAMhC,WAAiC,GAAG,CAAC,CAAC;YAC5CA,WAAW,CAACD,MAAM,CAAC,GAAG;cACrB/F,QAAQ,EAAEtC,QAAQ,CAACqI,MAAM,CAAC,CAAC/F,QAAQ;cACnCC,QAAQ,EAAEvC,QAAQ,CAACqI,MAAM,CAAC,CAAC9F,QAAQ;cACnCoD,QAAQ,EAAE3F,QAAQ,CAACqI,MAAM,CAAC,CAAC1C,QAAQ;cACnCvD,MAAM,EAAEmI;YACT,CAAC;YACD,IAAIvK,QAAQ,CAACqI,MAAM,CAAC,CAAC9F,QAAQ,KAAK,IAAI,IAAIxB,SAAS,KAAKsH,MAAM,EAAE;cAC/D,MAAMQ,SAA2B,GAAG,CAAC,CAAC;cACtCA,SAAS,CAACR,MAAM,CAAC,GAAG;gBACnBvF,eAAe,EAAE3C,QAAQ,CAACkI,MAAM,CAAC,CAACvF,eAAe;gBACjDgG,cAAc,EAAE3I,QAAQ,CAACkI,MAAM,CAAC,CAACS,cAAc;gBAC/CC,UAAU,EAAE5I,QAAQ,CAACkI,MAAM,CAAC,CAACU,UAAU;gBACvCC,QAAQ,EAAE;cACX,CAAC;cACD5I,WAAW,CAAC;gBAAE,GAAGD,QAAQ;gBAAE,GAAG0I;cAAU,CAAC,CAAC;YAC3C;YACA5I,WAAW,CAAC;cAAE,GAAGD,QAAQ;cAAE,GAAGsI;YAAY,CAAC,CAAC;YAC5C;UACD;MACD;IACD,CAAC,CAAC;IACF,OAAO,MAAM;MACZnK,MAAM,CAACA,MAAM,CAAC+G,GAAG,CAAC,SAAS,CAAC;IAC7B,CAAC;EACF,CAAC,EAAE,CAAClF,QAAQ,EAAEY,SAAS,EAAET,QAAQ,EAAEX,QAAQ,EAAEuB,SAAS,CAAC,CAAC;EAExD,eAAeyJ,UAAUA,CAAA,EAAG;IAC3B,IAAI9K,YAAY,EAAE;MACjB,MAAMmE,gBAAgB,CAAC,CAAC;MACxB1F,MAAM,CAACA,MAAM,CAACsM,OAAO,CAAC,CAAC;IACxB;IACA9K,eAAe,CAAC,KAAK,CAAC;EACvB;EAEA,IAAID,YAAY,EAAE;IACjB8K,UAAU,CAAC,CAAC;EACb;EAGA,oBACC3L,OAAA,CAAC7B,UAAU;IAAA0N,QAAA,GAETjJ,YAAY,gBACT5C,OAAA;MAAA6L,QAAA,gBACD7L,OAAA;QAAQ8L,OAAO,EAAE9G,gBAAiB;QAAA6G,QAAA,EAAC;MAAS;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACrDlM,OAAA;QAAQ8L,OAAO,EAAEpH,UAAW;QAAAmH,QAAA,EAAC;MAAc;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACpDlM,OAAA;QAAQ8L,OAAO,EAAE9I,WAAY;QAAA6I,QAAA,EAAC;MAAS;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAChDlM,OAAA;QAAQ8L,OAAO,EAAE/H,WAAY;QAAA8H,QAAA,EAAC;MAAS;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAChDlM,OAAA;QAAQ8L,OAAO,EAAE5H,SAAU;QAAA2H,QAAA,EAAC;MAAc;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACnDlM,OAAA;QAAQ8L,OAAO,EAAE1H,gBAAiB;QAAAyH,QAAA,EAAC;MAAW;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACvDlM,OAAA;QAAQ8L,OAAO,EAAEnH,cAAe;QAAAkH,QAAA,EAAC;MAAiB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAC3DlM,OAAA;QAAQ8L,OAAO,EAAEjH,cAAe;QAAAgH,QAAA,EAAC;MAAiB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAC3DlM,OAAA;QAAQ8L,OAAO,EAAExH,eAAgB;QAAAuH,QAAA,EAAC;MAAa;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACxDlM,OAAA;QAAQ8L,OAAO,EAAEA,CAAA,KAAMnJ,kBAAkB,CAAC,IAAI,CAAE;QAAAkJ,QAAA,EAAC;MAAW;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjE,CAAC,GACJ,EAAE,eAENlM,OAAA,CAAC5B,MAAM;MAAA2N,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EACT/L,aAAa,gBAAGH,OAAA,CAACjB,aAAa;MAAAgN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,GAAG,IAAI,EACxC7L,SAAS,gBAAGL,OAAA,CAAChB,SAAS;MAAA+M,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,GAAG,IAAI,EAChC3L,WAAW,gBAAGP,OAAA,CAACf,eAAe;MAAA8M,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,GAAG,IAAI,EACxCzL,YAAY,gBAAGT,OAAA,CAACd,aAAa;MAAA6M,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,GAAG,IAAI,EACvCxJ,eAAe,gBACf1C,OAAA,CAACJ,eAAe;MACfyL,IAAI,EAAC,SAAS;MACdc,SAAS,EAAEA,CAAA,KAAM;QAChBxJ,kBAAkB,CAAC,KAAK,CAAC;MAC1B,CAAE;MACFyJ,UAAU,EAAEA,CAAA,KAAM,CAAE;IAAE;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtB,CAAC,GACC,IAAI,eACRlM,OAAA,CAAC3B,YAAY;MAAA0N,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAChBlM,OAAA,CAAC1B,YAAY;MAAAyN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAChBlM,OAAA,CAACzB,QAAQ;MAAAwN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACZlM,OAAA,CAACxB,gBAAgB;MAAAuN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACT,CAAC;AAEf;AAAChM,EAAA,CA9oBuBD,QAAQ;EAAA,QACWxB,OAAO,EACfA,OAAO,EACHA,OAAO,EACLA,OAAO,EAEfA,OAAO,EACCA,OAAO,EACfA,OAAO,EAEPA,OAAO,EACPA,OAAO,EACGA,OAAO,EACPA,OAAO,EACfA,OAAO,EACPA,OAAO,EACHA,OAAO,EAE5BkB,WAAW,EACAlB,OAAO,EAEWA,OAAO,EACbA,OAAO;AAAA;AAAA4N,EAAA,GAtBxBpM,QAAQ;AAAA,IAAAoM,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}