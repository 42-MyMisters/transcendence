{"ast":null,"code":"var _jsxFileName = \"/data/front/src/components/GamePage/PingPong.tsx\",\n  _s = $RefreshSig$();\nimport \"../../styles/BackGround.css\";\nimport \"../../styles/PingPong.css\";\nimport React, { useEffect } from \"react\";\nimport * as chatAtom from \"../atom/ChatAtom\";\nimport { gameSocketAtom, gameWinnerAtom, isGameStartedAtom, isP1Atom, isPrivateAtom } from \"../atom/GameAtom\";\nimport { Game } from \"./Pong\";\nimport { useAtom, useAtomValue } from \"jotai\";\nimport { useRef, useState } from \"react\";\nimport { gameResultModalAtom, isLoadingAtom } from \"../atom/ModalAtom\";\nimport { ball, HEIGHT, p1, p2, paddle, WIDTH } from \"./GameInfo\";\nimport { AdminLogPrinter } from \"../../event/event.util\";\nimport { Direction, Hit } from \"../../socket/game.dto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PingPong() {\n  _s();\n  const [upArrow, setUpArrow] = useState(false);\n  const [downArrow, setDownArrow] = useState(false);\n  const [adminConsole] = useAtom(chatAtom.adminConsoleAtom);\n  const canvas = useRef(null);\n  const [isLoading, setIsLoading] = useAtom(isLoadingAtom);\n  const [isPrivate, setIsPrivate] = useAtom(isPrivateAtom);\n  const [isGameStart, setIsGameStart] = useAtom(isGameStartedAtom);\n  // const [isQueue, setIsQueue] = useAtom(isQueueAtom);\n  const [gameResultModal, setGameResultModal] = useAtom(gameResultModalAtom);\n  const gameSocket = useAtomValue(gameSocketAtom);\n  const isP1 = useAtomValue(isP1Atom);\n  const [gameWinner, setWinner] = useAtom(gameWinnerAtom);\n\n  // const [serverClientTimeDiff, setServerClientTimeDiff] = useAtom(serverClientTimeDiffAtom);\n\n  let serverClientTimeDiff = 1000;\n  const [coords, setCoords] = useState({\n    paddle1Y: 225,\n    ballX: 1150 / 2,\n    ballY: 300,\n    paddle2Y: 225,\n    ballSpeedX: 0,\n    ballSpeedY: 0,\n    paddleSpeed: 0.6,\n    keyPress: [0, 0, 0, 0],\n    time: Date.now()\n  });\n  let lastUpdateTime = coords.time;\n  let requestAnimationId = 0;\n\n  // 1 sec delay for init value\n  let pingRTTmin = 2000;\n  let pingInterval;\n  const pingEvent = () => {\n    if (!isGameStart) {\n      clearInterval(pingInterval);\n    }\n    // console.log(gameSocket.connected);\n    // console.log(gameSocket.id);\n    // console.log(gameSocket);\n    const curTime = Date.now();\n    const pingEventHandler = serverTime => {\n      const now = Date.now();\n      const pingRTT = now - curTime;\n      AdminLogPrinter(adminConsole, `\\npingRTT: ${pingRTT}ms`);\n      if (pingRTTmin > pingRTT) {\n        pingRTTmin = pingRTT;\n        const adjServerTime = serverTime + pingRTTmin / 2;\n        serverClientTimeDiff = now - adjServerTime;\n      }\n      AdminLogPrinter(adminConsole, `pingRTTmin: ${pingRTTmin}ms`);\n    };\n    gameSocket.emit(\"ping\", pingEventHandler);\n  };\n  useEffect(() => {\n    console.log(\"pingInterval\");\n    pingInterval = setInterval(pingEvent, 1000);\n    return () => {\n      console.log(\"clear pingInterval\");\n      clearInterval(pingInterval);\n    };\n  }, []);\n  const syncDataHandler = gameCoord => {\n    const tmpCoords = gameCoord;\n    for (let i = 0; i < 4; i++) {\n      if (tmpCoords.keyPress[i] !== 0) {\n        tmpCoords.keyPress[i] += serverClientTimeDiff;\n      }\n    }\n    if (isP1 === false) {\n      tmpCoords.ballX = WIDTH - tmpCoords.ballX;\n      tmpCoords.ballSpeedX = -tmpCoords.ballSpeedX;\n      const tmpPaddle1Y = tmpCoords.paddle1Y;\n      tmpCoords.paddle1Y = tmpCoords.paddle2Y;\n      tmpCoords.paddle2Y = tmpPaddle1Y;\n      const tmpUp = tmpCoords.keyPress[0];\n      const tmpDown = tmpCoords.keyPress[1];\n      tmpCoords.keyPress[0] = tmpCoords.keyPress[2];\n      tmpCoords.keyPress[1] = tmpCoords.keyPress[3];\n      tmpCoords.keyPress[2] = tmpUp;\n      tmpCoords.keyPress[3] = tmpDown;\n    }\n    tmpCoords.time += serverClientTimeDiff;\n    setCoords(tmpCoords);\n    update(Date.now(), tmpCoords.time);\n  };\n  const scoreEventHandler = _ref => {\n    let {\n      gameCoord,\n      scoreInfo\n    } = _ref;\n    console.log(gameCoord);\n    if (isP1) {\n      p1.score = scoreInfo.p1Score;\n      p2.score = scoreInfo.p2Score;\n    } else {\n      p1.score = scoreInfo.p2Score;\n      p2.score = scoreInfo.p1Score;\n    }\n    for (let i = 0; i < 4; i++) {\n      if (gameCoord.keyPress[i] !== 0) {\n        gameCoord.keyPress[i] += serverClientTimeDiff;\n      }\n    }\n    const tmpCoords = gameCoord;\n    if (isP1 === false) {\n      tmpCoords.ballX = WIDTH - tmpCoords.ballX;\n      tmpCoords.ballSpeedX = -tmpCoords.ballSpeedX;\n      const tmpPaddle1Y = tmpCoords.paddle1Y;\n      tmpCoords.paddle1Y = tmpCoords.paddle2Y;\n      tmpCoords.paddle2Y = tmpPaddle1Y;\n      const tmpUp = tmpCoords.keyPress[0];\n      const tmpDown = tmpCoords.keyPress[1];\n      tmpCoords.keyPress[0] = tmpCoords.keyPress[2];\n      tmpCoords.keyPress[1] = tmpCoords.keyPress[3];\n      tmpCoords.keyPress[2] = tmpUp;\n      tmpCoords.keyPress[3] = tmpDown;\n    }\n    tmpCoords.time += serverClientTimeDiff;\n    tmpCoords.ballSpeedX = 0;\n    tmpCoords.ballSpeedY = 0;\n    tmpCoords.paddleSpeed = 0;\n    tmpCoords.time += serverClientTimeDiff;\n    setCoords(tmpCoords);\n    update(Date.now(), tmpCoords.time);\n    // Game(coords, canvas);\n  };\n\n  const finishEventHandler = scoreInfo => {\n    console.log(\"finished!!!!!!\");\n    p1.score = scoreInfo.p1Score;\n    p2.score = scoreInfo.p2Score;\n    if (p1.score > p2.score) {\n      setWinner(p1.uid);\n    } else {\n      setWinner(p2.uid);\n    }\n    coords.ballSpeedX = 0;\n    coords.ballSpeedY = 0;\n    coords.paddleSpeed = 0;\n    update(Date.now(), coords.time);\n    Game(coords, canvas);\n    setGameResultModal(true);\n    clearInterval(pingInterval);\n  };\n  const countdownEventHandler = () => {\n    AdminLogPrinter(adminConsole, \"countdown!!!\");\n  };\n  useEffect(() => {\n    gameSocket.on(\"syncData\", syncDataHandler);\n    gameSocket.on(\"scoreInfo\", scoreEventHandler);\n    gameSocket.on(\"finished\", finishEventHandler);\n    gameSocket.on(\"countdown\", countdownEventHandler);\n    return () => {\n      gameSocket.off(\"syncData\", syncDataHandler);\n      gameSocket.off(\"scoreInfo\", scoreEventHandler);\n      gameSocket.off(\"finished\", finishEventHandler);\n      gameSocket.off(\"countdown\", countdownEventHandler);\n    };\n  }, []);\n  useEffect(() => {\n    requestAnimationLoop(Date.now(), lastUpdateTime);\n    return () => {\n      cancelAnimationFrame(requestAnimationId);\n    };\n  }, [coords]);\n\n  // // the connection is denied by the server in a middleware function\n  // gameSocket.on(\"connect_error\", (err) => {\n  //   if (err.message === \"unauthorized\") {\n  //     // handle each case\n  //   }\n  //   console.log(err.message); // prints the message associated with the error\n  // });\n\n  function requestAnimationLoop(curTime, lastUpdate) {\n    if (coords.keyPress !== null) {\n      update(curTime, lastUpdate);\n    }\n    requestAnimationId = requestAnimationFrame(() => requestAnimationLoop(Date.now(), lastUpdateTime));\n  }\n\n  // paddle update first, and then ball position update.\n  function update(curTime, lastUpdate) {\n    const dt = curTime - lastUpdate;\n    if (dt > 0) {\n      const keyPressDt = getKeyPressDt(curTime);\n      paddleUpdate(keyPressDt);\n      coords.ballX += coords.ballSpeedX * dt;\n      coords.ballY += coords.ballSpeedY * dt;\n      const isHitY = collisionCheckY();\n      const isHitX = collisionCheckX();\n      if (isHitY !== Direction.NONE) {\n        if (isHitY === Direction.UP) {\n          coords.ballY = 2 * ball.radius - coords.ballY;\n          coords.ballSpeedY = -coords.ballSpeedY;\n        } else {\n          coords.ballY = 2 * (HEIGHT - ball.radius) - coords.ballY;\n          coords.ballSpeedY = -coords.ballSpeedY;\n        }\n      }\n      if (isHitX !== Direction.NONE) {\n        if (isHitX === Direction.LEFT) {\n          if (collisionCheckP1Paddle() === Hit.PADDLE) {\n            coords.ballX = 2 * (ball.radius + paddle.width) - coords.ballX;\n            coords.ballSpeedX = -coords.ballSpeedX;\n          }\n        } else {\n          if (collisionCheckP2Paddle() === Hit.PADDLE) {\n            coords.ballX = 2 * (WIDTH - ball.radius - paddle.width) - coords.ballX;\n            coords.ballSpeedX = -coords.ballSpeedX;\n          }\n        }\n      }\n      lastUpdateTime = curTime;\n      Game(coords, canvas);\n    }\n  }\n  function getKeyPressDt(curTime) {\n    const keyPressDt = [];\n    for (let i = 0; i < 4; i++) {\n      if (coords.keyPress[i] !== 0 && curTime > coords.keyPress[i]) {\n        keyPressDt.push(curTime - coords.keyPress[i]);\n        coords.keyPress[i] = curTime;\n      } else {\n        keyPressDt.push(0);\n      }\n    }\n    return keyPressDt;\n  }\n  function paddleUpdate(keyPressDt) {\n    if (keyPressDt[0] !== 0) {\n      if (coords.paddle1Y > 0) {\n        coords.paddle1Y -= coords.paddleSpeed * keyPressDt[0];\n      }\n      if (coords.paddle1Y < 0) {\n        coords.paddle1Y = 0;\n      }\n    }\n    if (keyPressDt[1] !== 0) {\n      if (coords.paddle1Y < HEIGHT - paddle.height) {\n        coords.paddle1Y += coords.paddleSpeed * keyPressDt[1];\n      }\n      if (coords.paddle1Y > HEIGHT - paddle.height) {\n        coords.paddle1Y = HEIGHT - paddle.height;\n      }\n    }\n    if (keyPressDt[2] !== 0) {\n      if (coords.paddle2Y > 0) {\n        coords.paddle2Y -= coords.paddleSpeed * keyPressDt[2];\n      }\n      if (coords.paddle2Y < 0) {\n        coords.paddle2Y = 0;\n      }\n    }\n    if (keyPressDt[3] !== 0) {\n      if (coords.paddle2Y < HEIGHT - paddle.height) {\n        coords.paddle2Y += coords.paddleSpeed * keyPressDt[3];\n      }\n      if (coords.paddle2Y > HEIGHT - paddle.height) {\n        coords.paddle2Y = HEIGHT - paddle.height;\n      }\n    }\n  }\n  function collisionCheckX() {\n    if (coords.ballX <= ball.radius + paddle.width) {\n      return Direction.LEFT;\n    } else if (coords.ballX >= WIDTH - ball.radius - paddle.width) {\n      return Direction.RIGHT;\n    }\n    return Direction.NONE;\n  }\n  function collisionCheckY() {\n    if (coords.ballY >= HEIGHT - ball.radius) {\n      return Direction.DOWN;\n    } else if (coords.ballY <= ball.radius) {\n      return Direction.UP;\n    }\n    return Direction.NONE;\n  }\n  function collisionCheckP1Paddle() {\n    if (coords.ballY >= coords.paddle1Y && coords.ballY <= coords.paddle1Y + paddle.height) {\n      return Hit.PADDLE;\n    }\n    return Hit.WALL;\n  }\n  function collisionCheckP2Paddle() {\n    if (coords.ballY >= coords.paddle2Y && coords.ballY <= coords.paddle2Y + paddle.height) {\n      return Hit.PADDLE;\n    }\n    return Hit.WALL;\n  }\n  useEffect(() => {\n    // first draw\n    p1.score = 0;\n    p2.score = 0;\n    Game(coords, canvas);\n  }, []);\n  useEffect(() => {\n    function handleKeyPress(event) {\n      if (event.code === \"ArrowUp\") {\n        event.preventDefault();\n        if (!upArrow) {\n          setUpArrow(true);\n          gameSocket.emit(\"upPress\");\n          AdminLogPrinter(adminConsole, \"up press\");\n        }\n      } else if (event.code === \"ArrowDown\") {\n        event.preventDefault();\n        if (!downArrow) {\n          setDownArrow(true);\n          gameSocket.emit(\"downPress\");\n          AdminLogPrinter(adminConsole, \"down press\");\n        }\n      }\n    }\n    function handleKeyRelease(event) {\n      if (event.code === \"ArrowUp\") {\n        event.preventDefault();\n        if (upArrow) {\n          setUpArrow(false);\n          gameSocket.emit(\"upRelease\");\n          AdminLogPrinter(adminConsole, \"up release\");\n        }\n      } else if (event.code === \"ArrowDown\") {\n        event.preventDefault();\n        if (downArrow) {\n          setDownArrow(false);\n          gameSocket.emit(\"downRelease\");\n          AdminLogPrinter(adminConsole, \"down release\");\n        }\n      }\n    }\n    window.addEventListener(\"keydown\", handleKeyPress);\n    window.addEventListener(\"keyup\", handleKeyRelease);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyPress);\n      window.removeEventListener(\"keyup\", handleKeyRelease);\n    };\n  }, [upArrow, downArrow]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"QueueBackGround\",\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvas,\n      id: \"pong\",\n      width: 1150,\n      height: 600\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 390,\n    columnNumber: 5\n  }, this);\n}\n_s(PingPong, \"En0DCMzo3O6zGgFGVf8REF9KYng=\", false, function () {\n  return [useAtom, useAtom, useAtom, useAtom, useAtom, useAtomValue, useAtomValue, useAtom];\n});\n_c = PingPong;\nvar _c;\n$RefreshReg$(_c, \"PingPong\");","map":{"version":3,"names":["React","useEffect","chatAtom","gameSocketAtom","gameWinnerAtom","isGameStartedAtom","isP1Atom","isPrivateAtom","Game","useAtom","useAtomValue","useRef","useState","gameResultModalAtom","isLoadingAtom","ball","HEIGHT","p1","p2","paddle","WIDTH","AdminLogPrinter","Direction","Hit","jsxDEV","_jsxDEV","PingPong","_s","upArrow","setUpArrow","downArrow","setDownArrow","adminConsole","adminConsoleAtom","canvas","isLoading","setIsLoading","isPrivate","setIsPrivate","isGameStart","setIsGameStart","gameResultModal","setGameResultModal","gameSocket","isP1","gameWinner","setWinner","serverClientTimeDiff","coords","setCoords","paddle1Y","ballX","ballY","paddle2Y","ballSpeedX","ballSpeedY","paddleSpeed","keyPress","time","Date","now","lastUpdateTime","requestAnimationId","pingRTTmin","pingInterval","pingEvent","clearInterval","curTime","pingEventHandler","serverTime","pingRTT","adjServerTime","emit","console","log","setInterval","syncDataHandler","gameCoord","tmpCoords","i","tmpPaddle1Y","tmpUp","tmpDown","update","scoreEventHandler","_ref","scoreInfo","score","p1Score","p2Score","finishEventHandler","uid","countdownEventHandler","on","off","requestAnimationLoop","cancelAnimationFrame","lastUpdate","requestAnimationFrame","dt","keyPressDt","getKeyPressDt","paddleUpdate","isHitY","collisionCheckY","isHitX","collisionCheckX","NONE","UP","radius","LEFT","collisionCheckP1Paddle","PADDLE","width","collisionCheckP2Paddle","push","height","RIGHT","DOWN","WALL","handleKeyPress","event","code","preventDefault","handleKeyRelease","window","addEventListener","removeEventListener","className","children","ref","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/data/front/src/components/GamePage/PingPong.tsx"],"sourcesContent":["import \"../../styles/BackGround.css\";\nimport \"../../styles/PingPong.css\";\n\nimport React, { useEffect } from \"react\";\n\nimport * as chatAtom from \"../atom/ChatAtom\";\nimport { gameSocketAtom, gameWinnerAtom, isGameStartedAtom, isP1Atom, isPrivateAtom } from \"../atom/GameAtom\";\nimport { Game } from \"./Pong\";\n\n\nimport { useAtom, useAtomValue } from \"jotai\";\nimport { useRef, useState } from \"react\";\nimport { gameResultModalAtom, isLoadingAtom } from \"../atom/ModalAtom\";\nimport {\n  ball,\n  HEIGHT,\n  p1,\n  p2,\n  paddle,\n  WIDTH,\n} from \"./GameInfo\";\n\nimport { AdminLogPrinter } from \"../../event/event.util\";\nimport { GameCoordinate, scoreInfo, Direction, Hit, GameType } from \"../../socket/game.dto\";\n\nexport default function PingPong() {\n\n  const [upArrow, setUpArrow] = useState(false);\n  const [downArrow, setDownArrow] = useState(false);\n  const [adminConsole] = useAtom(chatAtom.adminConsoleAtom);\n  const canvas = useRef<HTMLCanvasElement>(null);\n\n  const [isLoading, setIsLoading] = useAtom(isLoadingAtom);\n  const [isPrivate, setIsPrivate] = useAtom(isPrivateAtom);\n  const [isGameStart, setIsGameStart] = useAtom(isGameStartedAtom);\n  // const [isQueue, setIsQueue] = useAtom(isQueueAtom);\n  const [gameResultModal, setGameResultModal] = useAtom(gameResultModalAtom);\n\n  const gameSocket = useAtomValue(gameSocketAtom);\n\n  const isP1 = useAtomValue(isP1Atom);\n  const [gameWinner, setWinner] = useAtom(gameWinnerAtom);\n\n  // const [serverClientTimeDiff, setServerClientTimeDiff] = useAtom(serverClientTimeDiffAtom);\n\n  let serverClientTimeDiff: number = 1000;\n\n  const [coords, setCoords] = useState({\n    paddle1Y: 225,\n    ballX: 1150 / 2,\n    ballY: 300,\n    paddle2Y: 225,\n    ballSpeedX: 0,\n    ballSpeedY: 0,\n    paddleSpeed: 0.6,\n    keyPress: [0, 0, 0, 0],\n    time: Date.now(),\n  } as GameCoordinate);\n\n  let lastUpdateTime: number = coords.time;\n  let requestAnimationId: number = 0;\n\n  // 1 sec delay for init value\n  let pingRTTmin: number = 2000;\n  let pingInterval: NodeJS.Timer;\n\n  const pingEvent = () => {\n    if (!isGameStart) {\n      clearInterval(pingInterval);\n    }\n    // console.log(gameSocket.connected);\n    // console.log(gameSocket.id);\n    // console.log(gameSocket);\n    const curTime = Date.now();\n    const pingEventHandler = (serverTime: number) => {\n      const now = Date.now();\n      const pingRTT = now - curTime;\n      AdminLogPrinter(adminConsole, `\\npingRTT: ${pingRTT}ms`);\n      if (pingRTTmin > pingRTT) {\n        pingRTTmin = pingRTT;\n        const adjServerTime = serverTime + pingRTTmin / 2;\n        serverClientTimeDiff = now - adjServerTime\n      }\n      AdminLogPrinter(adminConsole, `pingRTTmin: ${pingRTTmin}ms`);\n    };\n    gameSocket.emit(\"ping\", pingEventHandler);\n  };\n\n  useEffect(() => {\n    console.log(\"pingInterval\");\n    pingInterval = setInterval(pingEvent, 1000);\n    return () => {\n      console.log(\"clear pingInterval\");\n      clearInterval(pingInterval);\n    }\n  }, []);\n\n\n  const syncDataHandler = (gameCoord: GameCoordinate) => {\n    const tmpCoords = gameCoord;\n    for (let i = 0; i < 4; i++) {\n      if (tmpCoords.keyPress[i] !== 0) {\n        tmpCoords.keyPress[i] += serverClientTimeDiff;\n      }\n    }\n    if (isP1 === false) {\n      tmpCoords.ballX = WIDTH - tmpCoords.ballX;\n      tmpCoords.ballSpeedX = -tmpCoords.ballSpeedX;\n      const tmpPaddle1Y = tmpCoords.paddle1Y;\n      tmpCoords.paddle1Y = tmpCoords.paddle2Y;\n      tmpCoords.paddle2Y = tmpPaddle1Y;\n      const tmpUp = tmpCoords.keyPress[0];\n      const tmpDown = tmpCoords.keyPress[1];\n      tmpCoords.keyPress[0] = tmpCoords.keyPress[2];\n      tmpCoords.keyPress[1] = tmpCoords.keyPress[3];\n      tmpCoords.keyPress[2] = tmpUp;\n      tmpCoords.keyPress[3] = tmpDown;\n    }\n    tmpCoords.time += serverClientTimeDiff;\n    setCoords(tmpCoords);\n    update(Date.now(), tmpCoords.time);\n  };\n\n  const scoreEventHandler = ({ gameCoord, scoreInfo }: { gameCoord: GameCoordinate, scoreInfo: scoreInfo }) => {\n    console.log(gameCoord);\n    if (isP1) {\n      p1.score = scoreInfo.p1Score;\n      p2.score = scoreInfo.p2Score;\n    } else {\n      p1.score = scoreInfo.p2Score;\n      p2.score = scoreInfo.p1Score;\n    }\n    for (let i = 0; i < 4; i++) {\n      if (gameCoord.keyPress[i] !== 0) {\n        gameCoord.keyPress[i] += serverClientTimeDiff;\n      }\n    }\n    const tmpCoords = gameCoord;\n    if (isP1 === false) {\n      tmpCoords.ballX = WIDTH - tmpCoords.ballX;\n      tmpCoords.ballSpeedX = -tmpCoords.ballSpeedX;\n      const tmpPaddle1Y = tmpCoords.paddle1Y;\n      tmpCoords.paddle1Y = tmpCoords.paddle2Y;\n      tmpCoords.paddle2Y = tmpPaddle1Y;\n      const tmpUp = tmpCoords.keyPress[0];\n      const tmpDown = tmpCoords.keyPress[1];\n      tmpCoords.keyPress[0] = tmpCoords.keyPress[2];\n      tmpCoords.keyPress[1] = tmpCoords.keyPress[3];\n      tmpCoords.keyPress[2] = tmpUp;\n      tmpCoords.keyPress[3] = tmpDown;\n    }\n    tmpCoords.time += serverClientTimeDiff;\n    tmpCoords.ballSpeedX = 0;\n    tmpCoords.ballSpeedY = 0;\n    tmpCoords.paddleSpeed = 0;\n    tmpCoords.time += serverClientTimeDiff;\n    setCoords(tmpCoords);\n    update(Date.now(), tmpCoords.time);\n    // Game(coords, canvas);\n  };\n\n  const finishEventHandler = (scoreInfo: scoreInfo) => {\n    console.log(\"finished!!!!!!\");\n    p1.score = scoreInfo.p1Score;\n    p2.score = scoreInfo.p2Score;\n    if (p1.score > p2.score) {\n      setWinner(p1.uid);\n    } else {\n      setWinner(p2.uid);\n    }\n    coords.ballSpeedX = 0;\n    coords.ballSpeedY = 0;\n    coords.paddleSpeed = 0;\n    update(Date.now(), coords.time);\n    Game(coords, canvas);\n    setGameResultModal(true);\n    clearInterval(pingInterval);\n  };\n\n  const countdownEventHandler = () => {\n    AdminLogPrinter(adminConsole, \"countdown!!!\");\n  }\n\n  useEffect(() => {\n    gameSocket.on(\"syncData\", syncDataHandler);\n    gameSocket.on(\"scoreInfo\", scoreEventHandler);\n    gameSocket.on(\"finished\", finishEventHandler);\n    gameSocket.on(\"countdown\", countdownEventHandler);\n    return () => {\n      gameSocket.off(\"syncData\", syncDataHandler);\n      gameSocket.off(\"scoreInfo\", scoreEventHandler);\n      gameSocket.off(\"finished\", finishEventHandler);\n      gameSocket.off(\"countdown\", countdownEventHandler);\n    };\n  }, []);\n\n  useEffect(() => {\n    requestAnimationLoop(Date.now(), lastUpdateTime);\n    return () => {\n      cancelAnimationFrame(requestAnimationId);\n    }\n  }, [coords]);\n\n  // // the connection is denied by the server in a middleware function\n  // gameSocket.on(\"connect_error\", (err) => {\n  //   if (err.message === \"unauthorized\") {\n  //     // handle each case\n  //   }\n  //   console.log(err.message); // prints the message associated with the error\n  // });\n\n  function requestAnimationLoop(curTime: number, lastUpdate: number) {\n    if (coords.keyPress !== null) {\n      update(curTime, lastUpdate);\n    }\n    requestAnimationId = requestAnimationFrame(() => requestAnimationLoop(Date.now(), lastUpdateTime));\n  }\n\n  // paddle update first, and then ball position update.\n  function update(curTime: number, lastUpdate: number) {\n    const dt = curTime - lastUpdate;\n    if (dt > 0) {\n      const keyPressDt: number[] = getKeyPressDt(curTime);\n\n      paddleUpdate(keyPressDt);\n      coords.ballX += coords.ballSpeedX * dt;\n      coords.ballY += coords.ballSpeedY * dt;\n      const isHitY = collisionCheckY();\n      const isHitX = collisionCheckX();\n      if (isHitY !== Direction.NONE) {\n        if (isHitY === Direction.UP) {\n          coords.ballY = 2 * ball.radius - coords.ballY;\n          coords.ballSpeedY = -coords.ballSpeedY;\n        } else {\n          coords.ballY = 2 * (HEIGHT - ball.radius) - coords.ballY;\n          coords.ballSpeedY = -coords.ballSpeedY;\n        }\n      }\n      if (isHitX !== Direction.NONE) {\n        if (isHitX === Direction.LEFT) {\n          if (collisionCheckP1Paddle() === Hit.PADDLE) {\n            coords.ballX = 2 * (ball.radius + paddle.width) - coords.ballX;\n            coords.ballSpeedX = -coords.ballSpeedX;\n          }\n        } else {\n          if (collisionCheckP2Paddle() === Hit.PADDLE) {\n            coords.ballX = 2 * (WIDTH - ball.radius - paddle.width) - coords.ballX;\n            coords.ballSpeedX = -coords.ballSpeedX;\n          }\n        }\n      }\n      lastUpdateTime = curTime;\n      Game(coords, canvas);\n    }\n  }\n\n  function getKeyPressDt(curTime: number): number[] {\n    const keyPressDt: number[] = [];\n    for (let i = 0; i < 4; i++) {\n      if (coords.keyPress[i] !== 0 && curTime > coords.keyPress[i]) {\n        keyPressDt.push(curTime - coords.keyPress[i]);\n        coords.keyPress[i] = curTime;\n      } else {\n        keyPressDt.push(0);\n      }\n    }\n    return keyPressDt;\n  }\n\n  function paddleUpdate(keyPressDt: number[]) {\n    if (keyPressDt[0] !== 0) {\n      if (coords.paddle1Y > 0) {\n        coords.paddle1Y -= coords.paddleSpeed * keyPressDt[0];\n      }\n      if (coords.paddle1Y < 0) {\n        coords.paddle1Y = 0;\n      }\n    }\n    if (keyPressDt[1] !== 0) {\n      if (coords.paddle1Y < HEIGHT - paddle.height) {\n        coords.paddle1Y += coords.paddleSpeed * keyPressDt[1];\n      }\n      if (coords.paddle1Y > HEIGHT - paddle.height) {\n        coords.paddle1Y = HEIGHT - paddle.height;\n      }\n    }\n    if (keyPressDt[2] !== 0) {\n      if (coords.paddle2Y > 0) {\n        coords.paddle2Y -= coords.paddleSpeed * keyPressDt[2];\n      }\n      if (coords.paddle2Y < 0) {\n        coords.paddle2Y = 0;\n      }\n    }\n    if (keyPressDt[3] !== 0) {\n      if (coords.paddle2Y < HEIGHT - paddle.height) {\n        coords.paddle2Y += coords.paddleSpeed * keyPressDt[3];\n      }\n      if (coords.paddle2Y > HEIGHT - paddle.height) {\n        coords.paddle2Y = HEIGHT - paddle.height;\n      }\n    }\n  }\n\n  function collisionCheckX() {\n    if (coords.ballX <= ball.radius + paddle.width) {\n      return Direction.LEFT;\n    } else if (coords.ballX >= WIDTH - ball.radius - paddle.width) {\n      return Direction.RIGHT;\n    }\n    return Direction.NONE;\n  }\n\n  function collisionCheckY() {\n    if (coords.ballY >= HEIGHT - ball.radius) {\n      return Direction.DOWN;\n    } else if (coords.ballY <= ball.radius) {\n      return Direction.UP;\n    }\n    return Direction.NONE;\n  }\n\n  function collisionCheckP1Paddle() {\n    if (coords.ballY >= coords.paddle1Y && coords.ballY <= coords.paddle1Y + paddle.height) {\n      return Hit.PADDLE;\n    }\n    return Hit.WALL;\n  }\n\n  function collisionCheckP2Paddle() {\n    if (coords.ballY >= coords.paddle2Y && coords.ballY <= coords.paddle2Y + paddle.height) {\n      return Hit.PADDLE;\n    }\n    return Hit.WALL;\n  }\n\n  useEffect(() => {\n    // first draw\n    p1.score = 0;\n    p2.score = 0;\n    Game(coords, canvas);\n  }, []);\n\n  useEffect(() => {\n    function handleKeyPress(event: globalThis.KeyboardEvent) {\n      if (event.code === \"ArrowUp\") {\n        event.preventDefault();\n        if (!upArrow) {\n          setUpArrow(true);\n          gameSocket.emit(\"upPress\");\n          AdminLogPrinter(adminConsole, \"up press\");\n        }\n      } else if (event.code === \"ArrowDown\") {\n        event.preventDefault();\n        if (!downArrow) {\n          setDownArrow(true);\n          gameSocket.emit(\"downPress\");\n          AdminLogPrinter(adminConsole, \"down press\");\n        }\n      }\n    }\n\n    function handleKeyRelease(event: globalThis.KeyboardEvent) {\n      if (event.code === \"ArrowUp\") {\n        event.preventDefault();\n        if (upArrow) {\n          setUpArrow(false);\n          gameSocket.emit(\"upRelease\");\n          AdminLogPrinter(adminConsole, \"up release\");\n        }\n      } else if (event.code === \"ArrowDown\") {\n        event.preventDefault();\n        if (downArrow) {\n          setDownArrow(false);\n          gameSocket.emit(\"downRelease\");\n          AdminLogPrinter(adminConsole, \"down release\");\n        }\n      }\n    }\n    window.addEventListener(\"keydown\", handleKeyPress);\n    window.addEventListener(\"keyup\", handleKeyRelease);\n\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyPress);\n      window.removeEventListener(\"keyup\", handleKeyRelease);\n    };\n  }, [upArrow, downArrow]);\n\n  return (\n    <div className=\"QueueBackGround\">\n      <canvas ref={canvas} id=\"pong\" width={1150} height={600}></canvas>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}