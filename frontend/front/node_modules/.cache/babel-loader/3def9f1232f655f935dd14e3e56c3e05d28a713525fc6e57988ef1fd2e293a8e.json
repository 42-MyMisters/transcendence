{"ast":null,"code":"var _jsxFileName = \"/data/front/src/pages/ChatPage.tsx\",\n  _s = $RefreshSig$();\nimport BackGround from \"../components/BackGround\";\nimport TopBar from \"../components/TopBar\";\nimport ChatRoomList from \"../components/ChatPage/ChatRoomList\";\nimport ChatUserList from \"../components/ChatPage/ChatUserList\";\nimport ChatArea from \"../components/ChatPage/ChatArea\";\nimport ChatRoomUserList from \"../components/ChatPage/ChatRoomUserList\";\nimport { useAtom } from \"jotai\";\nimport { userInfoModalAtom, passwordInputModalAtom, roomModalAtom, inviteModalAtom, gameInviteModalAtom } from \"../components/atom/ModalAtom\";\nimport UserInfoModal from \"../components/ChatPage/UserInfoModal\";\nimport RoomModal from \"../components/ChatPage/RoomModal\";\nimport RoomInviteModal from \"../components/ChatPage/RoomInviteModal\";\nimport PasswordModal from \"../components/ChatPage/PasswordModal\";\nimport { refreshTokenAtom } from \"../components/atom/LoginAtom\";\nimport { UserAtom } from \"../components/atom/UserAtom\";\nimport { useEffect } from \"react\";\nimport * as socket from \"../socket/chat.socket\";\nimport * as chatAtom from \"../components/atom/ChatAtom\";\nimport { GetMyInfo, RefreshToken, LogOut } from \"../event/api.request\";\nimport { useNavigate } from \"react-router-dom\";\nimport GameInviteModal from \"../components/GamePage/GameInviteModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatPage() {\n  _s();\n  const [userInfoModal, setUserInfoModal] = useAtom(userInfoModalAtom);\n  const [roomModal, setRoomModal] = useAtom(roomModalAtom);\n  const [inviteModal, setInviteModal] = useAtom(inviteModalAtom);\n  const [pwInputModal, setPwInputModal] = useAtom(passwordInputModalAtom);\n  const [userInfo, setUserInfo] = useAtom(UserAtom);\n  const [isFirstLogin, setIsFirstLogin] = useAtom(chatAtom.isFirstLoginAtom);\n  const [hasLogin, setHasLogin] = useAtom(chatAtom.hasLoginAtom);\n  const [roomList, setRoomList] = useAtom(chatAtom.roomListAtom);\n  const [userList, setUserList] = useAtom(chatAtom.userListAtom);\n  const [dmHistoryList, setDmHistoryList] = useAtom(chatAtom.dmHistoryListAtom);\n  const [followingList, setFollowingList] = useAtom(chatAtom.followingListAtom);\n  const [blockList, setBlockList] = useAtom(chatAtom.blockListAtom);\n  const [focusRoom, setFocusRoom] = useAtom(chatAtom.focusRoomAtom);\n  const [socketState, setSocketState] = useAtom(chatAtom.socketStateAtom);\n  const navigate = useNavigate();\n  const [, setRefreshToken] = useAtom(refreshTokenAtom);\n  const [gameInviteModal, setGameInviteModal] = useAtom(gameInviteModalAtom);\n  const getRoomList = () => {\n    console.log(\"\\n\\ngetRoomList\");\n    Object.entries(roomList).forEach(_ref => {\n      let [key, value] = _ref;\n      if (value.detail !== undefined) {\n        console.log(`\\n[ ${value.roomName} : ${key}] - ${value.roomType}`);\n        Object.entries(value.detail).forEach(_ref2 => {\n          let [key, value] = _ref2;\n          if (key === \"userList\") {\n            Object.entries(value).forEach(_ref3 => {\n              let [key, value] = _ref3;\n              console.log(`uid: ${key}, value: ${JSON.stringify(value)}`);\n            });\n          } else {\n            console.log(`key: ${key}, value: ${JSON.stringify(value)}`);\n          }\n        });\n      } else {\n        console.log(`[ ${value.roomName} ] \\nvalue: ${JSON.stringify(value)}`);\n      }\n    });\n  };\n  const getUserList = () => {\n    console.log(\"\\n\\ngetUserList\");\n    Object.entries(userList).forEach(_ref4 => {\n      let [key, value] = _ref4;\n      console.log(`[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n    });\n  };\n  const getDMList = () => {\n    console.log(\"\\n\\ngetDmHitoryList\");\n    Object.entries(dmHistoryList).forEach(_ref5 => {\n      let [key, value] = _ref5;\n      console.log(`[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n    });\n  };\n  const getFollowingList = () => {\n    console.log(`\\n\\ngetFollowingList`);\n    Object.entries(followingList).forEach(_ref6 => {\n      let [key, value] = _ref6;\n      console.log(`[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n    });\n  };\n  const showSocketState = () => {\n    console.log(`socket state: ${socketState}`);\n  };\n  const getBlockList = () => {\n    console.log(`\\n\\ngetBlockList`);\n    Object.entries(blockList).forEach(_ref7 => {\n      let [key, value] = _ref7;\n      console.log(`[ ${userList[Number(key)].userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n    });\n  };\n  const showMyinfo = () => {\n    console.log(`showMyinfo ${JSON.stringify(userInfo)}}`);\n  };\n  const showServerUser = () => {\n    console.log(\"\\nshow server user list\");\n    socket.socket.emit(\"server-user-list\");\n  };\n  const showServerRoom = () => {\n    console.log(\"\\nshow server room list\");\n    socket.socket.emit(\"server-room-list\");\n  };\n  const logOutHandler = () => {\n    LogOut(setRefreshToken, navigate, \"/\");\n    setHasLogin(false);\n    setIsFirstLogin(true);\n  };\n  const quitRoomRelativeModal = () => {\n    setUserInfoModal(false);\n    setInviteModal(false);\n    // setRoomModal(false);\n    // setPwInputModal(false);\n  };\n\n  async function getMyinfoHandler() {\n    const getMeResponse = await GetMyInfo(setUserInfo);\n    if (getMeResponse == 401) {\n      const refreshResponse = await RefreshToken();\n      if (refreshResponse !== 201) {\n        logOutHandler();\n      } else {\n        const getMeResponse = await GetMyInfo(setUserInfo);\n        if (getMeResponse == 401) {\n          logOutHandler();\n        }\n      }\n    }\n  }\n  useEffect(() => {\n    socket.socket.onAny(function (eventName) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      console.log(\"incoming \", eventName, args);\n    });\n    // catch all outgoing events\n    socket.socket.onAnyOutgoing(function (eventName) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n      console.log(\"outgoing \", eventName, args);\n    });\n    socket.socket.on(\"connect\", () => {\n      if (socket.socket.connected) {\n        //This attribute describes whether the socket is currently connected to the server.\n        if (socket.socket.recovered) {\n          // any missed packets will be received\n        } else {\n          // new or unrecoverable session\n          console.log(\"socket connected : \" + socket.socket.id);\n        }\n      }\n      setSocketState(true);\n    });\n    //https://socket.io/docs/v4/client-socket-instance/#disconnect\n    socket.socket.on(\"disconnect\", reason => {\n      console.log(\"socket disconnected reason: \" + reason);\n      /**\n       *  BAD, will throw an error\n       *  socket.emit(\"disconnect\");\n      */\n      if (reason === \"io server disconnect\") {\n        // the disconnection was initiated by the server, you need to reconnect manually\n        console.log('socket disconnected by server');\n      }\n      // else the socket will automatically try to reconnect\n      console.log(\"socket disconnected\");\n      setSocketState(false);\n    });\n    // the connection is denied by the server in a middleware function\n    socket.socket.on(\"connect_error\", err => {\n      if (err.message === \"unauthorized\") {\n        // handle each case\n      }\n      console.log(err.message); // prints the message associated with the error\n    });\n\n    socket.socket.on(\"multiple-login\", () => {\n      // \talert(`multiple login detected!`);\n      LogOut(setRefreshToken, navigate, \"/\");\n      setHasLogin(false);\n      setIsFirstLogin(true);\n    });\n    return () => {\n      socket.socket.off(\"connect\");\n      socket.socket.off(\"disconnect\");\n      socket.socket.off(\"connect_error\");\n      socket.socket.offAny();\n      socket.socket.offAnyOutgoing();\n      socket.socket.off(\"multiple-login\");\n    };\n  }, []);\n  useEffect(() => {\n    socket.socket.on(\"logout\", () => {\n      LogOut(setRefreshToken, navigate, \"/\");\n      setHasLogin(false);\n      setIsFirstLogin(true);\n    });\n    return () => {\n      socket.socket.off(\"logout\");\n    };\n  }, []);\n  useEffect(() => {\n    socket.socket.on(\"dm-list\", (resDmUserList, mergeDmList) => {\n      const tempDmRoomList = {};\n      setDmHistoryList({\n        ...resDmUserList\n      });\n      setUserList(prevUserList => ({\n        ...prevUserList,\n        ...resDmUserList\n      }));\n      Object.entries(resDmUserList).forEach(_ref8 => {\n        let [dmUser] = _ref8;\n        tempDmRoomList[Number(dmUser)] = {\n          roomName: 'DM',\n          roomType: 'dm',\n          isJoined: true,\n          detail: {\n            userList: {\n              [Number(dmUser)]: {\n                userRoomPower: 'member',\n                userRoomStatus: 'normal'\n              },\n              [userInfo.uid]: {\n                userRoomPower: 'member',\n                userRoomStatus: 'normal'\n              }\n            },\n            messageList: [],\n            myRoomStatus: 'normal',\n            myRoomPower: 'member'\n          }\n        };\n      });\n      Object.entries(mergeDmList).forEach(atom => {\n        if (Number(atom[1].senderId) === userInfo.uid) {\n          var _tempDmRoomList$Numbe, _atom$, _atom$2, _atom$3, _tempDmRoomList$Numbe2, _atom$4;\n          // from me\n          const tempMessageList = (_tempDmRoomList$Numbe = tempDmRoomList[Number((_atom$ = atom[1]) === null || _atom$ === void 0 ? void 0 : _atom$.receiverId)].detail) === null || _tempDmRoomList$Numbe === void 0 ? void 0 : _tempDmRoomList$Numbe.messageList;\n          tempMessageList === null || tempMessageList === void 0 ? void 0 : tempMessageList.unshift({\n            userId: userInfo.uid,\n            userName: userInfo.nickname,\n            message: (_atom$2 = atom[1]) === null || _atom$2 === void 0 ? void 0 : _atom$2.message,\n            isMe: true,\n            number: tempMessageList.length\n          });\n          tempDmRoomList[Number((_atom$3 = atom[1]) === null || _atom$3 === void 0 ? void 0 : _atom$3.receiverId)] = {\n            roomName: 'DM',\n            roomType: 'dm',\n            isJoined: true,\n            detail: {\n              userList: {\n                ...((_tempDmRoomList$Numbe2 = tempDmRoomList[Number((_atom$4 = atom[1]) === null || _atom$4 === void 0 ? void 0 : _atom$4.receiverId)].detail) === null || _tempDmRoomList$Numbe2 === void 0 ? void 0 : _tempDmRoomList$Numbe2.userList)\n              },\n              myRoomPower: 'member',\n              myRoomStatus: 'normal',\n              messageList: tempMessageList\n            }\n          };\n        } else {\n          var _tempDmRoomList$Numbe3, _tempDmRoomList$Numbe4, _atom$5, _atom$6, _resDmUserList$Number, _atom$7, _atom$8, _atom$9, _tempDmRoomList$Numbe5, _tempDmRoomList$Numbe6, _atom$10;\n          // to me\n          if (atom[1].blockFromReceiver) {\n            return;\n          }\n          const tempMessageList = (_tempDmRoomList$Numbe3 = tempDmRoomList[Number((_atom$5 = atom[1]) === null || _atom$5 === void 0 ? void 0 : _atom$5.senderId)]) === null || _tempDmRoomList$Numbe3 === void 0 ? void 0 : (_tempDmRoomList$Numbe4 = _tempDmRoomList$Numbe3.detail) === null || _tempDmRoomList$Numbe4 === void 0 ? void 0 : _tempDmRoomList$Numbe4.messageList;\n          tempMessageList === null || tempMessageList === void 0 ? void 0 : tempMessageList.unshift({\n            userId: Number((_atom$6 = atom[1]) === null || _atom$6 === void 0 ? void 0 : _atom$6.senderId),\n            userName: (_resDmUserList$Number = resDmUserList[Number((_atom$7 = atom[1]) === null || _atom$7 === void 0 ? void 0 : _atom$7.senderId)]) === null || _resDmUserList$Number === void 0 ? void 0 : _resDmUserList$Number.userDisplayName,\n            message: (_atom$8 = atom[1]) === null || _atom$8 === void 0 ? void 0 : _atom$8.message,\n            isMe: false,\n            number: tempMessageList.length\n          });\n          tempDmRoomList[Number((_atom$9 = atom[1]) === null || _atom$9 === void 0 ? void 0 : _atom$9.senderId)] = {\n            roomName: 'DM',\n            roomType: 'dm',\n            isJoined: true,\n            detail: {\n              userList: {\n                ...((_tempDmRoomList$Numbe5 = tempDmRoomList[Number((_atom$10 = atom[1]) === null || _atom$10 === void 0 ? void 0 : _atom$10.senderId)]) === null || _tempDmRoomList$Numbe5 === void 0 ? void 0 : (_tempDmRoomList$Numbe6 = _tempDmRoomList$Numbe5.detail) === null || _tempDmRoomList$Numbe6 === void 0 ? void 0 : _tempDmRoomList$Numbe6.userList)\n              },\n              myRoomPower: 'member',\n              myRoomStatus: 'normal',\n              messageList: tempMessageList\n            }\n          };\n        }\n      });\n      setRoomList(prevRoomList => ({\n        ...prevRoomList,\n        ...tempDmRoomList\n      }));\n    });\n    return () => {\n      socket.socket.off(\"dm-list\");\n    };\n  }, [userInfo, roomList, dmHistoryList, userList]);\n  useEffect(() => {\n    socket.socket.on(\"room-list\", resRoomList => {\n      setRoomList(prevRoomList => ({\n        ...prevRoomList,\n        ...resRoomList\n      }));\n    });\n    socket.socket.on(\"follow-list\", resFollowingList => {\n      setFollowingList({\n        ...resFollowingList\n      });\n      setUserList(prevUserList => ({\n        ...resFollowingList,\n        ...prevUserList\n      }));\n    });\n    socket.socket.on(\"block-list\", resBlockList => {\n      setBlockList({\n        ...resBlockList\n      });\n    });\n    socket.socket.on(\"user-list\", resUserList => {\n      setUserList(prevUserList => ({\n        ...prevUserList,\n        ...resUserList\n      }));\n    });\n    return () => {\n      socket.socket.off(\"room-list\");\n      socket.socket.off(\"follow-list\");\n      socket.socket.off(\"block-list\");\n      socket.socket.off(\"user-list\");\n    };\n  }, [userList, roomList, followingList, blockList]);\n  useEffect(() => {\n    socket.socket.on(\"room-list-update\", _ref9 => {\n      let {\n        action,\n        roomId,\n        roomName,\n        roomType\n      } = _ref9;\n      switch (action) {\n        case 'new':\n          {\n            const newRoomList = {};\n            newRoomList[roomId] = {\n              roomName,\n              roomType,\n              isJoined: false\n            };\n            console.log(`room-list-update new: ${JSON.stringify(newRoomList)}`);\n            console.log(`room-list-update origin: ${JSON.stringify(roomList)}`);\n            setRoomList({\n              ...roomList,\n              ...newRoomList\n            });\n            break;\n          }\n        case 'delete':\n          {\n            const newRoomList = {\n              ...roomList\n            };\n            delete newRoomList[roomId];\n            setRoomList({\n              ...newRoomList\n            });\n            if (focusRoom == roomId) {\n              setFocusRoom(-1);\n            }\n            break;\n          }\n        case 'edit':\n          {\n            var _roomList$roomId;\n            const newRoomList = {};\n            newRoomList[roomId] = {\n              roomName,\n              roomType,\n              isJoined: (_roomList$roomId = roomList[roomId]) === null || _roomList$roomId === void 0 ? void 0 : _roomList$roomId.isJoined,\n              detail: roomList[roomId].detail || {}\n            };\n            setRoomList({\n              ...roomList,\n              ...newRoomList\n            });\n            break;\n          }\n      }\n    });\n    return () => {\n      socket.socket.off(\"room-list-update\");\n    };\n  }, [roomList, focusRoom]);\n  useEffect(() => {\n    socket.socket.on(\"room-clear\", () => {\n      quitRoomRelativeModal();\n      setRoomList({});\n      setFocusRoom(-1);\n    });\n    socket.socket.on(\"user-clear\", () => {\n      setUserList({});\n    });\n    return () => {\n      socket.socket.off(\"room-clear\");\n      socket.socket.off(\"user-clear\");\n    };\n  }, [roomList, userList, setRoomList, setUserList]);\n  useEffect(() => {\n    socket.socket.on(\"room-join\", _ref10 => {\n      let {\n        roomId,\n        roomName,\n        roomType,\n        userList = {},\n        myPower,\n        status,\n        method = ''\n      } = _ref10;\n      switch (status) {\n        case 'ok':\n          {\n            console.log(`join [${roomName}]room`);\n            const newRoomList = {};\n            newRoomList[roomId] = {\n              roomName,\n              roomType,\n              isJoined: true,\n              detail: {\n                userList: {\n                  ...userList\n                },\n                messageList: [],\n                myRoomStatus: 'normal',\n                myRoomPower: myPower\n              }\n            };\n            console.log(`room - join new: ${JSON.stringify(newRoomList)}`);\n            setRoomList({\n              ...roomList,\n              ...newRoomList\n            });\n            if (method !== 'invite') {\n              setFocusRoom(roomId);\n            }\n            break;\n          }\n        case 'ko':\n          {\n            if (roomList[roomId].isJoined === false) {\n              alert(`fail to join[${roomName}]room`);\n            }\n            break;\n          }\n      }\n    });\n    return () => {\n      socket.socket.off(\"room-join\");\n    };\n  }, [roomList]);\n  useEffect(() => {\n    socket.socket.on(\"room-in-action\", _ref11 => {\n      var _roomList$roomId2;\n      let {\n        roomId,\n        action,\n        targetId\n      } = _ref11;\n      if (((_roomList$roomId2 = roomList[roomId]) === null || _roomList$roomId2 === void 0 ? void 0 : _roomList$roomId2.isJoined) !== true) {\n        return;\n      }\n      switch (action) {\n        case 'newMember':\n          {\n            if (targetId === userInfo.uid) {\n              return;\n            } else {\n              var _roomList$roomId$deta;\n              const newUser = {};\n              newUser[targetId] = {\n                userRoomStatus: 'normal',\n                userRoomPower: 'member'\n              };\n              const newUserList = {\n                ...((_roomList$roomId$deta = roomList[roomId].detail) === null || _roomList$roomId$deta === void 0 ? void 0 : _roomList$roomId$deta.userList),\n                ...newUser\n              };\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              });\n            }\n            break;\n          }\n        case 'ban':\n        case 'leave':\n        case 'kick':\n          {\n            if (targetId === userInfo.uid) {\n              if (roomList[roomId].roomType === 'private') {\n                const newRoomList = {\n                  ...roomList\n                };\n                delete newRoomList[roomId];\n                setRoomList({\n                  ...newRoomList\n                });\n              } else {\n                const newRoomList = {};\n                newRoomList[roomId] = {\n                  roomName: roomList[roomId].roomName,\n                  roomType: roomList[roomId].roomType,\n                  isJoined: false\n                };\n                setRoomList({\n                  ...roomList,\n                  ...newRoomList\n                });\n              }\n              if (focusRoom === roomId) {\n                setFocusRoom(-1);\n                quitRoomRelativeModal();\n              }\n            } else {\n              var _roomList$roomId$deta2;\n              const newUserList = (_roomList$roomId$deta2 = roomList[roomId].detail) === null || _roomList$roomId$deta2 === void 0 ? void 0 : _roomList$roomId$deta2.userList;\n              delete newUserList[targetId];\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              });\n            }\n            break;\n          }\n        case 'mute':\n        case 'normal':\n          {\n            if (targetId === userInfo.uid) {\n              var _roomList$roomId$deta3, _roomList$roomId$deta4;\n              if (action === 'mute' && ((_roomList$roomId$deta3 = roomList[roomId].detail) === null || _roomList$roomId$deta3 === void 0 ? void 0 : _roomList$roomId$deta3.myRoomStatus) === 'mute') {\n                return;\n              }\n              const newUserList = (_roomList$roomId$deta4 = roomList[roomId].detail) === null || _roomList$roomId$deta4 === void 0 ? void 0 : _roomList$roomId$deta4.userList;\n              newUserList[targetId] = {\n                ...newUserList[targetId],\n                userRoomStatus: action\n              };\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              }, action);\n            } else {\n              var _roomList$roomId$deta5;\n              const newUserList = (_roomList$roomId$deta5 = roomList[roomId].detail) === null || _roomList$roomId$deta5 === void 0 ? void 0 : _roomList$roomId$deta5.userList;\n              newUserList[targetId] = {\n                ...newUserList[targetId],\n                userRoomStatus: action\n              };\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              });\n            }\n            break;\n          }\n        case 'owner':\n        case 'admin':\n          {\n            if (targetId === userInfo.uid) {\n              var _roomList$roomId$deta6;\n              const newUserList = (_roomList$roomId$deta6 = roomList[roomId].detail) === null || _roomList$roomId$deta6 === void 0 ? void 0 : _roomList$roomId$deta6.userList;\n              newUserList[targetId] = {\n                ...newUserList[targetId],\n                userRoomPower: action\n              };\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              }, undefined, action);\n            } else {\n              var _roomList$roomId$deta7;\n              const newUserList = (_roomList$roomId$deta7 = roomList[roomId].detail) === null || _roomList$roomId$deta7 === void 0 ? void 0 : _roomList$roomId$deta7.userList;\n              newUserList[targetId] = {\n                ...newUserList[targetId],\n                userRoomPower: action\n              };\n              socket.setNewDetailToNewRoom({\n                roomList,\n                setRoomList,\n                roomId,\n                newUserList\n              });\n            }\n            break;\n          }\n      }\n    });\n    return () => {\n      socket.socket.off(\"room-in-action\");\n    };\n  }, [roomList, userInfo, focusRoom]);\n  useEffect(() => {\n    socket.socket.on(\"user-update\", _ref12 => {\n      let {\n        userId,\n        userDisplayName,\n        userProfileUrl,\n        userStatus\n      } = _ref12;\n      const newUser = {};\n      newUser[userId] = {\n        userDisplayName,\n        userProfileUrl,\n        userStatus\n      };\n      console.log(`user-update: ${userDisplayName}: ${userStatus}`);\n      setUserList(prevUserList => ({\n        ...prevUserList,\n        ...newUser\n      }));\n    });\n    return () => {\n      socket.socket.off(\"user-update\");\n    };\n  }, [userList, isFirstLogin]);\n  useEffect(() => {\n    socket.socket.on(\"message\", _ref13 => {\n      let {\n        roomId,\n        from,\n        message\n      } = _ref13;\n      const block = blockList[from] ? true : false;\n      switch (block) {\n        case true:\n          {\n            console.log(`message from ${from} is blocked`);\n            break;\n          }\n        case false:\n          {\n            var _roomList$roomId$deta8, _roomList$roomId$deta9;\n            console.log(`message from ${from} is received: ${message}`);\n            const newMessageList = (_roomList$roomId$deta8 = roomList[roomId].detail) === null || _roomList$roomId$deta8 === void 0 ? void 0 : _roomList$roomId$deta8.messageList;\n            newMessageList.unshift({\n              userId: from,\n              userName: userList[from].userDisplayName,\n              message,\n              isMe: userInfo.uid === from ? true : false,\n              number: (_roomList$roomId$deta9 = roomList[roomId].detail) === null || _roomList$roomId$deta9 === void 0 ? void 0 : _roomList$roomId$deta9.messageList.length\n            });\n            const newDetail = {\n              ...roomList[roomId].detail,\n              messageList: [...newMessageList]\n            };\n            const newRoomList = {};\n            newRoomList[roomId] = {\n              roomName: roomList[roomId].roomName,\n              roomType: roomList[roomId].roomType,\n              isJoined: roomList[roomId].isJoined,\n              detail: newDetail\n            };\n            if (roomList[roomId].roomType === 'dm' && focusRoom !== roomId) {\n              const newDmUser = {};\n              newDmUser[roomId] = {\n                userDisplayName: userList[roomId].userDisplayName,\n                userProfileUrl: userList[roomId].userProfileUrl,\n                userStatus: userList[roomId].userStatus,\n                dmStatus: 'unread'\n              };\n              setUserList({\n                ...userList,\n                ...newDmUser\n              });\n            }\n            setRoomList({\n              ...roomList,\n              ...newRoomList\n            });\n            break;\n          }\n      }\n    });\n    return () => {\n      socket.socket.off(\"message\");\n    };\n  }, [roomList, blockList, userList, userInfo, focusRoom]);\n  async function firstLogin() {\n    if (isFirstLogin) {\n      await getMyinfoHandler();\n      socket.socket.connect();\n    }\n    setIsFirstLogin(false);\n  }\n  if (isFirstLogin) {\n    firstLogin();\n  }\n  return /*#__PURE__*/_jsxDEV(BackGround, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: getMyinfoHandler,\n      children: \" /user/me\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: showMyinfo,\n      children: \" show /user/me\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 638,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: getRoomList,\n      children: \" roomList\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 639,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: getUserList,\n      children: \" userList\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 640,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: getDMList,\n      children: \" dmHistoryList\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 641,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: getFollowingList,\n      children: \" FollowList\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 642,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: showServerUser,\n      children: \" show server user\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: showServerRoom,\n      children: \" show server room\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 644,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: showSocketState,\n      children: \" socket state\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setGameInviteModal(true),\n      children: \" gameinvite\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(TopBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 4\n    }, this), userInfoModal ? /*#__PURE__*/_jsxDEV(UserInfoModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 648,\n      columnNumber: 21\n    }, this) : null, roomModal ? /*#__PURE__*/_jsxDEV(RoomModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 649,\n      columnNumber: 17\n    }, this) : null, inviteModal ? /*#__PURE__*/_jsxDEV(RoomInviteModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 650,\n      columnNumber: 19\n    }, this) : null, pwInputModal ? /*#__PURE__*/_jsxDEV(PasswordModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 651,\n      columnNumber: 20\n    }, this) : null, gameInviteModal ? /*#__PURE__*/_jsxDEV(GameInviteModal, {\n      from: \"yuhwang\",\n      AcceptBtn: () => {\n        setGameInviteModal(false);\n      },\n      DeclineBtn: () => {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 5\n    }, this) : null, /*#__PURE__*/_jsxDEV(ChatRoomList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ChatUserList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ChatArea, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 663,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ChatRoomUserList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 664,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 636,\n    columnNumber: 3\n  }, this);\n}\n_s(ChatPage, \"1v8FOYbkw++1D+ZRvBuSY/d4gfY=\", false, function () {\n  return [useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useAtom, useNavigate, useAtom, useAtom];\n});\n_c = ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["BackGround","TopBar","ChatRoomList","ChatUserList","ChatArea","ChatRoomUserList","useAtom","userInfoModalAtom","passwordInputModalAtom","roomModalAtom","inviteModalAtom","gameInviteModalAtom","UserInfoModal","RoomModal","RoomInviteModal","PasswordModal","refreshTokenAtom","UserAtom","useEffect","socket","chatAtom","GetMyInfo","RefreshToken","LogOut","useNavigate","GameInviteModal","jsxDEV","_jsxDEV","ChatPage","_s","userInfoModal","setUserInfoModal","roomModal","setRoomModal","inviteModal","setInviteModal","pwInputModal","setPwInputModal","userInfo","setUserInfo","isFirstLogin","setIsFirstLogin","isFirstLoginAtom","hasLogin","setHasLogin","hasLoginAtom","roomList","setRoomList","roomListAtom","userList","setUserList","userListAtom","dmHistoryList","setDmHistoryList","dmHistoryListAtom","followingList","setFollowingList","followingListAtom","blockList","setBlockList","blockListAtom","focusRoom","setFocusRoom","focusRoomAtom","socketState","setSocketState","socketStateAtom","navigate","setRefreshToken","gameInviteModal","setGameInviteModal","getRoomList","console","log","Object","entries","forEach","_ref","key","value","detail","undefined","roomName","roomType","_ref2","_ref3","JSON","stringify","getUserList","_ref4","userDisplayName","getDMList","_ref5","getFollowingList","_ref6","showSocketState","getBlockList","_ref7","Number","showMyinfo","showServerUser","emit","showServerRoom","logOutHandler","quitRoomRelativeModal","getMyinfoHandler","getMeResponse","refreshResponse","onAny","eventName","_len","arguments","length","args","Array","_key","onAnyOutgoing","_len2","_key2","on","connected","recovered","id","reason","err","message","off","offAny","offAnyOutgoing","resDmUserList","mergeDmList","tempDmRoomList","prevUserList","_ref8","dmUser","isJoined","userRoomPower","userRoomStatus","uid","messageList","myRoomStatus","myRoomPower","atom","senderId","_tempDmRoomList$Numbe","_atom$","_atom$2","_atom$3","_tempDmRoomList$Numbe2","_atom$4","tempMessageList","receiverId","unshift","userId","userName","nickname","isMe","number","_tempDmRoomList$Numbe3","_tempDmRoomList$Numbe4","_atom$5","_atom$6","_resDmUserList$Number","_atom$7","_atom$8","_atom$9","_tempDmRoomList$Numbe5","_tempDmRoomList$Numbe6","_atom$10","blockFromReceiver","prevRoomList","resRoomList","resFollowingList","resBlockList","resUserList","_ref9","action","roomId","newRoomList","_roomList$roomId","_ref10","myPower","status","method","alert","_ref11","_roomList$roomId2","targetId","_roomList$roomId$deta","newUser","newUserList","setNewDetailToNewRoom","_roomList$roomId$deta2","_roomList$roomId$deta3","_roomList$roomId$deta4","_roomList$roomId$deta5","_roomList$roomId$deta6","_roomList$roomId$deta7","_ref12","userProfileUrl","userStatus","_ref13","from","block","_roomList$roomId$deta8","_roomList$roomId$deta9","newMessageList","newDetail","newDmUser","dmStatus","firstLogin","connect","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","AcceptBtn","DeclineBtn","_c","$RefreshReg$"],"sources":["/data/front/src/pages/ChatPage.tsx"],"sourcesContent":["import BackGround from \"../components/BackGround\";\nimport TopBar from \"../components/TopBar\";\nimport ChatRoomList from \"../components/ChatPage/ChatRoomList\";\nimport ChatUserList from \"../components/ChatPage/ChatUserList\";\nimport ChatArea from \"../components/ChatPage/ChatArea\";\nimport ChatRoomUserList from \"../components/ChatPage/ChatRoomUserList\";\n\nimport { useAtom } from \"jotai\";\nimport {\n\tuserInfoModalAtom,\n\tpasswordInputModalAtom,\n\troomModalAtom,\n\tinviteModalAtom,\n\tgameInviteModalAtom,\n} from \"../components/atom/ModalAtom\";\n\nimport UserInfoModal from \"../components/ChatPage/UserInfoModal\";\nimport RoomModal from \"../components/ChatPage/RoomModal\";\nimport RoomInviteModal from \"../components/ChatPage/RoomInviteModal\";\nimport PasswordModal from \"../components/ChatPage/PasswordModal\";\n\nimport { refreshTokenAtom } from \"../components/atom/LoginAtom\";\nimport { UserAtom } from \"../components/atom/UserAtom\";\nimport type * as userType from \"../components/atom/UserAtom\";\nimport { useEffect, useState } from \"react\";\n\nimport * as socket from \"../socket/chat.socket\";\nimport * as chatAtom from \"../components/atom/ChatAtom\";\nimport type * as chatType from \"../socket/chat.dto\";\nimport { GetMyInfo, RefreshToken, LogOut } from \"../event/api.request\";\nimport { useNavigate } from \"react-router-dom\";\nimport GameInviteModal from \"../components/GamePage/GameInviteModal\";\n\nexport default function ChatPage() {\n\tconst [userInfoModal, setUserInfoModal] = useAtom(userInfoModalAtom);\n\tconst [roomModal, setRoomModal] = useAtom(roomModalAtom);\n\tconst [inviteModal, setInviteModal] = useAtom(inviteModalAtom);\n\tconst [pwInputModal, setPwInputModal] = useAtom(passwordInputModalAtom);\n\n\tconst [userInfo, setUserInfo] = useAtom(UserAtom);\n\tconst [isFirstLogin, setIsFirstLogin] = useAtom(chatAtom.isFirstLoginAtom);\n\tconst [hasLogin, setHasLogin] = useAtom(chatAtom.hasLoginAtom);\n\n\tconst [roomList, setRoomList] = useAtom(chatAtom.roomListAtom);\n\tconst [userList, setUserList] = useAtom(chatAtom.userListAtom);\n\tconst [dmHistoryList, setDmHistoryList] = useAtom(chatAtom.dmHistoryListAtom);\n\tconst [followingList, setFollowingList] = useAtom(chatAtom.followingListAtom);\n\tconst [blockList, setBlockList] = useAtom(chatAtom.blockListAtom);\n\tconst [focusRoom, setFocusRoom] = useAtom(chatAtom.focusRoomAtom);\n\tconst [socketState, setSocketState] = useAtom(chatAtom.socketStateAtom);\n\n\tconst navigate = useNavigate();\n\tconst [, setRefreshToken] = useAtom(refreshTokenAtom);\n\n\tconst [gameInviteModal, setGameInviteModal] = useAtom(gameInviteModalAtom);\n\n\tconst getRoomList = () => {\n\t\tconsole.log(\"\\n\\ngetRoomList\");\n\t\tObject.entries(roomList).forEach(([key, value]) => {\n\t\t\tif (value.detail !== undefined) {\n\t\t\t\tconsole.log(`\\n[ ${value.roomName} : ${key}] - ${value.roomType}`);\n\t\t\t\tObject.entries(value.detail).forEach(([key, value]) => {\n\t\t\t\t\tif (key === \"userList\") {\n\t\t\t\t\t\tObject.entries(value).forEach(([key, value]) => {\n\t\t\t\t\t\t\tconsole.log(`uid: ${key}, value: ${JSON.stringify(value)}`);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(`key: ${key}, value: ${JSON.stringify(value)}`);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log(`[ ${value.roomName} ] \\nvalue: ${JSON.stringify(value)}`);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst getUserList = () => {\n\t\tconsole.log(\"\\n\\ngetUserList\");\n\t\tObject.entries(userList).forEach(([key, value]) => {\n\t\t\tconsole.log(`[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n\t\t});\n\t};\n\n\tconst getDMList = () => {\n\t\tconsole.log(\"\\n\\ngetDmHitoryList\");\n\t\tObject.entries(dmHistoryList).forEach(([key, value]) => {\n\t\t\tconsole.log(`[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n\t\t});\n\t};\n\n\tconst getFollowingList = () => {\n\t\tconsole.log(`\\n\\ngetFollowingList`);\n\t\tObject.entries(followingList).forEach(([key, value]) => {\n\t\t\tconsole.log(`[ ${value.userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n\t\t});\n\t};\n\n\tconst showSocketState = () => {\n\t\tconsole.log(`socket state: ${socketState}`);\n\t};\n\n\n\tconst getBlockList = () => {\n\t\tconsole.log(`\\n\\ngetBlockList`);\n\t\tObject.entries(blockList).forEach(([key, value]) => {\n\t\t\tconsole.log(`[ ${userList[Number(key)].userDisplayName} ]\\nkey: ${key}, value: ${JSON.stringify(value)}`);\n\t\t});\n\n\t};\n\n\tconst showMyinfo = () => {\n\t\tconsole.log(`showMyinfo ${JSON.stringify(userInfo)}}`);\n\t};\n\n\tconst showServerUser = () => {\n\t\tconsole.log(\"\\nshow server user list\");\n\t\tsocket.socket.emit(\"server-user-list\");\n\t};\n\n\tconst showServerRoom = () => {\n\t\tconsole.log(\"\\nshow server room list\");\n\t\tsocket.socket.emit(\"server-room-list\");\n\t};\n\n\tconst logOutHandler = () => {\n\t\tLogOut(setRefreshToken, navigate, \"/\");\n\t\tsetHasLogin(false);\n\t\tsetIsFirstLogin(true);\n\t};\n\n\tconst quitRoomRelativeModal = () => {\n\t\tsetUserInfoModal(false);\n\t\tsetInviteModal(false);\n\t\t// setRoomModal(false);\n\t\t// setPwInputModal(false);\n\t}\n\n\tasync function getMyinfoHandler() {\n\t\tconst getMeResponse = await GetMyInfo(setUserInfo);\n\t\tif (getMeResponse == 401) {\n\t\t\tconst refreshResponse = await RefreshToken();\n\t\t\tif (refreshResponse !== 201) {\n\t\t\t\tlogOutHandler();\n\t\t\t} else {\n\t\t\t\tconst getMeResponse = await GetMyInfo(setUserInfo);\n\t\t\t\tif (getMeResponse == 401) {\n\t\t\t\t\tlogOutHandler();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\tuseEffect(() => {\n\t\tsocket.socket.onAny((eventName, ...args) => {\n\t\t\tconsole.log(\"incoming \", eventName, args);\n\t\t});\n\t\t// catch all outgoing events\n\t\tsocket.socket.onAnyOutgoing((eventName, ...args) => {\n\t\t\tconsole.log(\"outgoing \", eventName, args);\n\t\t});\n\t\tsocket.socket.on(\"connect\", () => {\n\t\t\tif (socket.socket.connected) {\n\t\t\t\t//This attribute describes whether the socket is currently connected to the server.\n\t\t\t\tif (socket.socket.recovered) {\n\t\t\t\t\t// any missed packets will be received\n\t\t\t\t} else {\n\t\t\t\t\t// new or unrecoverable session\n\t\t\t\t\tconsole.log(\"socket connected : \" + socket.socket.id);\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetSocketState(true);\n\t\t});\n\t\t//https://socket.io/docs/v4/client-socket-instance/#disconnect\n\t\tsocket.socket.on(\"disconnect\", (reason) => {\n\t\t\tconsole.log(\"socket disconnected reason: \" + reason);\n\t\t\t/**\n\t\t\t *  BAD, will throw an error\n\t\t\t *  socket.emit(\"disconnect\");\n\t\t\t*/\n\t\t\tif (reason === \"io server disconnect\") {\n\t\t\t\t// the disconnection was initiated by the server, you need to reconnect manually\n\t\t\t\tconsole.log('socket disconnected by server');\n\t\t\t}\n\t\t\t// else the socket will automatically try to reconnect\n\t\t\tconsole.log(\"socket disconnected\");\n\t\t\tsetSocketState(false);\n\t\t});\n\t\t// the connection is denied by the server in a middleware function\n\t\tsocket.socket.on(\"connect_error\", (err) => {\n\t\t\tif (err.message === \"unauthorized\") {\n\t\t\t\t// handle each case\n\t\t\t}\n\t\t\tconsole.log(err.message); // prints the message associated with the error\n\t\t});\n\t\tsocket.socket.on(\"multiple-login\", () => {\n\t\t\t// \talert(`multiple login detected!`);\n\t\t\tLogOut(setRefreshToken, navigate, \"/\");\n\t\t\tsetHasLogin(false);\n\t\t\tsetIsFirstLogin(true);\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"connect\");\n\t\t\tsocket.socket.off(\"disconnect\");\n\t\t\tsocket.socket.off(\"connect_error\");\n\t\t\tsocket.socket.offAny();\n\t\t\tsocket.socket.offAnyOutgoing();\n\t\t\tsocket.socket.off(\"multiple-login\");\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"logout\", () => {\n\t\t\tLogOut(setRefreshToken, navigate, \"/\");\n\t\t\tsetHasLogin(false);\n\t\t\tsetIsFirstLogin(true);\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"logout\");\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"dm-list\", (resDmUserList, mergeDmList) => {\n\t\t\tconst tempDmRoomList: chatType.roomListDto = {};\n\n\t\t\tsetDmHistoryList({ ...resDmUserList });\n\t\t\tsetUserList((prevUserList) => ({ ...prevUserList, ...resDmUserList }));\n\t\t\tObject.entries(resDmUserList).forEach(([dmUser]) => {\n\t\t\t\ttempDmRoomList[Number(dmUser)] = {\n\t\t\t\t\troomName: 'DM',\n\t\t\t\t\troomType: 'dm',\n\t\t\t\t\tisJoined: true,\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tuserList: {\n\t\t\t\t\t\t\t[Number(dmUser)]: {\n\t\t\t\t\t\t\t\tuserRoomPower: 'member',\n\t\t\t\t\t\t\t\tuserRoomStatus: 'normal',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t[userInfo.uid]: {\n\t\t\t\t\t\t\t\tuserRoomPower: 'member',\n\t\t\t\t\t\t\t\tuserRoomStatus: 'normal',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmessageList: [],\n\t\t\t\t\t\tmyRoomStatus: 'normal',\n\t\t\t\t\t\tmyRoomPower: 'member'\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tObject.entries(mergeDmList).forEach((atom: any[]) => {\n\t\t\t\tif (Number(atom[1].senderId!) === userInfo.uid) { // from me\n\t\t\t\t\tconst tempMessageList: chatType.roomMessageDto[] = tempDmRoomList[Number(atom[1]?.receiverId!)].detail?.messageList!;\n\t\t\t\t\ttempMessageList?.unshift({\n\t\t\t\t\t\tuserId: userInfo.uid,\n\t\t\t\t\t\tuserName: userInfo.nickname,\n\t\t\t\t\t\tmessage: atom[1]?.message!,\n\t\t\t\t\t\tisMe: true,\n\t\t\t\t\t\tnumber: tempMessageList.length\n\t\t\t\t\t});\n\t\t\t\t\ttempDmRoomList[Number(atom[1]?.receiverId!)] = {\n\t\t\t\t\t\troomName: 'DM',\n\t\t\t\t\t\troomType: 'dm',\n\t\t\t\t\t\tisJoined: true,\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tuserList: { ...tempDmRoomList[Number(atom[1]?.receiverId!)].detail?.userList },\n\t\t\t\t\t\t\tmyRoomPower: 'member',\n\t\t\t\t\t\t\tmyRoomStatus: 'normal',\n\t\t\t\t\t\t\tmessageList: tempMessageList\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else { // to me\n\t\t\t\t\tif (atom[1].blockFromReceiver) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst tempMessageList: chatType.roomMessageDto[] = tempDmRoomList[Number(atom[1]?.senderId!)]?.detail?.messageList!;\n\t\t\t\t\ttempMessageList?.unshift({\n\t\t\t\t\t\tuserId: Number(atom[1]?.senderId!),\n\t\t\t\t\t\tuserName: resDmUserList[Number(atom[1]?.senderId!)]?.userDisplayName,\n\t\t\t\t\t\tmessage: atom[1]?.message!,\n\t\t\t\t\t\tisMe: false,\n\t\t\t\t\t\tnumber: tempMessageList.length\n\t\t\t\t\t});\n\t\t\t\t\ttempDmRoomList[Number(atom[1]?.senderId!)] = {\n\t\t\t\t\t\troomName: 'DM',\n\t\t\t\t\t\troomType: 'dm',\n\t\t\t\t\t\tisJoined: true,\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tuserList: { ...tempDmRoomList[Number(atom[1]?.senderId!)]?.detail?.userList },\n\t\t\t\t\t\t\tmyRoomPower: 'member',\n\t\t\t\t\t\t\tmyRoomStatus: 'normal',\n\t\t\t\t\t\t\tmessageList: tempMessageList\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetRoomList((prevRoomList) => ({ ...prevRoomList, ...tempDmRoomList }));\n\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"dm-list\");\n\t\t};\n\t}, [userInfo, roomList, dmHistoryList, userList]);\n\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"room-list\", (resRoomList: chatType.roomListDto) => {\n\t\t\tsetRoomList((prevRoomList) => ({ ...prevRoomList, ...resRoomList }));\n\t\t});\n\t\tsocket.socket.on(\"follow-list\", (resFollowingList: chatType.userDto) => {\n\t\t\tsetFollowingList({ ...resFollowingList });\n\t\t\tsetUserList((prevUserList) => ({ ...resFollowingList, ...prevUserList }));\n\t\t});\n\t\tsocket.socket.on(\"block-list\", (resBlockList: chatType.userSimpleDto) => {\n\t\t\tsetBlockList({ ...resBlockList });\n\t\t});\n\t\tsocket.socket.on(\"user-list\", (resUserList: chatType.userDto) => {\n\t\t\tsetUserList((prevUserList) => ({ ...prevUserList, ...resUserList }))\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"room-list\");\n\t\t\tsocket.socket.off(\"follow-list\");\n\t\t\tsocket.socket.off(\"block-list\");\n\t\t\tsocket.socket.off(\"user-list\");\n\t\t}\n\t}, [userList, roomList, followingList, blockList]);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"room-list-update\", ({\n\t\t\taction,\n\t\t\troomId,\n\t\t\troomName,\n\t\t\troomType,\n\t\t}: {\n\t\t\taction: 'new' | 'delete' | 'edit';\n\t\t\troomId: number;\n\t\t\troomName: string;\n\t\t\troomType: 'open' | 'protected' | 'private';\n\t\t}) => {\n\t\t\tswitch (action) {\n\t\t\t\tcase 'new': {\n\t\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\t\troomName,\n\t\t\t\t\t\troomType,\n\t\t\t\t\t\tisJoined: false,\n\t\t\t\t\t};\n\t\t\t\t\tconsole.log(`room-list-update new: ${JSON.stringify(newRoomList)}`);\n\t\t\t\t\tconsole.log(`room-list-update origin: ${JSON.stringify(roomList)}`);\n\t\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'delete': {\n\t\t\t\t\tconst newRoomList: chatType.roomListDto = { ...roomList };\n\t\t\t\t\tdelete newRoomList[roomId];\n\t\t\t\t\tsetRoomList({ ...newRoomList });\n\t\t\t\t\tif (focusRoom == roomId) {\n\t\t\t\t\t\tsetFocusRoom(-1);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'edit': {\n\t\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\t\troomName,\n\t\t\t\t\t\troomType,\n\t\t\t\t\t\tisJoined: roomList[roomId]?.isJoined,\n\t\t\t\t\t\tdetail: roomList[roomId].detail || {} as chatType.roomDetailDto,\n\t\t\t\t\t};\n\t\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"room-list-update\");\n\t\t};\n\t}, [roomList, focusRoom]);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"room-clear\", () => {\n\t\t\tquitRoomRelativeModal();\n\t\t\tsetRoomList({});\n\t\t\tsetFocusRoom(-1);\n\t\t});\n\t\tsocket.socket.on(\"user-clear\", () => {\n\t\t\tsetUserList({});\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"room-clear\");\n\t\t\tsocket.socket.off(\"user-clear\");\n\t\t};\n\t}, [roomList, userList, setRoomList, setUserList]);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"room-join\", ({\n\t\t\troomId,\n\t\t\troomName,\n\t\t\troomType,\n\t\t\tuserList = {},\n\t\t\tmyPower,\n\t\t\tstatus,\n\t\t\tmethod = ''\n\t\t}: {\n\t\t\troomId: number,\n\t\t\troomName: string,\n\t\t\troomType: 'open' | 'protected' | 'private' | 'dm',\n\t\t\tuserList: chatType.userInRoomListDto,\n\t\t\tmyPower: chatType.userRoomPower,\n\t\t\tstatus: 'ok' | 'ko',\n\t\t\tmethod?: 'invite' | ''\n\t\t}) => {\n\t\t\tswitch (status) {\n\t\t\t\tcase 'ok': {\n\t\t\t\t\tconsole.log(`join [${roomName}]room`);\n\t\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\t\troomName,\n\t\t\t\t\t\troomType,\n\t\t\t\t\t\tisJoined: true,\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tuserList: { ...userList },\n\t\t\t\t\t\t\tmessageList: [],\n\t\t\t\t\t\t\tmyRoomStatus: 'normal',\n\t\t\t\t\t\t\tmyRoomPower: myPower\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tconsole.log(`room - join new: ${JSON.stringify(newRoomList)}`);\n\t\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t\t\tif (method !== 'invite') {\n\t\t\t\t\t\tsetFocusRoom(roomId);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'ko': {\n\t\t\t\t\tif (roomList[roomId].isJoined === false) {\n\t\t\t\t\t\talert(`fail to join[${roomName}]room`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"room-join\");\n\t\t};\n\t}, [roomList]);\n\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"room-in-action\", ({\n\t\t\troomId,\n\t\t\taction,\n\t\t\ttargetId\n\t\t}: {\n\t\t\troomId: number;\n\t\t\taction: 'ban' | 'kick' | 'mute' | 'admin' | 'normal' | 'owner' | 'leave' | 'newMember';\n\t\t\ttargetId: number\n\t\t}) => {\n\t\t\tif (roomList[roomId]?.isJoined !== true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tswitch (action) {\n\t\t\t\tcase 'newMember': {\n\t\t\t\t\tif (targetId === userInfo.uid) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newUser: chatType.userInRoomListDto = {};\n\t\t\t\t\t\tnewUser[targetId] = {\n\t\t\t\t\t\t\tuserRoomStatus: 'normal',\n\t\t\t\t\t\t\tuserRoomPower: 'member'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = { ...roomList[roomId].detail?.userList!, ...newUser };\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList })\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'ban':\n\t\t\t\tcase 'leave':\n\t\t\t\tcase 'kick': {\n\t\t\t\t\tif (targetId === userInfo.uid) {\n\t\t\t\t\t\tif (roomList[roomId].roomType === 'private') {\n\t\t\t\t\t\t\tconst newRoomList: chatType.roomListDto = { ...roomList };\n\t\t\t\t\t\t\tdelete newRoomList[roomId];\n\t\t\t\t\t\t\tsetRoomList({ ...newRoomList });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\t\t\t\troomName: roomList[roomId].roomName,\n\t\t\t\t\t\t\t\troomType: roomList[roomId].roomType,\n\t\t\t\t\t\t\t\tisJoined: false,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (focusRoom === roomId) {\n\t\t\t\t\t\t\tsetFocusRoom(-1);\n\t\t\t\t\t\t\tquitRoomRelativeModal();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = roomList[roomId].detail?.userList!;\n\t\t\t\t\t\tdelete newUserList[targetId];\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList });\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'mute':\n\t\t\t\tcase 'normal': {\n\t\t\t\t\tif (targetId === userInfo.uid) {\n\t\t\t\t\t\tif (action === 'mute' && roomList[roomId].detail?.myRoomStatus === 'mute') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = roomList[roomId].detail?.userList!;\n\t\t\t\t\t\tnewUserList[targetId] = { ...newUserList[targetId], userRoomStatus: action };\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList }, action);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = roomList[roomId].detail?.userList!;\n\t\t\t\t\t\tnewUserList[targetId] = { ...newUserList[targetId], userRoomStatus: action };\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList });\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'owner':\n\t\t\t\tcase 'admin': {\n\t\t\t\t\tif (targetId === userInfo.uid) {\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = roomList[roomId].detail?.userList!;\n\t\t\t\t\t\tnewUserList[targetId] = { ...newUserList[targetId], userRoomPower: action };\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList }, undefined, action);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newUserList: chatType.userInRoomListDto = roomList[roomId].detail?.userList!;\n\t\t\t\t\t\tnewUserList[targetId] = { ...newUserList[targetId], userRoomPower: action };\n\t\t\t\t\t\tsocket.setNewDetailToNewRoom({ roomList, setRoomList, roomId, newUserList });\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"room-in-action\");\n\t\t}\n\t}, [roomList, userInfo, focusRoom]);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"user-update\", ({\n\t\t\tuserId,\n\t\t\tuserDisplayName,\n\t\t\tuserProfileUrl,\n\t\t\tuserStatus\n\t\t}: {\n\t\t\tuserId: number,\n\t\t\tuserDisplayName: string\n\t\t\tuserProfileUrl: string;\n\t\t\tuserStatus: 'online' | 'offline' | 'inGame';\n\t\t}) => {\n\t\t\tconst newUser: chatType.userDto = {};\n\t\t\tnewUser[userId] = {\n\t\t\t\tuserDisplayName,\n\t\t\t\tuserProfileUrl,\n\t\t\t\tuserStatus,\n\t\t\t};\n\t\t\tconsole.log(`user-update: ${userDisplayName}: ${userStatus}`);\n\t\t\tsetUserList((prevUserList) => ({ ...prevUserList, ...newUser }));\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"user-update\");\n\t\t}\n\t}, [userList, isFirstLogin]);\n\n\tuseEffect(() => {\n\t\tsocket.socket.on(\"message\", ({\n\t\t\troomId,\n\t\t\tfrom,\n\t\t\tmessage\n\t\t}: {\n\t\t\troomId: number,\n\t\t\tfrom: number,\n\t\t\tmessage: string\n\t\t}) => {\n\t\t\tconst block = blockList[from] ? true : false;\n\t\t\tswitch (block) {\n\t\t\t\tcase true: {\n\t\t\t\t\tconsole.log(`message from ${from} is blocked`);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase false: {\n\t\t\t\t\tconsole.log(`message from ${from} is received: ${message}`);\n\t\t\t\t\tconst newMessageList: chatType.roomMessageDto[] = roomList[roomId].detail?.messageList!;\n\t\t\t\t\tnewMessageList.unshift({\n\t\t\t\t\t\tuserId: from,\n\t\t\t\t\t\tuserName: userList[from].userDisplayName,\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tisMe: userInfo.uid === from ? true : false,\n\t\t\t\t\t\tnumber: roomList[roomId].detail?.messageList.length!\n\t\t\t\t\t});\n\t\t\t\t\tconst newDetail: Partial<chatType.roomDetailDto> = { ...roomList[roomId].detail, messageList: [...newMessageList] };\n\t\t\t\t\tconst newRoomList: chatType.roomListDto = {};\n\t\t\t\t\tnewRoomList[roomId] = {\n\t\t\t\t\t\troomName: roomList[roomId].roomName,\n\t\t\t\t\t\troomType: roomList[roomId].roomType,\n\t\t\t\t\t\tisJoined: roomList[roomId].isJoined,\n\t\t\t\t\t\tdetail: newDetail as chatType.roomDetailDto\n\t\t\t\t\t};\n\t\t\t\t\tif (roomList[roomId].roomType === 'dm' && focusRoom !== roomId) {\n\t\t\t\t\t\tconst newDmUser: chatType.userDto = {};\n\t\t\t\t\t\tnewDmUser[roomId] = {\n\t\t\t\t\t\t\tuserDisplayName: userList[roomId].userDisplayName,\n\t\t\t\t\t\t\tuserProfileUrl: userList[roomId].userProfileUrl,\n\t\t\t\t\t\t\tuserStatus: userList[roomId].userStatus,\n\t\t\t\t\t\t\tdmStatus: 'unread',\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsetUserList({ ...userList, ...newDmUser });\n\t\t\t\t\t}\n\t\t\t\t\tsetRoomList({ ...roomList, ...newRoomList });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tsocket.socket.off(\"message\");\n\t\t};\n\t}, [roomList, blockList, userList, userInfo, focusRoom]);\n\n\tasync function firstLogin() {\n\t\tif (isFirstLogin) {\n\t\t\tawait getMyinfoHandler();\n\t\t\tsocket.socket.connect();\n\t\t}\n\t\tsetIsFirstLogin(false);\n\t}\n\n\tif (isFirstLogin) {\n\t\tfirstLogin();\n\t}\n\n\n\treturn (\n\t\t<BackGround>\n\t\t\t<button onClick={getMyinfoHandler}> /user/me</button>\n\t\t\t<button onClick={showMyinfo}> show /user/me</button>\n\t\t\t<button onClick={getRoomList}> roomList</button>\n\t\t\t<button onClick={getUserList}> userList</button>\n\t\t\t<button onClick={getDMList}> dmHistoryList</button>\n\t\t\t<button onClick={getFollowingList}> FollowList</button>\n\t\t\t<button onClick={showServerUser}> show server user</button>\n\t\t\t<button onClick={showServerRoom}> show server room</button>\n\t\t\t<button onClick={showSocketState}> socket state</button>\n\t\t\t<button onClick={() => setGameInviteModal(true)}> gameinvite</button>\n\t\t\t<TopBar />\n\t\t\t{userInfoModal ? <UserInfoModal /> : null}\n\t\t\t{roomModal ? <RoomModal /> : null}\n\t\t\t{inviteModal ? <RoomInviteModal /> : null}\n\t\t\t{pwInputModal ? <PasswordModal /> : null}\n\t\t\t{gameInviteModal ? (\n\t\t\t\t<GameInviteModal\n\t\t\t\t\tfrom=\"yuhwang\"\n\t\t\t\t\tAcceptBtn={() => {\n\t\t\t\t\t\tsetGameInviteModal(false);\n\t\t\t\t\t}}\n\t\t\t\t\tDeclineBtn={() => { }}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t\t<ChatRoomList />\n\t\t\t<ChatUserList />\n\t\t\t<ChatArea />\n\t\t\t<ChatRoomUserList />\n\t\t</BackGround>\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}